/*! For license information please see pong.js.LICENSE.txt */
(()=>{var t={8068:t=>{function e(){var t=[].slice.call(arguments);function e(e,n){Object.keys(n).forEach((function(r){~t.indexOf(r)||(e[r]=n[r])}))}return function(){for(var t=[].slice.call(arguments),n=0,r={};n<t.length;n++)e(r,t[n]);return r}}function n(t,r,o){var i=e("name","message","stack","constructor","toJSON")(r||{});for(var s in this.message=t||"Unspecified AssertionError",this.showDiff=!1,i)this[s]=i[s];if(o=o||n,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(t){this.stack=t.stack}}t.exports=n,n.prototype=Object.create(Error.prototype),n.prototype.name="AssertionError",n.prototype.constructor=n,n.prototype.toJSON=function(t){var n=e("constructor","toJSON","stack")({name:this.name},this);return!1!==t&&this.stack&&(n.stack=this.stack),n}},5881:(t,e,n)=>{t.exports=n(5422)},5422:(t,e,n)=>{var r=[];e.version="4.3.0",e.AssertionError=n(8068);var o=n(9455);e.use=function(t){return~r.indexOf(t)||(t(e,o),r.push(t)),e},e.util=o;var i=n(9898);e.config=i;var s=n(741);e.use(s);var a=n(5980);e.use(a);var c=n(7983);e.use(c);var u=n(8324);e.use(u);var l=n(9524);e.use(l)},741:(t,e,n)=>{var r=n(9898);t.exports=function(t,e){var n=t.AssertionError,o=e.flag;function i(t,n,r,s){return o(this,"ssfi",r||i),o(this,"lockSsfi",s),o(this,"object",t),o(this,"message",n),e.proxify(this)}t.Assertion=i,Object.defineProperty(i,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=t}}),Object.defineProperty(i,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=t}}),i.addProperty=function(t,n){e.addProperty(this.prototype,t,n)},i.addMethod=function(t,n){e.addMethod(this.prototype,t,n)},i.addChainableMethod=function(t,n,r){e.addChainableMethod(this.prototype,t,n,r)},i.overwriteProperty=function(t,n){e.overwriteProperty(this.prototype,t,n)},i.overwriteMethod=function(t,n){e.overwriteMethod(this.prototype,t,n)},i.overwriteChainableMethod=function(t,n,r){e.overwriteChainableMethod(this.prototype,t,n,r)},i.prototype.assert=function(t,i,s,a,c,u){var l=e.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==r.showDiff&&(u=!1),!l){i=e.getMessage(this,arguments);var h={actual:e.getActual(this,arguments),expected:a,showDiff:u},f=e.getOperator(this,arguments);throw f&&(h.operator=f),new n(i,h,r.includeStack?this.assert:o(this,"ssfi"))}},Object.defineProperty(i.prototype,"_obj",{get:function(){return o(this,"object")},set:function(t){o(this,"object",t)}})}},9898:t=>{t.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},5980:t=>{t.exports=function(t,e){var n=t.Assertion,r=t.AssertionError,o=e.flag;function i(t,n){n&&o(this,"message",n),t=t.toLowerCase();var r=o(this,"object"),i=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";this.assert(t===e.type(r).toLowerCase(),"expected #{this} to be "+i+t,"expected #{this} not to be "+i+t)}function s(t,n){return e.isNaN(t)&&e.isNaN(n)||t===n}function a(){o(this,"contains",!0)}function c(t,i){i&&o(this,"message",i);var a=o(this,"object"),c=e.type(a).toLowerCase(),u=o(this,"message"),l=o(this,"negate"),h=o(this,"ssfi"),f=o(this,"deep"),d=f?"deep ":"";u=u?u+": ":"";var p=!1;switch(c){case"string":p=-1!==a.indexOf(t);break;case"weakset":if(f)throw new r(u+"unable to use .deep.include with WeakSet",void 0,h);p=a.has(t);break;case"map":var y=f?e.eql:s;a.forEach((function(e){p=p||y(e,t)}));break;case"set":f?a.forEach((function(n){p=p||e.eql(n,t)})):p=a.has(t);break;case"array":p=f?a.some((function(n){return e.eql(n,t)})):-1!==a.indexOf(t);break;default:if(t!==Object(t))throw new r(u+"the given combination of arguments ("+c+" and "+e.type(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+e.type(t).toLowerCase(),void 0,h);var g=Object.keys(t),m=null,v=0;if(g.forEach((function(i){var s=new n(a);if(e.transferFlags(this,s,!0),o(s,"lockSsfi",!0),l&&1!==g.length)try{s.property(i,t[i])}catch(t){if(!e.checkError.compatibleConstructor(t,r))throw t;null===m&&(m=t),v++}else s.property(i,t[i])}),this),l&&g.length>1&&v===g.length)throw m;return}this.assert(p,"expected #{this} to "+d+"include "+e.inspect(t),"expected #{this} to not "+d+"include "+e.inspect(t))}function u(){var t=o(this,"object"),n=e.type(t);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function l(t,e){e&&o(this,"message",e);var n=o(this,"object");if(o(this,"deep")){var r=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(t),o(this,"lockSsfi",r)}else this.assert(t===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}function h(t,n){n&&o(this,"message",n),this.assert(e.eql(t,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}function f(t,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",h=o(this,"ssfi"),f=e.type(a).toLowerCase(),d=e.type(t).toLowerCase(),p=!0;if(c&&"map"!==f&&"set"!==f&&new n(a,u,h,!0).to.have.property("length"),c||"date"!==f||"date"===d?"number"===d||!c&&"number"!==f?c||"date"===f||"number"===f?p=!1:s=l+"expected "+("string"===f?"'"+a+"'":a)+" to be a number or a date":s=l+"the argument to above must be a number":s=l+"the argument to above must be a date",p)throw new r(s,void 0,h);if(c){var y,g="length";"map"===f||"set"===f?(g="size",y=a.size):y=a.length,this.assert(y>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,y)}else this.assert(a>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}function d(t,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",h=o(this,"ssfi"),f=e.type(a).toLowerCase(),d=e.type(t).toLowerCase(),p=!0;if(c&&"map"!==f&&"set"!==f&&new n(a,u,h,!0).to.have.property("length"),c||"date"!==f||"date"===d?"number"===d||!c&&"number"!==f?c||"date"===f||"number"===f?p=!1:s=l+"expected "+("string"===f?"'"+a+"'":a)+" to be a number or a date":s=l+"the argument to least must be a number":s=l+"the argument to least must be a date",p)throw new r(s,void 0,h);if(c){var y,g="length";"map"===f||"set"===f?(g="size",y=a.size):y=a.length,this.assert(y>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,y)}else this.assert(a>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}function p(t,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",h=o(this,"ssfi"),f=e.type(a).toLowerCase(),d=e.type(t).toLowerCase(),p=!0;if(c&&"map"!==f&&"set"!==f&&new n(a,u,h,!0).to.have.property("length"),c||"date"!==f||"date"===d?"number"===d||!c&&"number"!==f?c||"date"===f||"number"===f?p=!1:s=l+"expected "+("string"===f?"'"+a+"'":a)+" to be a number or a date":s=l+"the argument to below must be a number":s=l+"the argument to below must be a date",p)throw new r(s,void 0,h);if(c){var y,g="length";"map"===f||"set"===f?(g="size",y=a.size):y=a.length,this.assert(y<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,y)}else this.assert(a<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}function y(t,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),l=u?u+": ":"",h=o(this,"ssfi"),f=e.type(a).toLowerCase(),d=e.type(t).toLowerCase(),p=!0;if(c&&"map"!==f&&"set"!==f&&new n(a,u,h,!0).to.have.property("length"),c||"date"!==f||"date"===d?"number"===d||!c&&"number"!==f?c||"date"===f||"number"===f?p=!1:s=l+"expected "+("string"===f?"'"+a+"'":a)+" to be a number or a date":s=l+"the argument to most must be a number":s=l+"the argument to most must be a date",p)throw new r(s,void 0,h);if(c){var y,g="length";"map"===f||"set"===f?(g="size",y=a.size):y=a.length,this.assert(y<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,y)}else this.assert(a<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}function g(t,n){n&&o(this,"message",n);var i=o(this,"object"),s=o(this,"ssfi"),a=o(this,"message");try{var c=i instanceof t}catch(n){if(n instanceof TypeError)throw new r((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+e.type(t)+" was given.",void 0,s);throw n}var u=e.getName(t);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function m(t,n,i){i&&o(this,"message",i);var s=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),l=o(this,"ssfi"),h=typeof t;if(c=c?c+": ":"",s){if("string"!==h)throw new r(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==h&&"number"!==h&&"symbol"!==h)throw new r(c+"the argument to property must be a string, number, or symbol",void 0,l);if(s&&a)throw new r(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new r(c+"Target cannot be null or undefined.",void 0,l);var f,d=o(this,"deep"),p=o(this,"negate"),y=s?e.getPathInfo(u,t):null,g=s?y.value:u[t],m="";d&&(m+="deep "),a&&(m+="own "),s&&(m+="nested "),m+="property ",f=a?Object.prototype.hasOwnProperty.call(u,t):s?y.exists:e.hasProperty(u,t),p&&1!==arguments.length||this.assert(f,"expected #{this} to have "+m+e.inspect(t),"expected #{this} to not have "+m+e.inspect(t)),arguments.length>1&&this.assert(f&&(d?e.eql(n,g):n===g),"expected #{this} to have "+m+e.inspect(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+m+e.inspect(t)+" of #{act}",n,g),o(this,"object",g)}function v(t,e,n){o(this,"own",!0),m.apply(this,arguments)}function w(t,n,r){"string"==typeof n&&(r=n,n=null),r&&o(this,"message",r);var i=o(this,"object"),s=Object.getOwnPropertyDescriptor(Object(i),t);s&&n?this.assert(e.eql(n,s),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to match "+e.inspect(n)+", got "+e.inspect(s),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to not match "+e.inspect(n),n,s,!0):this.assert(s,"expected #{this} to have an own property descriptor for "+e.inspect(t),"expected #{this} to not have an own property descriptor for "+e.inspect(t)),o(this,"object",s)}function b(){o(this,"doLength",!0)}function x(t,r){r&&o(this,"message",r);var i,s=o(this,"object"),a=e.type(s).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",i=s.size;break;default:new n(s,c,u,!0).to.have.property("length"),i=s.length}this.assert(i==t,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",t,i)}function E(t,e){e&&o(this,"message",e);var n=o(this,"object");this.assert(t.exec(n),"expected #{this} to match "+t,"expected #{this} not to match "+t)}function A(t){var n,i,s=o(this,"object"),a=e.type(s),c=e.type(t),u=o(this,"ssfi"),l=o(this,"deep"),h="",f=!0,d=o(this,"message"),p=(d=d?d+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)h=l?"deeply ":"",i=[],s.forEach((function(t,e){i.push(e)})),"Array"!==c&&(t=Array.prototype.slice.call(arguments));else{switch(i=e.getOwnEnumerableProperties(s),c){case"Array":if(arguments.length>1)throw new r(p,void 0,u);break;case"Object":if(arguments.length>1)throw new r(p,void 0,u);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map((function(t){return"symbol"==typeof t?t:String(t)}))}if(!t.length)throw new r(d+"keys required",void 0,u);var y=t.length,g=o(this,"any"),m=o(this,"all"),v=t;if(g||m||(m=!0),g&&(f=v.some((function(t){return i.some((function(n){return l?e.eql(t,n):t===n}))}))),m&&(f=v.every((function(t){return i.some((function(n){return l?e.eql(t,n):t===n}))})),o(this,"contains")||(f=f&&t.length==i.length)),y>1){var w=(t=t.map((function(t){return e.inspect(t)}))).pop();m&&(n=t.join(", ")+", and "+w),g&&(n=t.join(", ")+", or "+w)}else n=e.inspect(t[0]);n=(y>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(f,"expected #{this} to "+h+n,"expected #{this} to not "+h+n,v.slice(0).sort(e.compareByInspect),i.sort(e.compareByInspect),!0)}function k(t,r,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),l=o(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(t instanceof RegExp||"string"==typeof t)&&(r=t,t=null);try{a()}catch(t){s=t}var h=void 0===t&&void 0===r,f=Boolean(t&&r),d=!1,p=!1;if(h||!h&&!l){var y="an error";t instanceof Error?y="#{exp}":t&&(y=e.checkError.getConstructorName(t)),this.assert(s,"expected #{this} to throw "+y,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),s instanceof Error?s.toString():"string"==typeof s?s:s&&e.checkError.getConstructorName(s))}if(t&&s&&(t instanceof Error&&e.checkError.compatibleInstance(s,t)===l&&(f&&l?d=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s&&!l?" but #{act} was thrown":""),t.toString(),s.toString())),e.checkError.compatibleConstructor(s,t)===l&&(f&&l?d=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&e.checkError.getConstructorName(t),s instanceof Error?s.toString():s&&e.checkError.getConstructorName(s)))),s&&null!=r){var g="including";r instanceof RegExp&&(g="matching"),e.checkError.compatibleMessage(s,r)===l&&(f&&l?p=!0:this.assert(l,"expected #{this} to throw error "+g+" #{exp} but got #{act}","expected #{this} to throw error not "+g+" #{exp}",r,e.checkError.getMessage(s)))}d&&p&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&e.checkError.getConstructorName(t),s instanceof Error?s.toString():s&&e.checkError.getConstructorName(s)),o(this,"object",s)}function S(t,n){n&&o(this,"message",n);var r=o(this,"object"),i=o(this,"itself"),s="function"!=typeof r||i?r[t]:r.prototype[t];this.assert("function"==typeof s,"expected #{this} to respond to "+e.inspect(t),"expected #{this} to not respond to "+e.inspect(t))}function P(t,n){n&&o(this,"message",n);var r=t(o(this,"object"));this.assert(r,"expected #{this} to satisfy "+e.objDisplay(t),"expected #{this} to not satisfy"+e.objDisplay(t),!o(this,"negate"),r)}function C(t,e,i){i&&o(this,"message",i);var s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new n(s,a,c,!0).is.a("number"),"number"!=typeof t||"number"!=typeof e)throw new r((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers"+(void 0===e?", and a delta is required":""),void 0,c);this.assert(Math.abs(s-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}function M(t,e,r){r&&o(this,"message",r);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(s,a,c,!0).is.a("function"),e?(new n(t,a,c,!0).to.have.property(e),i=t[e]):(new n(t,a,c,!0).is.a("function"),i=t()),s();var u=null==e?t():t[e],l=null==e?i:"."+e;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==i),this.assert(i!==u,"expected "+l+" to change","expected "+l+" to not change")}function N(t,e,r){r&&o(this,"message",r);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(s,a,c,!0).is.a("function"),e?(new n(t,a,c,!0).to.have.property(e),i=t[e]):(new n(t,a,c,!0).is.a("function"),i=t()),new n(i,a,c,!0).is.a("number"),s();var u=null==e?t():t[e],l=null==e?i:"."+e;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-i),this.assert(u-i>0,"expected "+l+" to increase","expected "+l+" to not increase")}function O(t,e,r){r&&o(this,"message",r);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new n(s,a,c,!0).is.a("function"),e?(new n(t,a,c,!0).to.have.property(e),i=t[e]):(new n(t,a,c,!0).is.a("function"),i=t()),new n(i,a,c,!0).is.a("number"),s();var u=null==e?t():t[e],l=null==e?i:"."+e;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",i-u),this.assert(u-i<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(t){n.addProperty(t)})),n.addProperty("not",(function(){o(this,"negate",!0)})),n.addProperty("deep",(function(){o(this,"deep",!0)})),n.addProperty("nested",(function(){o(this,"nested",!0)})),n.addProperty("own",(function(){o(this,"own",!0)})),n.addProperty("ordered",(function(){o(this,"ordered",!0)})),n.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),n.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),n.addChainableMethod("an",i),n.addChainableMethod("a",i),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(e.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var t=o(this,"object");this.assert(null!=t,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var t,n=o(this,"object"),i=o(this,"ssfi"),s=o(this,"message");switch(s=s?s+": ":"",e.type(n).toLowerCase()){case"array":case"string":t=n.length;break;case"map":case"set":t=n.size;break;case"weakmap":case"weakset":throw new r(s+".empty was passed a weak collection",void 0,i);case"function":var a=s+".empty was passed a function "+e.getName(n);throw new r(a.trim(),void 0,i);default:if(n!==Object(n))throw new r(s+".empty was passed non-string primitive "+e.inspect(n),void 0,i);t=Object.keys(n).length}this.assert(0===t,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",u),n.addProperty("Arguments",u),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",h),n.addMethod("eqls",h),n.addMethod("above",f),n.addMethod("gt",f),n.addMethod("greaterThan",f),n.addMethod("least",d),n.addMethod("gte",d),n.addMethod("below",p),n.addMethod("lt",p),n.addMethod("lessThan",p),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(t,i,s){s&&o(this,"message",s);var a,c=o(this,"object"),u=o(this,"doLength"),l=o(this,"message"),h=l?l+": ":"",f=o(this,"ssfi"),d=e.type(c).toLowerCase(),p=e.type(t).toLowerCase(),y=e.type(i).toLowerCase(),g=!0,m="date"===p&&"date"===y?t.toUTCString()+".."+i.toUTCString():t+".."+i;if(u&&"map"!==d&&"set"!==d&&new n(c,l,f,!0).to.have.property("length"),u||"date"!==d||"date"===p&&"date"===y?"number"===p&&"number"===y||!u&&"number"!==d?u||"date"===d||"number"===d?g=!1:a=h+"expected "+("string"===d?"'"+c+"'":c)+" to be a number or a date":a=h+"the arguments to within must be numbers":a=h+"the arguments to within must be dates",g)throw new r(a,void 0,f);if(u){var v,w="length";"map"===d||"set"===d?(w="size",v=c.size):v=c.length,this.assert(v>=t&&v<=i,"expected #{this} to have a "+w+" within "+m,"expected #{this} to not have a "+w+" within "+m)}else this.assert(c>=t&&c<=i,"expected #{this} to be within "+m,"expected #{this} to not be within "+m)})),n.addMethod("instanceof",g),n.addMethod("instanceOf",g),n.addMethod("property",m),n.addMethod("ownProperty",v),n.addMethod("haveOwnProperty",v),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",x,b),n.addChainableMethod("lengthOf",x,b),n.addMethod("match",E),n.addMethod("matches",E),n.addMethod("string",(function(t,r){r&&o(this,"message",r);var i=o(this,"object"),s=o(this,"message"),a=o(this,"ssfi");new n(i,s,a,!0).is.a("string"),this.assert(~i.indexOf(t),"expected #{this} to contain "+e.inspect(t),"expected #{this} to not contain "+e.inspect(t))})),n.addMethod("keys",A),n.addMethod("key",A),n.addMethod("throw",k),n.addMethod("throws",k),n.addMethod("Throw",k),n.addMethod("respondTo",S),n.addMethod("respondsTo",S),n.addProperty("itself",(function(){o(this,"itself",!0)})),n.addMethod("satisfy",P),n.addMethod("satisfies",P),n.addMethod("closeTo",C),n.addMethod("approximately",C),n.addMethod("members",(function(t,r){r&&o(this,"message",r);var i=o(this,"object"),s=o(this,"message"),a=o(this,"ssfi");new n(i,s,a,!0).to.be.an("array"),new n(t,s,a,!0).to.be.an("array");var c,u,l,h=o(this,"contains"),f=o(this,"ordered");h?(u="expected #{this} to be "+(c=f?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=f?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var d=o(this,"deep")?e.eql:void 0;this.assert(function(t,e,n,r,o){if(!r){if(t.length!==e.length)return!1;e=e.slice()}return t.every((function(t,i){if(o)return n?n(t,e[i]):t===e[i];if(!n){var s=e.indexOf(t);return-1!==s&&(r||e.splice(s,1),!0)}return e.some((function(o,i){return!!n(t,o)&&(r||e.splice(i,1),!0)}))}))}(t,i,d,h,f),u,l,t,i,!0)})),n.addMethod("oneOf",(function(t,e){e&&o(this,"message",e);var r=o(this,"object"),i=o(this,"message"),s=o(this,"ssfi"),a=o(this,"contains");new n(t,i,s,!0).to.be.an("array"),a?this.assert(t.some((function(t){return r.indexOf(t)>-1})),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)})),n.addMethod("change",M),n.addMethod("changes",M),n.addMethod("increase",N),n.addMethod("increases",N),n.addMethod("decrease",O),n.addMethod("decreases",O),n.addMethod("by",(function(t,e){e&&o(this,"message",e);var n,r=o(this,"deltaMsgObj"),i=o(this,"initialDeltaValue"),s=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");n="change"===a?Math.abs(s-i)===Math.abs(t):c===Math.abs(t),this.assert(n,"expected "+r+" to "+a+" by "+t,"expected "+r+" to not "+a+" by "+t)})),n.addProperty("extensible",(function(){var t=o(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var t=o(this,"object"),e=t!==Object(t)||Object.isSealed(t);this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var t=o(this,"object"),e=t!==Object(t)||Object.isFrozen(t);this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(t){var e=o(this,"object");this.assert("number"==typeof e&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},9524:t=>{t.exports=function(t,e){var n=t.Assertion,r=e.flag,o=t.assert=function(e,r){new n(null,null,t.assert,!0).assert(e,r,"[ negation message unavailable ]")};o.fail=function(e,n,r,i){throw arguments.length<2&&(r=e,e=void 0),r=r||"assert.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:i},o.fail)},o.isOk=function(t,e){new n(t,e,o.isOk,!0).is.ok},o.isNotOk=function(t,e){new n(t,e,o.isNotOk,!0).is.not.ok},o.equal=function(t,e,i){var s=new n(t,i,o.equal,!0);s.assert(e==r(s,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)},o.notEqual=function(t,e,i){var s=new n(t,i,o.notEqual,!0);s.assert(e!=r(s,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)},o.strictEqual=function(t,e,r){new n(t,r,o.strictEqual,!0).to.equal(e)},o.notStrictEqual=function(t,e,r){new n(t,r,o.notStrictEqual,!0).to.not.equal(e)},o.deepEqual=o.deepStrictEqual=function(t,e,r){new n(t,r,o.deepEqual,!0).to.eql(e)},o.notDeepEqual=function(t,e,r){new n(t,r,o.notDeepEqual,!0).to.not.eql(e)},o.isAbove=function(t,e,r){new n(t,r,o.isAbove,!0).to.be.above(e)},o.isAtLeast=function(t,e,r){new n(t,r,o.isAtLeast,!0).to.be.least(e)},o.isBelow=function(t,e,r){new n(t,r,o.isBelow,!0).to.be.below(e)},o.isAtMost=function(t,e,r){new n(t,r,o.isAtMost,!0).to.be.most(e)},o.isTrue=function(t,e){new n(t,e,o.isTrue,!0).is.true},o.isNotTrue=function(t,e){new n(t,e,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(t,e){new n(t,e,o.isFalse,!0).is.false},o.isNotFalse=function(t,e){new n(t,e,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(t,e){new n(t,e,o.isNull,!0).to.equal(null)},o.isNotNull=function(t,e){new n(t,e,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(t,e){new n(t,e,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(t,e){new n(t,e,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(t,e){new n(t,e,o.exists,!0).to.exist},o.notExists=function(t,e){new n(t,e,o.notExists,!0).to.not.exist},o.isUndefined=function(t,e){new n(t,e,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(t,e){new n(t,e,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(t,e){new n(t,e,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(t,e){new n(t,e,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(t,e){new n(t,e,o.isObject,!0).to.be.a("object")},o.isNotObject=function(t,e){new n(t,e,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(t,e){new n(t,e,o.isArray,!0).to.be.an("array")},o.isNotArray=function(t,e){new n(t,e,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(t,e){new n(t,e,o.isString,!0).to.be.a("string")},o.isNotString=function(t,e){new n(t,e,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(t,e){new n(t,e,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(t,e){new n(t,e,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(t,e){new n(t,e,o.isFinite,!0).to.be.finite},o.isBoolean=function(t,e){new n(t,e,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(t,e){new n(t,e,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(t,e,r){new n(t,r,o.typeOf,!0).to.be.a(e)},o.notTypeOf=function(t,e,r){new n(t,r,o.notTypeOf,!0).to.not.be.a(e)},o.instanceOf=function(t,e,r){new n(t,r,o.instanceOf,!0).to.be.instanceOf(e)},o.notInstanceOf=function(t,e,r){new n(t,r,o.notInstanceOf,!0).to.not.be.instanceOf(e)},o.include=function(t,e,r){new n(t,r,o.include,!0).include(e)},o.notInclude=function(t,e,r){new n(t,r,o.notInclude,!0).not.include(e)},o.deepInclude=function(t,e,r){new n(t,r,o.deepInclude,!0).deep.include(e)},o.notDeepInclude=function(t,e,r){new n(t,r,o.notDeepInclude,!0).not.deep.include(e)},o.nestedInclude=function(t,e,r){new n(t,r,o.nestedInclude,!0).nested.include(e)},o.notNestedInclude=function(t,e,r){new n(t,r,o.notNestedInclude,!0).not.nested.include(e)},o.deepNestedInclude=function(t,e,r){new n(t,r,o.deepNestedInclude,!0).deep.nested.include(e)},o.notDeepNestedInclude=function(t,e,r){new n(t,r,o.notDeepNestedInclude,!0).not.deep.nested.include(e)},o.ownInclude=function(t,e,r){new n(t,r,o.ownInclude,!0).own.include(e)},o.notOwnInclude=function(t,e,r){new n(t,r,o.notOwnInclude,!0).not.own.include(e)},o.deepOwnInclude=function(t,e,r){new n(t,r,o.deepOwnInclude,!0).deep.own.include(e)},o.notDeepOwnInclude=function(t,e,r){new n(t,r,o.notDeepOwnInclude,!0).not.deep.own.include(e)},o.match=function(t,e,r){new n(t,r,o.match,!0).to.match(e)},o.notMatch=function(t,e,r){new n(t,r,o.notMatch,!0).to.not.match(e)},o.property=function(t,e,r){new n(t,r,o.property,!0).to.have.property(e)},o.notProperty=function(t,e,r){new n(t,r,o.notProperty,!0).to.not.have.property(e)},o.propertyVal=function(t,e,r,i){new n(t,i,o.propertyVal,!0).to.have.property(e,r)},o.notPropertyVal=function(t,e,r,i){new n(t,i,o.notPropertyVal,!0).to.not.have.property(e,r)},o.deepPropertyVal=function(t,e,r,i){new n(t,i,o.deepPropertyVal,!0).to.have.deep.property(e,r)},o.notDeepPropertyVal=function(t,e,r,i){new n(t,i,o.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)},o.ownProperty=function(t,e,r){new n(t,r,o.ownProperty,!0).to.have.own.property(e)},o.notOwnProperty=function(t,e,r){new n(t,r,o.notOwnProperty,!0).to.not.have.own.property(e)},o.ownPropertyVal=function(t,e,r,i){new n(t,i,o.ownPropertyVal,!0).to.have.own.property(e,r)},o.notOwnPropertyVal=function(t,e,r,i){new n(t,i,o.notOwnPropertyVal,!0).to.not.have.own.property(e,r)},o.deepOwnPropertyVal=function(t,e,r,i){new n(t,i,o.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)},o.notDeepOwnPropertyVal=function(t,e,r,i){new n(t,i,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)},o.nestedProperty=function(t,e,r){new n(t,r,o.nestedProperty,!0).to.have.nested.property(e)},o.notNestedProperty=function(t,e,r){new n(t,r,o.notNestedProperty,!0).to.not.have.nested.property(e)},o.nestedPropertyVal=function(t,e,r,i){new n(t,i,o.nestedPropertyVal,!0).to.have.nested.property(e,r)},o.notNestedPropertyVal=function(t,e,r,i){new n(t,i,o.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)},o.deepNestedPropertyVal=function(t,e,r,i){new n(t,i,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)},o.notDeepNestedPropertyVal=function(t,e,r,i){new n(t,i,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)},o.lengthOf=function(t,e,r){new n(t,r,o.lengthOf,!0).to.have.lengthOf(e)},o.hasAnyKeys=function(t,e,r){new n(t,r,o.hasAnyKeys,!0).to.have.any.keys(e)},o.hasAllKeys=function(t,e,r){new n(t,r,o.hasAllKeys,!0).to.have.all.keys(e)},o.containsAllKeys=function(t,e,r){new n(t,r,o.containsAllKeys,!0).to.contain.all.keys(e)},o.doesNotHaveAnyKeys=function(t,e,r){new n(t,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)},o.doesNotHaveAllKeys=function(t,e,r){new n(t,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)},o.hasAnyDeepKeys=function(t,e,r){new n(t,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)},o.hasAllDeepKeys=function(t,e,r){new n(t,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(e)},o.containsAllDeepKeys=function(t,e,r){new n(t,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)},o.doesNotHaveAnyDeepKeys=function(t,e,r){new n(t,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)},o.doesNotHaveAllDeepKeys=function(t,e,r){new n(t,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)},o.throws=function(t,e,i,s){("string"==typeof e||e instanceof RegExp)&&(i=e,e=null);var a=new n(t,s,o.throws,!0).to.throw(e,i);return r(a,"object")},o.doesNotThrow=function(t,e,r,i){("string"==typeof e||e instanceof RegExp)&&(r=e,e=null),new n(t,i,o.doesNotThrow,!0).to.not.throw(e,r)},o.operator=function(i,s,a,c){var u;switch(s){case"==":u=i==a;break;case"===":u=i===a;break;case">":u=i>a;break;case">=":u=i>=a;break;case"<":u=i<a;break;case"<=":u=i<=a;break;case"!=":u=i!=a;break;case"!==":u=i!==a;break;default:throw c=c?c+": ":c,new t.AssertionError(c+'Invalid operator "'+s+'"',void 0,o.operator)}var l=new n(u,c,o.operator,!0);l.assert(!0===r(l,"object"),"expected "+e.inspect(i)+" to be "+s+" "+e.inspect(a),"expected "+e.inspect(i)+" to not be "+s+" "+e.inspect(a))},o.closeTo=function(t,e,r,i){new n(t,i,o.closeTo,!0).to.be.closeTo(e,r)},o.approximately=function(t,e,r,i){new n(t,i,o.approximately,!0).to.be.approximately(e,r)},o.sameMembers=function(t,e,r){new n(t,r,o.sameMembers,!0).to.have.same.members(e)},o.notSameMembers=function(t,e,r){new n(t,r,o.notSameMembers,!0).to.not.have.same.members(e)},o.sameDeepMembers=function(t,e,r){new n(t,r,o.sameDeepMembers,!0).to.have.same.deep.members(e)},o.notSameDeepMembers=function(t,e,r){new n(t,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(e)},o.sameOrderedMembers=function(t,e,r){new n(t,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(e)},o.notSameOrderedMembers=function(t,e,r){new n(t,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)},o.sameDeepOrderedMembers=function(t,e,r){new n(t,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)},o.notSameDeepOrderedMembers=function(t,e,r){new n(t,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)},o.includeMembers=function(t,e,r){new n(t,r,o.includeMembers,!0).to.include.members(e)},o.notIncludeMembers=function(t,e,r){new n(t,r,o.notIncludeMembers,!0).to.not.include.members(e)},o.includeDeepMembers=function(t,e,r){new n(t,r,o.includeDeepMembers,!0).to.include.deep.members(e)},o.notIncludeDeepMembers=function(t,e,r){new n(t,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(e)},o.includeOrderedMembers=function(t,e,r){new n(t,r,o.includeOrderedMembers,!0).to.include.ordered.members(e)},o.notIncludeOrderedMembers=function(t,e,r){new n(t,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)},o.includeDeepOrderedMembers=function(t,e,r){new n(t,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)},o.notIncludeDeepOrderedMembers=function(t,e,r){new n(t,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)},o.oneOf=function(t,e,r){new n(t,r,o.oneOf,!0).to.be.oneOf(e)},o.changes=function(t,e,r,i){3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.changes,!0).to.change(e,r)},o.changesBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var a=i;i=r,s=a}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.changesBy,!0).to.change(e,r).by(i)},o.doesNotChange=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.doesNotChange,!0).to.not.change(e,r)},o.changesButNotBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var a=i;i=r,s=a}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.changesButNotBy,!0).to.change(e,r).but.not.by(i)},o.increases=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.increases,!0).to.increase(e,r)},o.increasesBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var a=i;i=r,s=a}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.increasesBy,!0).to.increase(e,r).by(i)},o.doesNotIncrease=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.doesNotIncrease,!0).to.not.increase(e,r)},o.increasesButNotBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var a=i;i=r,s=a}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.increasesButNotBy,!0).to.increase(e,r).but.not.by(i)},o.decreases=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.decreases,!0).to.decrease(e,r)},o.decreasesBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var a=i;i=r,s=a}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.decreasesBy,!0).to.decrease(e,r).by(i)},o.doesNotDecrease=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.doesNotDecrease,!0).to.not.decrease(e,r)},o.doesNotDecreaseBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var a=i;i=r,s=a}else 3===arguments.length&&(i=r,r=null);return new n(t,s,o.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(i)},o.decreasesButNotBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var a=i;i=r,s=a}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(i)},o.ifError=function(t){if(t)throw t},o.isExtensible=function(t,e){new n(t,e,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(t,e){new n(t,e,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(t,e){new n(t,e,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(t,e){new n(t,e,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(t,e){new n(t,e,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(t,e){new n(t,e,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(t,e){new n(t,e,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(t,e){new n(t,e,o.isNotEmpty,!0).to.not.be.empty},function t(e,n){return o[n]=o[e],t}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},7983:t=>{t.exports=function(t,e){t.expect=function(e,n){return new t.Assertion(e,n)},t.expect.fail=function(e,n,r,o){throw arguments.length<2&&(r=e,e=void 0),r=r||"expect.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:o},t.expect.fail)}}},8324:t=>{t.exports=function(t,e){var n=t.Assertion;function r(){Object.defineProperty(Object.prototype,"should",{set:function(t){Object.defineProperty(this,"should",{value:t,enumerable:!0,configurable:!0,writable:!0})},get:function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol||"function"==typeof BigInt&&this instanceof BigInt?new n(this.valueOf(),null,t):new n(this,null,t)},configurable:!0});var e={fail:function(n,r,o,i){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new t.AssertionError(o,{actual:n,expected:r,operator:i},e.fail)},equal:function(t,e,r){new n(t,r).to.equal(e)},Throw:function(t,e,r,o){new n(t,o).to.Throw(e,r)},exist:function(t,e){new n(t,e).to.exist},not:{}};return e.not.equal=function(t,e,r){new n(t,r).to.not.equal(e)},e.not.Throw=function(t,e,r,o){new n(t,o).to.not.Throw(e,r)},e.not.exist=function(t,e){new n(t,e).to.not.exist},e.throw=e.Throw,e.not.throw=e.not.Throw,e}t.should=r,t.Should=r}},9056:(t,e,n)=>{var r=n(2422),o=n(5422),i=n(4390),s=n(5893),a=n(626),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(t){var e=Object.getOwnPropertyDescriptor(u,t);return"object"!=typeof e||!e.configurable})),h=Function.prototype.call,f=Function.prototype.apply;t.exports=function(t,e,n,u){"function"!=typeof u&&(u=function(){});var d={method:n,chainingBehavior:u};t.__methods||(t.__methods={}),t.__methods[e]=d,Object.defineProperty(t,e,{get:function(){d.chainingBehavior.call(this);var n=function(){i(this,"lockSsfi")||i(this,"ssfi",n);var t=d.method.apply(this,arguments);if(void 0!==t)return t;var e=new o.Assertion;return a(this,e),e};if(r(n,e,!0),c){var u=Object.create(this);u.call=h,u.apply=f,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(t).forEach((function(e){if(-1===l.indexOf(e)){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r)}}));return a(this,n),s(n)},configurable:!0})}},2422:t=>{var e=Object.getOwnPropertyDescriptor((function(){}),"length");t.exports=function(t,n,r){return e.configurable?(Object.defineProperty(t,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+n+'.length. Due to a compatibility issue, "length" cannot directly follow "'+n+'". Use "'+n+'.lengthOf" instead.');throw Error("Invalid Chai property: "+n+'.length. See docs for proper usage of "'+n+'".')}}),t):t}},6603:(t,e,n)=>{var r=n(2422),o=n(5422),i=n(4390),s=n(5893),a=n(626);t.exports=function(t,e,n){var c=function(){i(this,"lockSsfi")||i(this,"ssfi",c);var t=n.apply(this,arguments);if(void 0!==t)return t;var e=new o.Assertion;return a(this,e),e};r(c,e,!1),t[e]=s(c,e)}},2102:(t,e,n)=>{var r=n(5422),o=n(4390),i=n(7956),s=n(626);t.exports=function(t,e,n){n=void 0===n?function(){}:n,Object.defineProperty(t,e,{get:function t(){i()||o(this,"lockSsfi")||o(this,"ssfi",t);var e=n.call(this);if(void 0!==e)return e;var a=new r.Assertion;return s(this,a),a},configurable:!0})}},9934:(t,e,n)=>{var r=n(4849);t.exports=function(t,e){return r(t)<r(e)?-1:1}},8026:(t,e,n)=>{var r=n(8068),o=n(4390),i=n(9174);t.exports=function(t,e){var n=o(t,"message"),s=o(t,"ssfi");n=n?n+": ":"",t=o(t,"object"),(e=e.map((function(t){return t.toLowerCase()}))).sort();var a=e.map((function(t,n){var r=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an":"a";return(e.length>1&&n===e.length-1?"or ":"")+r+" "+t})).join(", "),c=i(t).toLowerCase();if(!e.some((function(t){return c===t})))throw new r(n+"object tested must be "+a+", but "+c+" given",void 0,s)}},4390:t=>{t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));if(3!==arguments.length)return r[e];r[e]=n}},4877:t=>{t.exports=function(t,e){return e.length>4?e[4]:t._obj}},40:t=>{t.exports=function(t){var e=[];for(var n in t)e.push(n);return e}},3993:(t,e,n)=>{var r=n(4390),o=n(4877),i=n(7140);t.exports=function(t,e){var n=r(t,"negate"),s=r(t,"object"),a=e[3],c=o(t,e),u=n?e[2]:e[1],l=r(t,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return i(s)})).replace(/#\{act\}/g,(function(){return i(c)})).replace(/#\{exp\}/g,(function(){return i(a)})),l?l+": "+u:u}},6484:(t,e,n)=>{var r=n(9174),o=n(4390);t.exports=function(t,e){var n=o(t,"operator"),i=o(t,"negate"),s=e[3],a=i?e[2]:e[1];if(n)return n;if("function"==typeof a&&(a=a()),(a=a||"")&&!/\shave\s/.test(a)){var c=function(t){var e=r(t);return-1!==["Array","Object","function"].indexOf(e)}(s);return/\snot\s/.test(a)?c?"notDeepStrictEqual":"notStrictEqual":c?"deepStrictEqual":"strictEqual"}}},7302:(t,e,n)=>{var r=n(1071);t.exports=function(t){return Object.keys(t).concat(r(t))}},1071:t=>{t.exports=function(t){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}},7896:t=>{t.exports=function(t){var e=Object.getOwnPropertyNames(t);function n(t){-1===e.indexOf(t)&&e.push(t)}for(var r=Object.getPrototypeOf(t);null!==r;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return e}},9455:(t,e,n)=>{var r=n(1549);e.test=n(5039),e.type=n(9174),e.expectTypes=n(8026),e.getMessage=n(3993),e.getActual=n(4877),e.inspect=n(4849),e.objDisplay=n(7140),e.flag=n(4390),e.transferFlags=n(626),e.eql=n(4487),e.getPathInfo=r.getPathInfo,e.hasProperty=r.hasProperty,e.getName=n(1257),e.addProperty=n(2102),e.addMethod=n(6603),e.overwriteProperty=n(9761),e.overwriteMethod=n(5235),e.addChainableMethod=n(9056),e.overwriteChainableMethod=n(794),e.compareByInspect=n(9934),e.getOwnEnumerablePropertySymbols=n(1071),e.getOwnEnumerableProperties=n(7302),e.checkError=n(1724),e.proxify=n(5893),e.addLengthGuard=n(2422),e.isProxyEnabled=n(7956),e.isNaN=n(4706),e.getOperator=n(6484)},4849:(t,e,n)=>{var r=n(1257),o=n(7896),i=n(40),s=n(9898);t.exports=function(t,e,n,r){return c({showHidden:e,seen:[],stylize:function(t){return t}},t,void 0===n?2:n)};var a=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&"nodeType"in t&&1===t.nodeType&&"string"==typeof t.nodeName};function c(t,n,y){if(n&&"function"==typeof n.inspect&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var g=n.inspect(y,t);return"string"!=typeof g&&(g=c(t,g,y)),g}var m=function(t,e){switch(typeof e){case"undefined":return t.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string");case"number":return 0===e&&1/e==-1/0?t.stylize("-0","number"):t.stylize(""+e,"number");case"boolean":return t.stylize(""+e,"boolean");case"symbol":return t.stylize(e.toString(),"symbol")}if(null===e)return t.stylize("null","null")}(t,n);if(m)return m;if(a(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(n);var v=document.createElementNS("http://www.w3.org/1999/xhtml","_");v.appendChild(n.cloneNode(!1));var w=v.innerHTML.replace("><",">"+n.innerHTML+"<");return v.innerHTML="",w}catch(t){}}var b,x,E=i(n),A=t.showHidden?o(n):E;if(0===A.length||d(n)&&(1===A.length&&"stack"===A[0]||2===A.length&&"description"===A[0]&&"stack"===A[1])){if("function"==typeof n)return x=(b=r(n))?": "+b:"",t.stylize("[Function"+x+"]","special");if(h(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(f(n))return t.stylize(Date.prototype.toUTCString.call(n),"date");if(d(n))return u(n)}var k,S,P="",C=!1,M=!1,N=["{","}"];if("object"==typeof(k=n)&&/\w+Array]$/.test(p(k))&&(M=!0,N=["[","]"]),function(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===p(t)}(n)&&(C=!0,N=["[","]"]),"function"==typeof n&&(P=" [Function"+(x=(b=r(n))?": "+b:"")+"]"),h(n)&&(P=" "+RegExp.prototype.toString.call(n)),f(n)&&(P=" "+Date.prototype.toUTCString.call(n)),d(n))return u(n);if(0===A.length&&(!C||0==n.length))return N[0]+P+N[1];if(y<0)return h(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");if(t.seen.push(n),C)S=function(t,e,n,r,o){for(var i=[],s=0,a=e.length;s<a;++s)Object.prototype.hasOwnProperty.call(e,String(s))?i.push(l(t,e,n,r,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(l(t,e,n,r,o,!0))})),i}(t,n,y,E,A);else{if(M)return function(t){for(var e="[ ",n=0;n<t.length;++n){if(e.length>=s.truncateThreshold-7){e+="...";break}e+=t[n]+", "}return-1!==(e+=" ]").indexOf(",  ]")&&(e=e.replace(",  ]"," ]")),e}(n);S=A.map((function(e){return l(t,n,y,E,e,C)}))}return t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return t+e.length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(S,P,N)}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,o,i){var s,a,u=Object.getOwnPropertyDescriptor(e,o);if(u&&(u.get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special"))),r.indexOf(o)<0&&(s="["+o+"]"),a||(t.seen.indexOf(e[o])<0?(a=c(t,e[o],null===n?null:n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),void 0===s){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function h(t){return"object"==typeof t&&"[object RegExp]"===p(t)}function f(t){return"object"==typeof t&&"[object Date]"===p(t)}function d(t){return"object"==typeof t&&"[object Error]"===p(t)}function p(t){return Object.prototype.toString.call(t)}},4706:t=>{t.exports=Number.isNaN||function(t){return t!=t}},7956:(t,e,n)=>{var r=n(9898);t.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},7140:(t,e,n)=>{var r=n(4849),o=n(9898);t.exports=function(t){var e=r(t),n=Object.prototype.toString.call(t);if(o.truncateThreshold&&e.length>=o.truncateThreshold){if("[object Function]"===n)return t.name&&""!==t.name?"[Function: "+t.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+t.length+") ]";if("[object Object]"===n){var i=Object.keys(t);return"{ Object ("+(i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", "))+") }"}return e}return e}},794:(t,e,n)=>{var r=n(5422),o=n(626);t.exports=function(t,e,n,i){var s=t.__methods[e],a=s.chainingBehavior;s.chainingBehavior=function(){var t=i(a).call(this);if(void 0!==t)return t;var e=new r.Assertion;return o(this,e),e};var c=s.method;s.method=function(){var t=n(c).apply(this,arguments);if(void 0!==t)return t;var e=new r.Assertion;return o(this,e),e}}},5235:(t,e,n)=>{var r=n(2422),o=n(5422),i=n(4390),s=n(5893),a=n(626);t.exports=function(t,e,n){var c=t[e],u=function(){throw new Error(e+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){i(this,"lockSsfi")||i(this,"ssfi",l);var t=i(this,"lockSsfi");i(this,"lockSsfi",!0);var e=n(u).apply(this,arguments);if(i(this,"lockSsfi",t),void 0!==e)return e;var r=new o.Assertion;return a(this,r),r};r(l,e,!1),t[e]=s(l,e)}},9761:(t,e,n)=>{var r=n(5422),o=n(4390),i=n(7956),s=n(626);t.exports=function(t,e,n){var a=Object.getOwnPropertyDescriptor(t,e),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(t,e,{get:function t(){i()||o(this,"lockSsfi")||o(this,"ssfi",t);var e=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=n(c).call(this);if(o(this,"lockSsfi",e),void 0!==a)return a;var u=new r.Assertion;return s(this,u),u},configurable:!0})}},5893:(t,e,n)=>{var r=n(9898),o=n(4390),i=n(7896),s=n(7956),a=["__flags","__methods","_obj","assert"];t.exports=function(t,e){return s()?new Proxy(t,{get:function t(n,s){if("string"==typeof s&&-1===r.proxyExcludedKeys.indexOf(s)&&!Reflect.has(n,s)){if(e)throw Error("Invalid Chai property: "+e+"."+s+'. See docs for proper usage of "'+e+'".');var c=null,u=4;throw i(n).forEach((function(t){if(!Object.prototype.hasOwnProperty(t)&&-1===a.indexOf(t)){var e=function(t,e,n){if(Math.abs(t.length-e.length)>=n)return n;for(var r=[],o=0;o<=t.length;o++)r[o]=Array(e.length+1).fill(0),r[o][0]=o;for(var i=0;i<e.length;i++)r[0][i]=i;for(o=1;o<=t.length;o++){var s=t.charCodeAt(o-1);for(i=1;i<=e.length;i++)Math.abs(o-i)>=n?r[o][i]=n:r[o][i]=Math.min(r[o-1][i]+1,r[o][i-1]+1,r[o-1][i-1]+(s===e.charCodeAt(i-1)?0:1))}return r[t.length][e.length]}(s,t,u);e<u&&(c=t,u=e)}})),null!==c?Error("Invalid Chai property: "+s+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+s)}return-1!==a.indexOf(s)||o(n,"lockSsfi")||o(n,"ssfi",t),Reflect.get(n,s)}}):t}},5039:(t,e,n)=>{var r=n(4390);t.exports=function(t,e){var n=r(t,"negate"),o=e[0];return n?!o:o}},626:t=>{t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));for(var o in e.__flags||(e.__flags=Object.create(null)),n=3!==arguments.length||n,r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(e.__flags[o]=r[o])}},1724:t=>{"use strict";var e=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function n(t){var n="";if(void 0===t.name){var r=String(t).match(e);r&&(n=r[1])}else n=t.name;return n}t.exports={compatibleInstance:function(t,e){return e instanceof Error&&t===e},compatibleConstructor:function(t,e){return e instanceof Error?t.constructor===e.constructor||t instanceof e.constructor:(e.prototype instanceof Error||e===Error)&&(t.constructor===e||t instanceof e)},compatibleMessage:function(t,e){var n="string"==typeof t?t:t.message;return e instanceof RegExp?e.test(n):"string"==typeof e&&-1!==n.indexOf(e)},getMessage:function(t){var e="";return t&&t.message?e=t.message:"string"==typeof t&&(e=t),e},getConstructorName:function(t){var e=t;return t instanceof Error?e=n(t.constructor):"function"==typeof t&&(e=n(t).trim()||n(new t)),e}}},0:t=>{"use strict";var e="%[a-f0-9]{2}",n=new RegExp("("+e+")|([^%]+?)","gi"),r=new RegExp("("+e+")+","gi");function o(t,e){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],o(n),o(r))}function i(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(n)||[],r=1;r<e.length;r++)e=(t=o(e,r).join("")).match(n)||[];return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"","%FF%FE":""},n=r.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var o=i(n[0]);o!==n[0]&&(e[n[0]]=o)}n=r.exec(t)}e["%C2"]="";for(var s=Object.keys(e),a=0;a<s.length;a++){var c=s[a];t=t.replace(new RegExp(c,"g"),e[c])}return t}(t)}}},4487:(t,e,n)=>{"use strict";var r=n(9174);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(t){return t[this._key]},set:function(t,e){Object.isExtensible(t)&&Object.defineProperty(t,this._key,{value:e,configurable:!0})}};var i="function"==typeof WeakMap?WeakMap:o;function s(t,e,n){if(!n||y(t)||y(e))return null;var r=n.get(t);if(r){var o=r.get(e);if("boolean"==typeof o)return o}return null}function a(t,e,n,r){if(n&&!y(t)&&!y(e)){var o=n.get(t);o?o.set(e,r):((o=new i).set(e,r),n.set(t,o))}}function c(t,e,n){if(n&&n.comparator)return l(t,e,n);var r=u(t,e);return null!==r?r:l(t,e,n)}function u(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e||!y(t)&&!y(e)&&null}function l(t,e,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new i);var o=n&&n.comparator,l=s(t,e,n.memoize);if(null!==l)return l;var y=s(e,t,n.memoize);if(null!==y)return y;if(o){var g=o(t,e);if(!1===g||!0===g)return a(t,e,n.memoize,g),g;var m=u(t,e);if(null!==m)return m}var v=r(t);if(v!==r(e))return a(t,e,n.memoize,!1),!1;a(t,e,n.memoize,!0);var w=function(t,e,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return t===e;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return h(t,e,r);case"RegExp":return function(t,e){return t.toString()===e.toString()}(t,e);case"Generator":return function(t,e,n){return h(d(t),d(e),n)}(t,e,r);case"DataView":return h(new Uint8Array(t.buffer),new Uint8Array(e.buffer),r);case"ArrayBuffer":return h(new Uint8Array(t),new Uint8Array(e),r);case"Set":case"Map":return function(t,e,n){if(t.size!==e.size)return!1;if(0===t.size)return!0;var r=[],o=[];return t.forEach((function(t,e){r.push([t,e])})),e.forEach((function(t,e){o.push([t,e])})),h(r.sort(),o.sort(),n)}(t,e,r);default:return function(t,e,n){var r=p(t),o=p(e);if(r.length&&r.length===o.length)return r.sort(),o.sort(),!1!==h(r,o)&&function(t,e,n,r){var o=n.length;if(0===o)return!0;for(var i=0;i<o;i+=1)if(!1===c(t[n[i]],e[n[i]],r))return!1;return!0}(t,e,r,n);var i=f(t),s=f(e);return i.length&&i.length===s.length?(i.sort(),s.sort(),h(i,s,n)):0===r.length&&0===i.length&&0===o.length&&0===s.length}(t,e,r)}}(t,e,v,n);return a(t,e,n.memoize,w),w}function h(t,e,n){var r=t.length;if(r!==e.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(!1===c(t[o],e[o],n))return!1;return!0}function f(t){if(function(t){return"undefined"!=typeof Symbol&&"object"==typeof t&&void 0!==Symbol.iterator&&"function"==typeof t[Symbol.iterator]}(t))try{return d(t[Symbol.iterator]())}catch(t){return[]}return[]}function d(t){for(var e=t.next(),n=[e.value];!1===e.done;)e=t.next(),n.push(e.value);return n}function p(t){var e=[];for(var n in t)e.push(n);return e}function y(t){return null===t||"object"!=typeof t}t.exports=c,t.exports.MemoizeMap=i},2596:t=>{"use strict";var e={single_source_shortest_paths:function(t,n,r){var o={},i={};i[n]=0;var s,a,c,u,l,h,f,d=e.PriorityQueue.make();for(d.push(n,0);!d.empty();)for(c in a=(s=d.pop()).value,u=s.cost,l=t[a]||{})l.hasOwnProperty(c)&&(h=u+l[c],f=i[c],(void 0===i[c]||f>h)&&(i[c]=h,d.push(c,h),o[c]=a));if(void 0!==r&&void 0===i[r]){var p=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(p)}return o},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e;r;)n.push(r),t[r],r=t[r];return n.reverse(),n},find_path:function(t,n,r){var o=e.single_source_shortest_paths(t,n,r);return e.extract_shortest_path_from_predecessor_list(o,r)},PriorityQueue:{make:function(t){var n,r=e.PriorityQueue,o={};for(n in t=t||{},r)r.hasOwnProperty(n)&&(o[n]=r[n]);return o.queue=[],o.sorter=t.sorter||r.default_sorter,o},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=e},9194:t=>{"use strict";t.exports=function(t){for(var e=[],n=t.length,r=0;r<n;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319&&n>r+1){var i=t.charCodeAt(r+1);i>=56320&&i<=57343&&(o=1024*(o-55296)+i-56320+65536,r+=1)}o<128?e.push(o):o<2048?(e.push(o>>6|192),e.push(63&o|128)):o<55296||o>=57344&&o<65536?(e.push(o>>12|224),e.push(o>>6&63|128),e.push(63&o|128)):o>=65536&&o<=1114111?(e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(63&o|128)):e.push(239,191,189)}return new Uint8Array(e).buffer}},903:t=>{!function(e){t.exports=e;var n="listeners",r={on:function(t,e){return s(this,t).push(e),this},once:function(t,e){var n=this;return r.originalListener=e,s(n,t).push(r),n;function r(){i.call(n,t,r),e.apply(this,arguments)}},off:i,emit:function(t,e){var n=this,r=s(n,t,!0);if(!r)return!1;var o=arguments.length;if(1===o)r.forEach((function(t){t.call(n)}));else if(2===o)r.forEach((function(t){t.call(n,e)}));else{var i=Array.prototype.slice.call(arguments,1);r.forEach((function(t){t.apply(n,i)}))}return!!r.length}};function o(t){for(var e in r)t[e]=r[e];return t}function i(t,e){var r,o=this;if(arguments.length){if(e){if(r=s(o,t,!0)){if(!(r=r.filter((function(t){return t!==e&&t.originalListener!==e}))).length)return i.call(o,t);o[n][t]=r}}else if((r=o[n])&&(delete r[t],!Object.keys(r).length))return i.call(o)}else delete o[n];return o}function s(t,e,r){if(!r||t[n]){var o=t[n]||(t[n]={});return o[e]||(o[e]=[])}}o(e.prototype),e.mixin=o}((function t(){if(!(this instanceof t))return new t}))},550:t=>{"use strict";t.exports=function(t,e){for(var n={},r=Object.keys(t),o=Array.isArray(e),i=0;i<r.length;i++){var s=r[i],a=t[s];(o?-1!==e.indexOf(s):e(s,a,t))&&(n[s]=a)}return n}},1257:t=>{"use strict";var e=Function.prototype.toString,n=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;t.exports=function(t){if("function"!=typeof t)return null;var r="";if(void 0===Function.prototype.name&&void 0===t.name){var o=e.call(t).match(n);o&&(r=o[1])}else r=t.name;return r}},8345:(t,e)=>{e.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?o-1:0,f=n?-1:1,d=t[e+h];for(h+=f,i=d&(1<<-l)-1,d>>=-l,l+=a;l>0;i=256*i+t[e+h],h+=f,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),i-=u}return(d?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,h=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*c-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[n+d]=255&a,d+=p,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;t[n+d]=255&s,d+=p,s/=256,u-=8);t[n+d-p]|=128*y}},436:function(t,e){!function(t){var e,n="undefined",r=n!==typeof Buffer&&Buffer,o=n!==typeof Uint8Array&&Uint8Array,i=n!==typeof ArrayBuffer&&ArrayBuffer,s=[0,0,0,0,0,0,0,0],a=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},c=4294967296;function u(a,u,b){var x=u?0:4,E=u?4:0,A=u?0:3,k=u?1:2,S=u?2:1,P=u?3:0,C=u?g:v,M=u?m:w,N=j.prototype,O="is"+a,I="_"+O;return N.buffer=void 0,N.offset=0,N[I]=!0,N.toNumber=T,N.toString=function(t){var e=this.buffer,n=this.offset,r=B(e,n+x),o=B(e,n+E),i="",s=!b&&2147483648&r;for(s&&(r=~r,o=c-o),t=t||10;;){var a=r%t*c+o;if(r=Math.floor(r/t),o=Math.floor(a/t),i=(a%t).toString(t)+i,!r&&!o)break}return s&&(i="-"+i),i},N.toJSON=T,N.toArray=l,r&&(N.toBuffer=h),o&&(N.toArrayBuffer=f),j[O]=function(t){return!(!t||!t[I])},t[a]=j,j;function j(t,r,a,u){return this instanceof j?function(t,r,a,u,l){o&&i&&(r instanceof i&&(r=new o(r)),u instanceof i&&(u=new o(u))),r||a||u||e?(d(r,a)||(l=a,u=r,a=0,r=new(e||Array)(8)),t.buffer=r,t.offset=a|=0,n!==typeof u&&("string"==typeof u?function(t,e,n,r){var o=0,i=n.length,s=0,a=0;"-"===n[0]&&o++;for(var u=o;o<i;){var l=parseInt(n[o++],r);if(!(l>=0))break;a=a*r+l,s=s*r+Math.floor(a/c),a%=c}u&&(s=~s,a?a=c-a:s++),_(t,e+x,s),_(t,e+E,a)}(r,a,u,l||10):d(u,l)?p(r,a,u,l):"number"==typeof l?(_(r,a+x,u),_(r,a+E,l)):u>0?C(r,a,u):u<0?M(r,a,u):p(r,a,s,0))):t.buffer=y(s,0)}(this,t,r,a,u):new j(t,r,a,u)}function T(){var t=this.buffer,e=this.offset,n=B(t,e+x),r=B(t,e+E);return b||(n|=0),n?n*c+r:r}function _(t,e,n){t[e+P]=255&n,n>>=8,t[e+S]=255&n,n>>=8,t[e+k]=255&n,n>>=8,t[e+A]=255&n}function B(t,e){return 16777216*t[e+A]+(t[e+k]<<16)+(t[e+S]<<8)+t[e+P]}}function l(t){var n=this.buffer,r=this.offset;return e=null,!1!==t&&0===r&&8===n.length&&a(n)?n:y(n,r)}function h(t){var n=this.buffer,o=this.offset;if(e=r,!1!==t&&0===o&&8===n.length&&Buffer.isBuffer(n))return n;var i=new r(8);return p(i,0,n,o),i}function f(t){var n=this.buffer,r=this.offset,s=n.buffer;if(e=o,!1!==t&&0===r&&s instanceof i&&8===s.byteLength)return s;var a=new o(8);return p(a,0,n,r),a.buffer}function d(t,e){var n=t&&t.length;return e|=0,n&&e+8<=n&&"string"!=typeof t[e]}function p(t,e,n,r){e|=0,r|=0;for(var o=0;o<8;o++)t[e++]=255&n[r++]}function y(t,e){return Array.prototype.slice.call(t,e,e+8)}function g(t,e,n){for(var r=e+8;r>e;)t[--r]=255&n,n/=256}function m(t,e,n){var r=e+8;for(n++;r>e;)t[--r]=255&-n^255,n/=256}function v(t,e,n){for(var r=e+8;e<r;)t[e++]=255&n,n/=256}function w(t,e,n){var r=e+8;for(n++;e<r;)t[e++]=255&-n^255,n/=256}u("Uint64BE",!0,!0),u("Int64BE",!0,!1),u("Uint64LE",!1,!0),u("Int64LE",!1,!1)}("string"!=typeof e.nodeName?e:this||{})},618:(t,e,n)=>{e.encode=n(235).encode,e.decode=n(994).decode,n(3872),n(2530),n(7679),n(9776)},5882:function(t){function e(t){return t&&t.isBuffer&&t}t.exports=e("undefined"!=typeof Buffer&&Buffer)||e(this.Buffer)||e("undefined"!=typeof window&&window.Buffer)||this.Buffer},9811:(t,e)=>{e.copy=function(t,e,n,r){var o;n||(n=0),r||0===r||(r=this.length),e||(e=0);var i=r-n;if(t===this&&n<e&&e<r)for(o=i-1;o>=0;o--)t[o+e]=this[o+n];else for(o=0;o<i;o++)t[o+e]=this[o+n];return i},e.toString=function(t,e,n){var r=this,o=0|e;n||(n=r.length);for(var i="",s=0;o<n;)(s=r[o++])<128?i+=String.fromCharCode(s):(192==(224&s)?s=(31&s)<<6|63&r[o++]:224==(240&s)?s=(15&s)<<12|(63&r[o++])<<6|63&r[o++]:240==(248&s)&&(s=(7&s)<<18|(63&r[o++])<<12|(63&r[o++])<<6|63&r[o++]),s>=65536?(s-=65536,i+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):i+=String.fromCharCode(s));return i},e.write=function(t,e){for(var n=this,r=e||(e|=0),o=t.length,i=0,s=0;s<o;)(i=t.charCodeAt(s++))<128?n[r++]=i:i<2048?(n[r++]=192|i>>>6,n[r++]=128|63&i):i<55296||i>57343?(n[r++]=224|i>>>12,n[r++]=128|i>>>6&63,n[r++]=128|63&i):(i=65536+(i-55296<<10|t.charCodeAt(s++)-56320),n[r++]=240|i>>>18,n[r++]=128|i>>>12&63,n[r++]=128|i>>>6&63,n[r++]=128|63&i);return r-e}},2038:(t,e,n)=>{var r=n(7259),o=t.exports=i(0);function i(t){return new Array(t)}o.alloc=i,o.concat=r.concat,o.from=function(t){if(!r.isBuffer(t)&&r.isView(t))t=r.Uint8Array.from(t);else if(r.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return r.from.call(o,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}},5920:(t,e,n)=>{var r=n(7259),o=r.global,i=t.exports=r.hasBuffer?s(0):[];function s(t){return new o(t)}i.alloc=r.hasBuffer&&o.alloc||s,i.concat=r.concat,i.from=function(t){if(!r.isBuffer(t)&&r.isView(t))t=r.Uint8Array.from(t);else if(r.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return r.from.call(i,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return o.from&&1!==o.from.length?o.from(t):new o(t)}},5095:(t,e,n)=>{var r,o=n(9811);e.copy=u,e.slice=l,e.toString=function(t,e,n){return(!a&&i.isBuffer(this)?this.toString:o.toString).apply(this,arguments)},e.write=(r="write",function(){return(this[r]||o[r]).apply(this,arguments)});var i=n(7259),s=i.global,a=i.hasBuffer&&"TYPED_ARRAY_SUPPORT"in s,c=a&&!s.TYPED_ARRAY_SUPPORT;function u(t,e,n,r){var s=i.isBuffer(this),a=i.isBuffer(t);if(s&&a)return this.copy(t,e,n,r);if(c||s||a||!i.isView(this)||!i.isView(t))return o.copy.call(this,t,e,n,r);var u=n||null!=r?l.call(this,n,r):this;return t.set(u,e),u.length}function l(t,e){var n=this.slice||!c&&this.subarray;if(n)return n.call(this,t,e);var r=i.alloc.call(this,e-t);return u.call(this,r,0,t,e),r}},5757:(t,e,n)=>{var r=n(7259),o=t.exports=r.hasArrayBuffer?i(0):[];function i(t){return new Uint8Array(t)}o.alloc=i,o.concat=r.concat,o.from=function(t){if(r.isView(t)){var e=t.byteOffset,n=t.byteLength;(t=t.buffer).byteLength!==n&&(t.slice?t=t.slice(e,e+n):(t=new Uint8Array(t)).byteLength!==n&&(t=Array.prototype.slice.call(t,e,e+n)))}else{if("string"==typeof t)return r.from.call(o,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}},7259:(t,e,n)=>{var r=e.global=n(5882),o=e.hasBuffer=r&&!!r.isBuffer,i=e.hasArrayBuffer="undefined"!=typeof ArrayBuffer,s=e.isArray=n(5182);e.isArrayBuffer=i?function(t){return t instanceof ArrayBuffer||p(t)}:m;var a=e.isBuffer=o?r.isBuffer:m,c=e.isView=i?ArrayBuffer.isView||v("ArrayBuffer","buffer"):m;e.alloc=d,e.concat=function(t,n){n||(n=0,Array.prototype.forEach.call(t,(function(t){n+=t.length})));var r=this!==e&&this||t[0],o=d.call(r,n),i=0;return Array.prototype.forEach.call(t,(function(t){i+=f.copy.call(t,o,i)})),o},e.from=function(t){return"string"==typeof t?y.call(this,t):g(this).from(t)};var u=e.Array=n(2038),l=e.Buffer=n(5920),h=e.Uint8Array=n(5757),f=e.prototype=n(5095);function d(t){return g(this).alloc(t)}var p=v("ArrayBuffer");function y(t){var e=3*t.length,n=d.call(this,e),r=f.write.call(n,t);return e!==r&&(n=f.slice.call(n,0,r)),n}function g(t){return a(t)?l:c(t)?h:s(t)?u:o?l:i?h:u}function m(){return!1}function v(t,e){return t="[object "+t+"]",function(n){return null!=n&&{}.toString.call(e?n[e]:n)===t}}},3070:(t,e,n)=>{var r=n(5182);e.createCodec=a,e.install=function(t){for(var e in t)i.prototype[e]=s(i.prototype[e],t[e])},e.filter=function(t){return r(t)?function(t){return t=t.slice(),function(n){return t.reduce(e,n)};function e(t,e){return e(t)}}(t):t};var o=n(7259);function i(t){if(!(this instanceof i))return new i(t);this.options=t,this.init()}function s(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function a(t){return new i(t)}i.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=o.Uint8Array),this},e.preset=a({preset:!0})},9776:(t,e,n)=>{n(8942),n(5069),n(3070).preset},7434:(t,e,n)=>{e.T=o;var r=n(8942).preset;function o(t){if(!(this instanceof o))return new o(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}n(2094).k.mixin(o.prototype),o.prototype.codec=r,o.prototype.fetch=function(){return this.codec.decode(this)}},994:(t,e,n)=>{e.decode=function(t,e){var n=new r(e);return n.write(t),n.read()};var r=n(7434).T},2530:(t,e,n)=>{var r=n(903),o=n(7434).T;function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}i.prototype=new o,r.mixin(i.prototype),i.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},i.prototype.push=function(t){this.emit("data",t)},i.prototype.end=function(t){this.decode(t),this.emit("end")}},8090:(t,e,n)=>{e.F=o;var r=n(5069).preset;function o(t){if(!(this instanceof o))return new o(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}n(2094).I.mixin(o.prototype),o.prototype.codec=r,o.prototype.write=function(t){this.codec.encode(this,t)}},235:(t,e,n)=>{e.encode=function(t,e){var n=new r(e);return n.write(t),n.read()};var r=n(8090).F},3872:(t,e,n)=>{var r=n(903),o=n(8090).F;function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}i.prototype=new o,r.mixin(i.prototype),i.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},i.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},1583:(t,e,n)=>{e.S=function t(e,n){if(!(this instanceof t))return new t(e,n);this.buffer=r.from(e),this.type=n};var r=n(7259)},4897:(t,e,n)=>{e.setExtPackers=function(t){t.addExtPacker(14,Error,[h,c]),t.addExtPacker(1,EvalError,[h,c]),t.addExtPacker(2,RangeError,[h,c]),t.addExtPacker(3,ReferenceError,[h,c]),t.addExtPacker(4,SyntaxError,[h,c]),t.addExtPacker(5,TypeError,[h,c]),t.addExtPacker(6,URIError,[h,c]),t.addExtPacker(10,RegExp,[l,c]),t.addExtPacker(11,Boolean,[u,c]),t.addExtPacker(12,String,[u,c]),t.addExtPacker(13,Date,[Number,c]),t.addExtPacker(15,Number,[u,c]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,s),t.addExtPacker(18,Uint8Array,s),t.addExtPacker(19,Int16Array,s),t.addExtPacker(20,Uint16Array,s),t.addExtPacker(21,Int32Array,s),t.addExtPacker(22,Uint32Array,s),t.addExtPacker(23,Float32Array,s),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,s),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,s),t.addExtPacker(26,ArrayBuffer,s),t.addExtPacker(29,DataView,s)),o.hasBuffer&&t.addExtPacker(27,i,o.from)};var r,o=n(7259),i=o.global,s=o.Uint8Array.from,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function c(t){return r||(r=n(235).encode),r(t)}function u(t){return t.valueOf()}function l(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function h(t){var e={};for(var n in a)e[n]=t[n];return e}},6801:(t,e,n)=>{e.setExtUnpackers=function(t){t.addExtUnpacker(14,[a,u(Error)]),t.addExtUnpacker(1,[a,u(EvalError)]),t.addExtUnpacker(2,[a,u(RangeError)]),t.addExtUnpacker(3,[a,u(ReferenceError)]),t.addExtUnpacker(4,[a,u(SyntaxError)]),t.addExtUnpacker(5,[a,u(TypeError)]),t.addExtUnpacker(6,[a,u(URIError)]),t.addExtUnpacker(10,[a,c]),t.addExtUnpacker(11,[a,l(Boolean)]),t.addExtUnpacker(12,[a,l(String)]),t.addExtUnpacker(13,[a,l(Date)]),t.addExtUnpacker(15,[a,l(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,l(Int8Array)),t.addExtUnpacker(18,l(Uint8Array)),t.addExtUnpacker(19,[h,l(Int16Array)]),t.addExtUnpacker(20,[h,l(Uint16Array)]),t.addExtUnpacker(21,[h,l(Int32Array)]),t.addExtUnpacker(22,[h,l(Uint32Array)]),t.addExtUnpacker(23,[h,l(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[h,l(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,l(Uint8ClampedArray)),t.addExtUnpacker(26,h),t.addExtUnpacker(29,[h,l(DataView)])),o.hasBuffer&&t.addExtUnpacker(27,l(i))};var r,o=n(7259),i=o.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(t){return r||(r=n(994).decode),r(t)}function c(t){return RegExp.apply(null,t)}function u(t){return function(e){var n=new t;for(var r in s)n[r]=e[r];return n}}function l(t){return function(e){return new t(e)}}function h(t){return new Uint8Array(t).buffer}},7679:(t,e,n)=>{n(8942),n(5069),n(3070).createCodec},2094:(t,e,n)=>{e.k=i,e.I=s;var r=n(7259),o="BUFFER_SHORTAGE";function i(){if(!(this instanceof i))return new i}function s(){if(!(this instanceof s))return new s}function a(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function c(t){(this.buffers||(this.buffers=[])).push(t)}function u(t){return function(e){for(var n in t)e[n]=t[n];return e}}i.mixin=u({bufferish:r,write:function(t){var e=this.offset?r.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:function(){throw new Error("method not implemented: fetch()")},flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=o)throw t;this.offset=e;break}this.push(t)}},push:c,pull:function(){return(this.buffers||(this.buffers=[])).shift()},read:a,reserve:function(t){var e=this.offset,n=e+t;if(n>this.buffer.length)throw new Error(o);return this.offset=n,e},offset:0}),i.mixin(i.prototype),s.mixin=u({bufferish:r,write:function(){throw new Error("method not implemented: write()")},fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return r.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:c,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:a,reserve:function(t){var e=0|t;if(this.buffer){var n=this.buffer.length,r=0|this.offset,o=r+e;if(o<n)return this.offset=o,r;this.flush(),t=Math.max(t,Math.min(2*n,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var n=this.reserve(e);r.prototype.copy.call(t,this.buffer,n)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),s.mixin(s.prototype)},8942:(t,e,n)=>{var r=n(1583).S,o=n(6801),i=n(8694).readUint8,s=n(2324),a=n(3070);function c(){var t=this.options;return this.decode=function(t){var e=s.getReadToken(t);return function(t){var n=i(t),r=e[n];if(!r)throw new Error("Invalid type: "+(n?"0x"+n.toString(16):n));return r(t)}}(t),t&&t.preset&&o.setExtUnpackers(this),this}a.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=a.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new r(e,t)}},init:c}),e.preset=c.call(a.preset)},8694:(t,e,n)=>{var r=n(8345),o=n(436),i=o.Uint64BE,s=o.Int64BE;e.getReadFormat=function(t){var e=a.hasArrayBuffer&&t&&t.binarraybuffer,n=t&&t.int64;return{map:u&&t&&t.usemap?f:h,array:d,str:p,bin:e?g:y,ext:m,uint8:v,uint16:b,uint32:E,uint64:k(8,n?C:S),int8:w,int16:x,int32:A,int64:k(8,n?M:P),float32:k(4,N),float64:k(8,O)}},e.readUint8=v;var a=n(7259),c=n(5095),u="undefined"!=typeof Map,l=!0;function h(t,e){var n,r={},o=new Array(e),i=new Array(e),s=t.codec.decode;for(n=0;n<e;n++)o[n]=s(t),i[n]=s(t);for(n=0;n<e;n++)r[o[n]]=i[n];return r}function f(t,e){var n,r=new Map,o=new Array(e),i=new Array(e),s=t.codec.decode;for(n=0;n<e;n++)o[n]=s(t),i[n]=s(t);for(n=0;n<e;n++)r.set(o[n],i[n]);return r}function d(t,e){for(var n=new Array(e),r=t.codec.decode,o=0;o<e;o++)n[o]=r(t);return n}function p(t,e){var n=t.reserve(e),r=n+e;return c.toString.call(t.buffer,"utf-8",n,r)}function y(t,e){var n=t.reserve(e),r=n+e,o=c.slice.call(t.buffer,n,r);return a.from(o)}function g(t,e){var n=t.reserve(e),r=n+e,o=c.slice.call(t.buffer,n,r);return a.Uint8Array.from(o).buffer}function m(t,e){var n=t.reserve(e+1),r=t.buffer[n++],o=n+e,i=t.codec.getExtUnpacker(r);if(!i)throw new Error("Invalid ext type: "+(r?"0x"+r.toString(16):r));return i(c.slice.call(t.buffer,n,o))}function v(t){var e=t.reserve(1);return t.buffer[e]}function w(t){var e=t.reserve(1),n=t.buffer[e];return 128&n?n-256:n}function b(t){var e=t.reserve(2),n=t.buffer;return n[e++]<<8|n[e]}function x(t){var e=t.reserve(2),n=t.buffer,r=n[e++]<<8|n[e];return 32768&r?r-65536:r}function E(t){var e=t.reserve(4),n=t.buffer;return 16777216*n[e++]+(n[e++]<<16)+(n[e++]<<8)+n[e]}function A(t){var e=t.reserve(4),n=t.buffer;return n[e++]<<24|n[e++]<<16|n[e++]<<8|n[e]}function k(t,e){return function(n){var r=n.reserve(t);return e.call(n.buffer,r,l)}}function S(t){return new i(this,t).toNumber()}function P(t){return new s(this,t).toNumber()}function C(t){return new i(this,t)}function M(t){return new s(this,t)}function N(t){return r.read(this,t,!1,23,4)}function O(t){return r.read(this,t,!1,52,8)}},2324:(t,e,n)=>{var r=n(8694);function o(t){var e,n=new Array(256);for(e=0;e<=127;e++)n[e]=i(e);for(e=128;e<=143;e++)n[e]=a(e-128,t.map);for(e=144;e<=159;e++)n[e]=a(e-144,t.array);for(e=160;e<=191;e++)n[e]=a(e-160,t.str);for(n[192]=i(null),n[193]=null,n[194]=i(!1),n[195]=i(!0),n[196]=s(t.uint8,t.bin),n[197]=s(t.uint16,t.bin),n[198]=s(t.uint32,t.bin),n[199]=s(t.uint8,t.ext),n[200]=s(t.uint16,t.ext),n[201]=s(t.uint32,t.ext),n[202]=t.float32,n[203]=t.float64,n[204]=t.uint8,n[205]=t.uint16,n[206]=t.uint32,n[207]=t.uint64,n[208]=t.int8,n[209]=t.int16,n[210]=t.int32,n[211]=t.int64,n[212]=a(1,t.ext),n[213]=a(2,t.ext),n[214]=a(4,t.ext),n[215]=a(8,t.ext),n[216]=a(16,t.ext),n[217]=s(t.uint8,t.str),n[218]=s(t.uint16,t.str),n[219]=s(t.uint32,t.str),n[220]=s(t.uint16,t.array),n[221]=s(t.uint32,t.array),n[222]=s(t.uint16,t.map),n[223]=s(t.uint32,t.map),e=224;e<=255;e++)n[e]=i(e-256);return n}function i(t){return function(){return t}}function s(t,e){return function(n){var r=t(n);return e(n,r)}}function a(t,e){return function(n){return e(n,t)}}e.getReadToken=function(t){var e=r.getReadFormat(t);return t&&t.useraw?function(t){var e,n=o(t).slice();for(n[217]=n[196],n[218]=n[197],n[219]=n[198],e=160;e<=191;e++)n[e]=a(e-160,t.bin);return n}(e):o(e)}},5069:(t,e,n)=>{var r=n(1583).S,o=n(4897),i=n(8848),s=n(3070);function a(){var t=this.options;return this.encode=function(t){var e=i.getWriteType(t);return function(t,n){var r=e[typeof n];if(!r)throw new Error('Unsupported type "'+typeof n+'": '+n);r(t,n)}}(t),t&&t.preset&&o.setExtPackers(this),this}s.install({addExtPacker:function(t,e,n){n=s.filter(n);var o=e.name;function i(e){return n&&(e=n(e)),new r(e,t)}o&&"Object"!==o?(this.extPackers||(this.extPackers={}))[o]=i:(this.extEncoderList||(this.extEncoderList=[])).unshift([e,i])},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),n=t.constructor,r=n&&n.name&&e[n.name];if(r)return r;for(var o=this.extEncoderList||(this.extEncoderList=[]),i=o.length,s=0;s<i;s++){var a=o[s];if(n===a[0])return a[1]}},init:a}),e.preset=a.call(s.preset)},8073:(t,e,n)=>{var r=n(8345),o=n(436),i=o.Uint64BE,s=o.Int64BE,a=n(8397).w,c=n(7259),u=c.global,l=c.hasBuffer&&"TYPED_ARRAY_SUPPORT"in u&&!u.TYPED_ARRAY_SUPPORT,h=c.hasBuffer&&u.prototype||{};function f(){var t=a.slice();return t[196]=d(196),t[197]=p(197),t[198]=y(198),t[199]=d(199),t[200]=p(200),t[201]=y(201),t[202]=g(202,4,h.writeFloatBE||w,!0),t[203]=g(203,8,h.writeDoubleBE||b,!0),t[204]=d(204),t[205]=p(205),t[206]=y(206),t[207]=g(207,8,m),t[208]=d(208),t[209]=p(209),t[210]=y(210),t[211]=g(211,8,v),t[217]=d(217),t[218]=p(218),t[219]=y(219),t[220]=p(220),t[221]=y(221),t[222]=p(222),t[223]=y(223),t}function d(t){return function(e,n){var r=e.reserve(2),o=e.buffer;o[r++]=t,o[r]=n}}function p(t){return function(e,n){var r=e.reserve(3),o=e.buffer;o[r++]=t,o[r++]=n>>>8,o[r]=n}}function y(t){return function(e,n){var r=e.reserve(5),o=e.buffer;o[r++]=t,o[r++]=n>>>24,o[r++]=n>>>16,o[r++]=n>>>8,o[r]=n}}function g(t,e,n,r){return function(o,i){var s=o.reserve(e+1);o.buffer[s++]=t,n.call(o.buffer,i,s,r)}}function m(t,e){new i(this,e,t)}function v(t,e){new s(this,e,t)}function w(t,e){r.write(this,t,e,!1,23,4)}function b(t,e){r.write(this,t,e,!1,52,8)}e.getWriteToken=function(t){return t&&t.uint8array?((e=f())[202]=g(202,4,w),e[203]=g(203,8,b),e):l||c.hasBuffer&&t&&t.safe?function(){var t=a.slice();return t[196]=g(196,1,u.prototype.writeUInt8),t[197]=g(197,2,u.prototype.writeUInt16BE),t[198]=g(198,4,u.prototype.writeUInt32BE),t[199]=g(199,1,u.prototype.writeUInt8),t[200]=g(200,2,u.prototype.writeUInt16BE),t[201]=g(201,4,u.prototype.writeUInt32BE),t[202]=g(202,4,u.prototype.writeFloatBE),t[203]=g(203,8,u.prototype.writeDoubleBE),t[204]=g(204,1,u.prototype.writeUInt8),t[205]=g(205,2,u.prototype.writeUInt16BE),t[206]=g(206,4,u.prototype.writeUInt32BE),t[207]=g(207,8,m),t[208]=g(208,1,u.prototype.writeInt8),t[209]=g(209,2,u.prototype.writeInt16BE),t[210]=g(210,4,u.prototype.writeInt32BE),t[211]=g(211,8,v),t[217]=g(217,1,u.prototype.writeUInt8),t[218]=g(218,2,u.prototype.writeUInt16BE),t[219]=g(219,4,u.prototype.writeUInt32BE),t[220]=g(220,2,u.prototype.writeUInt16BE),t[221]=g(221,4,u.prototype.writeUInt32BE),t[222]=g(222,2,u.prototype.writeUInt16BE),t[223]=g(223,4,u.prototype.writeUInt32BE),t}():f();var e}},8848:(t,e,n)=>{var r=n(5182),o=n(436),i=o.Uint64BE,s=o.Int64BE,a=n(7259),c=n(5095),u=n(8073),l=n(8397).w,h=n(1583).S,f="undefined"!=typeof Uint8Array,d="undefined"!=typeof Map,p=[];p[1]=212,p[2]=213,p[4]=214,p[8]=215,p[16]=216,e.getWriteType=function(t){var e,n=u.getWriteToken(t),o=t&&t.useraw,y=f&&t&&t.binarraybuffer,g=y?a.isArrayBuffer:a.isBuffer,m=y?function(t,e){x(t,new Uint8Array(e))}:x,v=d&&t&&t.usemap?function(t,e){if(!(e instanceof Map))return E(t,e);var r=e.size;n[r<16?128+r:r<=65535?222:223](t,r);var o=t.codec.encode;e.forEach((function(e,n,r){o(t,n),o(t,e)}))}:E;return{boolean:function(t,e){n[e?195:194](t,e)},function:b,number:function(t,e){var r=0|e;e===r?n[-32<=r&&r<=127?255&r:0<=r?r<=255?204:r<=65535?205:206:-128<=r?208:-32768<=r?209:210](t,r):n[203](t,e)},object:o?function(t,e){if(g(e))return function(t,e){var r=e.length;n[r<32?160+r:r<=65535?218:219](t,r),t.send(e)}(t,e);w(t,e)}:w,string:(e=o?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5},function(t,r){var o=r.length,i=5+3*o;t.offset=t.reserve(i);var s=t.buffer,a=e(o),u=t.offset+a;o=c.write.call(s,r,u);var l=e(o);if(a!==l){var h=u+l-a,f=u+o;c.copy.call(s,s,h,u,f)}n[1===l?160+o:l<=3?215+l:219](t,o),t.offset+=o}),symbol:b,undefined:b};function w(t,e){if(null===e)return b(t,e);if(g(e))return m(t,e);if(r(e))return function(t,e){var r=e.length;n[r<16?144+r:r<=65535?220:221](t,r);for(var o=t.codec.encode,i=0;i<r;i++)o(t,e[i])}(t,e);if(i.isUint64BE(e))return function(t,e){n[207](t,e.toArray())}(t,e);if(s.isInt64BE(e))return function(t,e){n[211](t,e.toArray())}(t,e);var o=t.codec.getExtPacker(e);if(o&&(e=o(e)),e instanceof h)return function(t,e){var r=e.buffer,o=r.length,i=p[o]||(o<255?199:o<=65535?200:201);n[i](t,o),l[e.type](t),t.send(r)}(t,e);v(t,e)}function b(t,e){n[192](t,e)}function x(t,e){var r=e.length;n[r<255?196:r<=65535?197:198](t,r),t.send(e)}function E(t,e){var r=Object.keys(e),o=r.length;n[o<16?128+o:o<=65535?222:223](t,o);var i=t.codec.encode;r.forEach((function(n){i(t,n),i(t,e[n])}))}}},8397:(t,e)=>{for(var n=e.w=new Array(256),r=0;r<=255;r++)n[r]=o(r);function o(t){return function(e){var n=e.reserve(1);e.buffer[n]=t}}},1549:t=>{"use strict";function e(t,e){return null!=t&&e in Object(t)}function n(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(t){if("constructor"===t||"__proto__"===t||"prototype"===t)return{};var e=/^\[(\d+)\]$/.exec(t);return e?{i:parseFloat(e[1])}:{p:t.replace(/\\([.[\]])/g,"$1")}}))}function r(t,e,n){var r=t,o=null;n=void 0===n?e.length:n;for(var i=0;i<n;i++){var s=e[i];r&&(r=void 0===s.p?r[s.i]:r[s.p],i===n-1&&(o=r))}return o}function o(t,o){var i=n(o),s=i[i.length-1],a={parent:i.length>1?r(t,i,i.length-1):t,name:s.p||s.i,value:r(t,i)};return a.exists=e(a.parent,a.name),a}t.exports={hasProperty:e,getPathInfo:o,getPathValue:function(t,e){return o(t,e).value},setPathValue:function(t,e,r){return function(t,e,n){for(var r=t,o=n.length,i=null,s=0;s<o;s++){var a=null,c=null;if(i=n[s],s===o-1)r[a=void 0===i.p?i.i:i.p]=e;else if(void 0!==i.p&&r[i.p])r=r[i.p];else if(void 0!==i.i&&r[i.i])r=r[i.i];else{var u=n[s+1];a=void 0===i.p?i.i:i.p,c=void 0===u.p?[]:{},r[a]=c,r=r[a]}}}(t,r,n(e)),t}}},7040:(t,e,n)=>{const r=n(2454),o=n(7297),i=n(7083),s=n(2858);function a(t,e,n,i,s){const a=[].slice.call(arguments,1),c=a.length,u="function"==typeof a[c-1];if(!u&&!r())throw new Error("Callback required as last argument");if(!u){if(c<1)throw new Error("Too few arguments provided");return 1===c?(n=e,e=i=void 0):2!==c||e.getContext||(i=n,n=e,e=void 0),new Promise((function(r,s){try{const s=o.create(n,i);r(t(s,e,i))}catch(t){s(t)}}))}if(c<2)throw new Error("Too few arguments provided");2===c?(s=n,n=e,e=i=void 0):3===c&&(e.getContext&&void 0===s?(s=i,i=void 0):(s=i,i=n,n=e,e=void 0));try{const r=o.create(n,i);s(null,t(r,e,i))}catch(t){s(t)}}o.create,e.rT=a.bind(null,i.render),a.bind(null,i.renderToDataURL),a.bind(null,(function(t,e,n){return s.render(t,n)}))},2454:t=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},2955:(t,e,n)=>{const r=n(4257).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];const e=Math.floor(t/7)+2,n=r(t),o=145===n?26:2*Math.ceil((n-13)/(2*e-2)),i=[n-7];for(let t=1;t<e-1;t++)i[t]=i[t-1]-o;return i.push(6),i.reverse()},e.getPositions=function(t){const n=[],r=e.getRowColCoords(t),o=r.length;for(let t=0;t<o;t++)for(let e=0;e<o;e++)0===t&&0===e||0===t&&e===o-1||t===o-1&&0===e||n.push([r[t],r[e]]);return n}},7042:(t,e,n)=>{const r=n(9279),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(t){this.mode=r.ALPHANUMERIC,this.data=t}i.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*o.indexOf(this.data[e]);n+=o.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(o.indexOf(this.data[e]),6)},t.exports=i},1650:t=>{function e(){this.buffer=[],this.length=0}e.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=e},4914:t=>{function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}e.prototype.set=function(t,e,n,r){const o=t*this.size+e;this.data[o]=n,r&&(this.reservedBit[o]=!0)},e.prototype.get=function(t,e){return this.data[t*this.size+e]},e.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},e.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=e},8086:(t,e,n)=>{const r=n(9194),o=n(9279);function i(t){this.mode=o.BYTE,"string"==typeof t&&(t=r(t)),this.data=new Uint8Array(t)}i.getBitsLength=function(t){return 8*t},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)},t.exports=i},8582:(t,e,n)=>{const r=n(8803),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case r.L:return o[4*(t-1)+0];case r.M:return o[4*(t-1)+1];case r.Q:return o[4*(t-1)+2];case r.H:return o[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return i[4*(t-1)+0];case r.M:return i[4*(t-1)+1];case r.Q:return i[4*(t-1)+2];case r.H:return i[4*(t-1)+3];default:return}}},8803:(t,e)=>{e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return n}}},2351:(t,e,n)=>{const r=n(4257).getSymbolSize;e.getPositions=function(t){const e=r(t);return[[0,0],[e-7,0],[0,e-7]]}},4144:(t,e,n)=>{const r=n(4257),o=r.getBCHDigit(1335);e.getEncodedBits=function(t,e){const n=t.bit<<3|e;let i=n<<10;for(;r.getBCHDigit(i)-o>=0;)i^=1335<<r.getBCHDigit(i)-o;return 21522^(n<<10|i)}},7799:(t,e)=>{const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let t=1;for(let e=0;e<255;e++)n[e]=t,r[t]=e,t<<=1,256&t&&(t^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return r[t]},e.exp=function(t){return n[t]},e.mul=function(t,e){return 0===t||0===e?0:n[r[t]+r[e]]}},1857:(t,e,n)=>{const r=n(9279),o=n(4257);function i(t){this.mode=r.KANJI,this.data=t}i.getBitsLength=function(t){return 13*t},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=o.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13)}},t.exports=i},7182:(t,e)=>{e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(t,n,r){switch(t){case e.Patterns.PATTERN000:return(n+r)%2==0;case e.Patterns.PATTERN001:return n%2==0;case e.Patterns.PATTERN010:return r%3==0;case e.Patterns.PATTERN011:return(n+r)%3==0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case e.Patterns.PATTERN101:return n*r%2+n*r%3==0;case e.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case e.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){const e=t.size;let n=0,r=0,o=0,i=null,s=null;for(let a=0;a<e;a++){r=o=0,i=s=null;for(let c=0;c<e;c++){let e=t.get(a,c);e===i?r++:(r>=5&&(n+=r-5+3),i=e,r=1),e=t.get(c,a),e===s?o++:(o>=5&&(n+=o-5+3),s=e,o=1)}r>=5&&(n+=r-5+3),o>=5&&(n+=o-5+3)}return n},e.getPenaltyN2=function(t){const e=t.size;let n=0;for(let r=0;r<e-1;r++)for(let o=0;o<e-1;o++){const e=t.get(r,o)+t.get(r,o+1)+t.get(r+1,o)+t.get(r+1,o+1);4!==e&&0!==e||n++}return 3*n},e.getPenaltyN3=function(t){const e=t.size;let n=0,r=0,o=0;for(let i=0;i<e;i++){r=o=0;for(let s=0;s<e;s++)r=r<<1&2047|t.get(i,s),s>=10&&(1488===r||93===r)&&n++,o=o<<1&2047|t.get(s,i),s>=10&&(1488===o||93===o)&&n++}return 40*n},e.getPenaltyN4=function(t){let e=0;const n=t.data.length;for(let r=0;r<n;r++)e+=t.data[r];return 10*Math.abs(Math.ceil(100*e/n/5)-10)},e.applyMask=function(t,e){const r=e.size;for(let o=0;o<r;o++)for(let i=0;i<r;i++)e.isReserved(i,o)||e.xor(i,o,n(t,i,o))},e.getBestMask=function(t,n){const r=Object.keys(e.Patterns).length;let o=0,i=1/0;for(let s=0;s<r;s++){n(s),e.applyMask(s,t);const r=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(s,t),r<i&&(i=r,o=s)}return o}},9279:(t,e,n)=>{const r=n(2971),o=n(4499);e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!r.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return o.testNumeric(t)?e.NUMERIC:o.testAlphanumeric(t)?e.ALPHANUMERIC:o.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return n}}},5543:(t,e,n)=>{const r=n(9279);function o(t){this.mode=r.NUMERIC,this.data=t.toString()}o.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);const o=this.data.length-e;o>0&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,3*o+1))},t.exports=o},1028:(t,e,n)=>{const r=n(7799);e.mul=function(t,e){const n=new Uint8Array(t.length+e.length-1);for(let o=0;o<t.length;o++)for(let i=0;i<e.length;i++)n[o+i]^=r.mul(t[o],e[i]);return n},e.mod=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){const t=n[0];for(let o=0;o<e.length;o++)n[o]^=r.mul(e[o],t);let o=0;for(;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},e.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let o=0;o<t;o++)n=e.mul(n,new Uint8Array([1,r.exp(o)]));return n}},7297:(t,e,n)=>{const r=n(4257),o=n(8803),i=n(1650),s=n(4914),a=n(2955),c=n(2351),u=n(7182),l=n(8582),h=n(2707),f=n(1562),d=n(4144),p=n(9279),y=n(6873);function g(t,e,n){const r=t.size,o=d.getEncodedBits(e,n);let i,s;for(i=0;i<15;i++)s=1==(o>>i&1),i<6?t.set(i,8,s,!0):i<8?t.set(i+1,8,s,!0):t.set(r-15+i,8,s,!0),i<8?t.set(8,r-i-1,s,!0):i<9?t.set(8,15-i-1+1,s,!0):t.set(8,15-i-1,s,!0);t.set(r-8,8,1,!0)}function m(t,e,n,o){let d;if(Array.isArray(t))d=y.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let r=e;if(!r){const e=y.rawSplit(t);r=f.getBestVersionForData(e,n)}d=y.fromString(t,r||40)}}const m=f.getBestVersionForData(d,n);if(!m)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<m)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+m+".\n")}else e=m;const v=function(t,e,n){const o=new i;n.forEach((function(e){o.put(e.mode.bit,4),o.put(e.getLength(),p.getCharCountIndicator(e.mode,t)),e.write(o)}));const s=8*(r.getSymbolTotalCodewords(t)-l.getTotalCodewordsCount(t,e));for(o.getLengthInBits()+4<=s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);const a=(s-o.getLengthInBits())/8;for(let t=0;t<a;t++)o.put(t%2?17:236,8);return function(t,e,n){const o=r.getSymbolTotalCodewords(e),i=o-l.getTotalCodewordsCount(e,n),s=l.getBlocksCount(e,n),a=s-o%s,c=Math.floor(o/s),u=Math.floor(i/s),f=u+1,d=c-u,p=new h(d);let y=0;const g=new Array(s),m=new Array(s);let v=0;const w=new Uint8Array(t.buffer);for(let t=0;t<s;t++){const e=t<a?u:f;g[t]=w.slice(y,y+e),m[t]=p.encode(g[t]),y+=e,v=Math.max(v,e)}const b=new Uint8Array(o);let x,E,A=0;for(x=0;x<v;x++)for(E=0;E<s;E++)x<g[E].length&&(b[A++]=g[E][x]);for(x=0;x<d;x++)for(E=0;E<s;E++)b[A++]=m[E][x];return b}(o,t,e)}(e,n,d),w=r.getSymbolSize(e),b=new s(w);return function(t,e){const n=t.size,r=c.getPositions(e);for(let e=0;e<r.length;e++){const o=r[e][0],i=r[e][1];for(let e=-1;e<=7;e++)if(!(o+e<=-1||n<=o+e))for(let r=-1;r<=7;r++)i+r<=-1||n<=i+r||(e>=0&&e<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===e||6===e)||e>=2&&e<=4&&r>=2&&r<=4?t.set(o+e,i+r,!0,!0):t.set(o+e,i+r,!1,!0))}}(b,e),function(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2==0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}(b),function(t,e){const n=a.getPositions(e);for(let e=0;e<n.length;e++){const r=n[e][0],o=n[e][1];for(let e=-2;e<=2;e++)for(let n=-2;n<=2;n++)-2===e||2===e||-2===n||2===n||0===e&&0===n?t.set(r+e,o+n,!0,!0):t.set(r+e,o+n,!1,!0)}}(b,e),g(b,n,0),e>=7&&function(t,e){const n=t.size,r=f.getEncodedBits(e);let o,i,s;for(let e=0;e<18;e++)o=Math.floor(e/3),i=e%3+n-8-3,s=1==(r>>e&1),t.set(o,i,s,!0),t.set(i,o,s,!0)}(b,e),function(t,e){const n=t.size;let r=-1,o=n-1,i=7,s=0;for(let a=n-1;a>0;a-=2)for(6===a&&a--;;){for(let n=0;n<2;n++)if(!t.isReserved(o,a-n)){let r=!1;s<e.length&&(r=1==(e[s]>>>i&1)),t.set(o,a-n,r),i--,-1===i&&(s++,i=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}(b,v),isNaN(o)&&(o=u.getBestMask(b,g.bind(null,b,n))),u.applyMask(o,b),g(b,n,o),{modules:b,version:e,errorCorrectionLevel:n,maskPattern:o,segments:d}}e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let n,i,s=o.M;return void 0!==e&&(s=o.from(e.errorCorrectionLevel,o.M),n=f.from(e.version),i=u.from(e.maskPattern),e.toSJISFunc&&r.setToSJISFunction(e.toSJISFunc)),m(t,n,s,i)}},2707:(t,e,n)=>{const r=n(1028);function o(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(t){this.degree=t,this.genPoly=r.generateECPolynomial(this.degree)},o.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=r.mod(e,this.genPoly),o=this.degree-n.length;if(o>0){const t=new Uint8Array(this.degree);return t.set(n,o),t}return n},t.exports=o},4499:(t,e)=>{const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";e.KANJI=new RegExp(r,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(o,"g"),e.NUMERIC=new RegExp(n,"g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const i=new RegExp("^"+r+"$"),s=new RegExp("^"+n+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return i.test(t)},e.testNumeric=function(t){return s.test(t)},e.testAlphanumeric=function(t){return a.test(t)}},6873:(t,e,n)=>{const r=n(9279),o=n(5543),i=n(7042),s=n(8086),a=n(1857),c=n(4499),u=n(4257),l=n(2596);function h(t){return unescape(encodeURIComponent(t)).length}function f(t,e,n){const r=[];let o;for(;null!==(o=t.exec(n));)r.push({data:o[0],index:o.index,mode:e,length:o[0].length});return r}function d(t){const e=f(c.NUMERIC,r.NUMERIC,t),n=f(c.ALPHANUMERIC,r.ALPHANUMERIC,t);let o,i;return u.isKanjiModeEnabled()?(o=f(c.BYTE,r.BYTE,t),i=f(c.KANJI,r.KANJI,t)):(o=f(c.BYTE_KANJI,r.BYTE,t),i=[]),e.concat(n,o,i).sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function p(t,e){switch(e){case r.NUMERIC:return o.getBitsLength(t);case r.ALPHANUMERIC:return i.getBitsLength(t);case r.KANJI:return a.getBitsLength(t);case r.BYTE:return s.getBitsLength(t)}}function y(t,e){let n;const c=r.getBestModeForData(t);if(n=r.from(e,c),n!==r.BYTE&&n.bit<c.bit)throw new Error('"'+t+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(c));switch(n!==r.KANJI||u.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new o(t);case r.ALPHANUMERIC:return new i(t);case r.KANJI:return new a(t);case r.BYTE:return new s(t)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"==typeof e?t.push(y(e,null)):e.data&&t.push(y(e.data,e.mode)),t}),[])},e.fromString=function(t,n){const o=function(t){const e=[];for(let n=0;n<t.length;n++){const o=t[n];switch(o.mode){case r.NUMERIC:e.push([o,{data:o.data,mode:r.ALPHANUMERIC,length:o.length},{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.ALPHANUMERIC:e.push([o,{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.KANJI:e.push([o,{data:o.data,mode:r.BYTE,length:h(o.data)}]);break;case r.BYTE:e.push([{data:o.data,mode:r.BYTE,length:h(o.data)}])}}return e}(d(t,u.isKanjiModeEnabled())),i=function(t,e){const n={},o={start:{}};let i=["start"];for(let s=0;s<t.length;s++){const a=t[s],c=[];for(let t=0;t<a.length;t++){const u=a[t],l=""+s+t;c.push(l),n[l]={node:u,lastCount:0},o[l]={};for(let t=0;t<i.length;t++){const s=i[t];n[s]&&n[s].node.mode===u.mode?(o[s][l]=p(n[s].lastCount+u.length,u.mode)-p(n[s].lastCount,u.mode),n[s].lastCount+=u.length):(n[s]&&(n[s].lastCount=u.length),o[s][l]=p(u.length,u.mode)+4+r.getCharCountIndicator(u.mode,e))}}i=c}for(let t=0;t<i.length;t++)o[i[t]].end=0;return{map:o,table:n}}(o,n),s=l.find_path(i.map,"start","end"),a=[];for(let t=1;t<s.length-1;t++)a.push(i.table[s[t]].node);return e.fromArray(a.reduce((function(t,e){const n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[]))},e.rawSplit=function(t){return e.fromArray(d(t,u.isKanjiModeEnabled()))}},4257:(t,e)=>{let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return r[t]},e.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');n=t},e.isKanjiModeEnabled=function(){return void 0!==n},e.toSJIS=function(t){return n(t)}},2971:(t,e)=>{e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},1562:(t,e,n)=>{const r=n(4257),o=n(8582),i=n(8803),s=n(9279),a=n(2971),c=r.getBCHDigit(7973);function u(t,e){return s.getCharCountIndicator(t,e)+4}function l(t,e){let n=0;return t.forEach((function(t){const r=u(t.mode,e);n+=r+t.getBitsLength()})),n}e.from=function(t,e){return a.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,n){if(!a.isValid(t))throw new Error("Invalid QR Code version");void 0===n&&(n=s.BYTE);const i=8*(r.getSymbolTotalCodewords(t)-o.getTotalCodewordsCount(t,e));if(n===s.MIXED)return i;const c=i-u(n,t);switch(n){case s.NUMERIC:return Math.floor(c/10*3);case s.ALPHANUMERIC:return Math.floor(c/11*2);case s.KANJI:return Math.floor(c/13);case s.BYTE:default:return Math.floor(c/8)}},e.getBestVersionForData=function(t,n){let r;const o=i.from(n,i.M);if(Array.isArray(t)){if(t.length>1)return function(t,n){for(let r=1;r<=40;r++)if(l(t,r)<=e.getCapacity(r,n,s.MIXED))return r}(t,o);if(0===t.length)return 1;r=t[0]}else r=t;return function(t,n,r){for(let o=1;o<=40;o++)if(n<=e.getCapacity(o,r,t))return o}(r.mode,r.getLength(),o)},e.getEncodedBits=function(t){if(!a.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;r.getBCHDigit(e)-c>=0;)e^=7973<<r.getBCHDigit(e)-c;return t<<12|e}},7083:(t,e,n)=>{const r=n(3724);e.render=function(t,e,n){let o=n,i=e;void 0!==o||e&&e.getContext||(o=e,e=void 0),e||(i=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),o=r.getOptions(o);const s=r.getImageWidth(t.modules.size,o),a=i.getContext("2d"),c=a.createImageData(s,s);return r.qrToImageData(c.data,t,o),function(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}(a,i,s),a.putImageData(c,0,0),i},e.renderToDataURL=function(t,n,r){let o=r;void 0!==o||n&&n.getContext||(o=n,n=void 0),o||(o={});const i=e.render(t,n,o),s=o.type||"image/png",a=o.rendererOpts||{};return i.toDataURL(s,a.quality)}},2858:(t,e,n)=>{const r=n(3724);function o(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function i(t,e,n){let r=t+e;return void 0!==n&&(r+=" "+n),r}e.render=function(t,e,n){const s=r.getOptions(e),a=t.modules.size,c=t.modules.data,u=a+2*s.margin,l=s.color.light.a?"<path "+o(s.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",h="<path "+o(s.color.dark,"stroke")+' d="'+function(t,e,n){let r="",o=0,s=!1,a=0;for(let c=0;c<t.length;c++){const u=Math.floor(c%e),l=Math.floor(c/e);u||s||(s=!0),t[c]?(a++,c>0&&u>0&&t[c-1]||(r+=s?i("M",u+n,.5+l+n):i("m",o,0),o=0,s=!1),u+1<e&&t[c+1]||(r+=i("h",a),a=0)):o++}return r}(c,a,s.margin)+'"/>',f='viewBox="0 0 '+u+" "+u+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+f+' shape-rendering="crispEdges">'+l+h+"</svg>\n";return"function"==typeof n&&n(null,d),d}},3724:(t,e)=>{function n(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,o=t.scale||4;return{width:r,scale:r?4:o,margin:e,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,n){const r=e.getScale(t,n);return Math.floor((t+2*n.margin)*r)},e.qrToImageData=function(t,n,r){const o=n.modules.size,i=n.modules.data,s=e.getScale(o,r),a=Math.floor((o+2*r.margin)*s),c=r.margin*s,u=[r.color.light,r.color.dark];for(let e=0;e<a;e++)for(let n=0;n<a;n++){let l=4*(e*a+n),h=r.color.light;e>=c&&n>=c&&e<a-c&&n<a-c&&(h=u[i[Math.floor((e-c)/s)*o+Math.floor((n-c)/s)]?1:0]),t[l++]=h.r,t[l++]=h.g,t[l++]=h.b,t[l]=h.a}}},2428:(t,e,n)=>{"use strict";const r=n(7237),o=n(0),i=n(3841),s=n(550);function a(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function u(t,e){return e.decode?o(t):t}function l(t){return Array.isArray(t)?t.sort():"object"==typeof t?l(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function h(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function f(t){const e=(t=h(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function d(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function p(t,e){a((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const o="string"==typeof n&&n.includes(t.arrayFormatSeparator),i="string"==typeof n&&!o&&u(n,t).includes(t.arrayFormatSeparator);n=i?u(n,t):n;const s=o||i?n.split(t.arrayFormatSeparator).map((e=>u(e,t))):null===n?n:u(n,t);r[e]=s};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(const o of t.split("&")){if(""===o)continue;let[t,s]=i(e.decode?o.replace(/\+/g," "):o,"=");s=void 0===s?null:["comma","separator"].includes(e.arrayFormat)?s:u(s,e),n(u(t,e),s,r)}for(const t of Object.keys(r)){const n=r[t];if("object"==typeof n&&null!==n)for(const t of Object.keys(n))n[t]=d(n[t],e);else r[t]=d(n,e)}return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce(((t,e)=>{const n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=l(n):t[e]=n,t}),Object.create(null))}e.extract=f,e.parse=p,e.stringify=(t,e)=>{if(!t)return"";a((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const n=n=>e.skipNull&&null==t[n]||e.skipEmptyString&&""===t[n],r=function(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const o=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),"[",o,"]"].join("")]:[...n,[c(e,t),"[",c(o,t),"]=",c(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),"[]"].join("")]:[...n,[c(e,t),"[]=",c(r,t)].join("")];case"comma":case"separator":return e=>(n,r)=>null==r||0===r.length?n:0===n.length?[[c(e,t),"=",c(r,t)].join("")]:[[n,c(r,t)].join(t.arrayFormatSeparator)];default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,c(e,t)]:[...n,[c(e,t),"=",c(r,t)].join("")]}}(e),o={};for(const e of Object.keys(t))n(e)||(o[e]=t[e]);const i=Object.keys(o);return!1!==e.sort&&i.sort(e.sort),i.map((n=>{const o=t[n];return void 0===o?"":null===o?c(n,e):Array.isArray(o)?o.reduce(r(n),[]).join("&"):c(n,e)+"="+c(o,e)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[n,r]=i(t,"#");return Object.assign({url:n.split("?")[0]||"",query:p(f(t),e)},e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,e)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=h(t.url).split("?")[0]||"",o=e.extract(t.url),i=e.parse(o,{sort:!1}),s=Object.assign(i,t.query);let a=e.stringify(s,n);a&&(a=`?${a}`);let u=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);return t.fragmentIdentifier&&(u=`#${c(t.fragmentIdentifier,n)}`),`${r}${a}${u}`},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0},r);const{url:o,query:i,fragmentIdentifier:a}=e.parseUrl(t,r);return e.stringifyUrl({url:o,query:s(i,n),fragmentIdentifier:a},r)},e.exclude=(t,n,r)=>{const o=Array.isArray(n)?t=>!n.includes(t):(t,e)=>!n(t,e);return e.pick(t,o,r)}},3841:t=>{"use strict";t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]}},7237:t=>{"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},6659:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,e,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,o,i,s){var a=n?n+t:t;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,o),!0;case 5:return l.fn.call(l.context,e,r,o,i),!0;case 6:return l.fn.call(l.context,e,r,o,i,s),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,o);break;default:if(!c)for(f=1,c=new Array(h-1);f<h;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,o){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==e||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},5182:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},2084:function(t,e,n){var r,o;!function(i,s){"use strict";r=function(){var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function o(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(e,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<e?t:this.methodFactory(i,e,n)}this.log=this.debug}function a(t,n,r){return function(){typeof console!==e&&(s.call(this,n,r),this[t].apply(this,arguments))}}function c(r,s,c){return function(r){return"debug"===r&&(r="log"),typeof console!==e&&("trace"===r&&n?i:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):t)}(r)||a.apply(this,arguments)}function u(t,n,o){var i,a=this;n=null==n?"WARN":n;var u="loglevel";function l(){var t;if(typeof window!==e&&u){try{t=window.localStorage[u]}catch(t){}if(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(u)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?u+=":"+t:"symbol"==typeof t&&(u=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||c,a.getLevel=function(){return i},a.setLevel=function(n,o){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==o&&function(t){var n=(r[t]||"silent").toUpperCase();if(typeof window!==e&&u){try{return void(window.localStorage[u]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(u)+"="+n+";"}catch(t){}}}(n),s.call(a,n,t),typeof console===e&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){n=t,l()||a.setLevel(t,!1)},a.resetLevel=function(){a.setLevel(n,!1),function(){if(typeof window!==e&&u){try{return void window.localStorage.removeItem(u)}catch(t){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(t){}}}()},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var h=l();null==h&&(h=n),a.setLevel(h,!1)}var l=new u,h={};l.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=h[t];return e||(e=h[t]=new u(t,l.getLevel(),l.methodFactory)),e};var f=typeof window!==e?window.log:void 0;return l.noConflict=function(){return typeof window!==e&&window.log===l&&(window.log=f),l},l.getLoggers=function(){return h},l.default=l,l},void 0===(o=r.call(e,n,e,t))||(t.exports=o)}()},9174:function(t,e,n){t.exports=function(){"use strict";var t="function"==typeof Promise,e="object"==typeof self?self:n.g,r="undefined"!=typeof Symbol,o="undefined"!=typeof Map,i="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,a="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,u=r&&void 0!==Symbol.iterator,l=r&&void 0!==Symbol.toStringTag,h=i&&"function"==typeof Set.prototype.entries,f=o&&"function"==typeof Map.prototype.entries,d=h&&Object.getPrototypeOf((new Set).entries()),p=f&&Object.getPrototypeOf((new Map).entries()),y=u&&"function"==typeof Array.prototype[Symbol.iterator],g=y&&Object.getPrototypeOf([][Symbol.iterator]()),m=u&&"function"==typeof String.prototype[Symbol.iterator],v=m&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var r=typeof n;if("object"!==r)return r;if(null===n)return"null";if(n===e)return"global";if(Array.isArray(n)&&(!1===l||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var u=l&&n[Symbol.toStringTag];if("string"==typeof u)return u;var h=Object.getPrototypeOf(n);return h===RegExp.prototype?"RegExp":h===Date.prototype?"Date":t&&h===Promise.prototype?"Promise":i&&h===Set.prototype?"Set":o&&h===Map.prototype?"Map":a&&h===WeakSet.prototype?"WeakSet":s&&h===WeakMap.prototype?"WeakMap":c&&h===DataView.prototype?"DataView":o&&h===p?"Map Iterator":i&&h===d?"Set Iterator":y&&h===g?"Array Iterator":m&&h===v?"String Iterator":null===h?"Object":Object.prototype.toString.call(n).slice(8,-1)}}()},3517:t=>{"use strict";t.exports={i8:"0.4.0"}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=[];function e(n){if("number"==typeof n||"string"==typeof n||"boolean"==typeof n||null===n)return n;if(void 0===n)return{__type:"undefined"};if(Array.isArray(n))return n.map(e);if("object"==typeof n){for(let e of t)if(n instanceof e.klass)return{__type:e.typeName,data:e.serializer(n)};const r={};for(let t of Object.keys(n))r[t]=e(n[t]);return r}throw new Error("Failed to serialize unknown type.")}function r(e){if("number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e)return e;if(Array.isArray(e))return e.map(r);if("object"!=typeof e)throw new Error("Failed to deserialize unknown type.");if(!e.__type){const t={};for(let n of Object.keys(e))t[n]=r(e[n]);return t}if("undefined"!==e.__type)for(let n of t)if(e.__type===n.typeName)return n.deserializer(e.data)}function o(t){const n={};for(let r of Object.keys(t))n[r]=e(t[r]);return n}function i(t,e){for(const[n,o]of Object.entries(t))e[n]=r(t[n])}class s{serialize(){return o(this)}deserialize(t){i(t,this)}}class a{predictNext(){return this}serialize(){return o(this)}deserialize(t){i(t,this)}}class c{constructor(t,e,n){this.id=t,this.isLocal=e,this.isHost=n}isLocalPlayer(){return this.isLocal}isRemotePlayer(){return!this.isLocal}isServer(){return this.isHost}isClient(){return!this.isHost}getID(){return this.id}}function u(t,e){let n=t.get(e);if(void 0!==n)return n;throw new Error(`Key ${String(e)} not in Map ${t.toString()}`)}function l(t){return JSON.parse(JSON.stringify(t))}function h(t){let e=t.shift();if(void 0!==e)return e;throw new Error(`Shift returned undefined from Array ${t.toString()}`)}class f{constructor(t=0,e=0){this.x=t,this.y=e}multiplyScalar(t){return new f(this.x*t,this.y*t)}add(t){return new f(this.x+t.x,this.y+t.y)}subtract(t){return new f(this.x-t.x,this.y-t.y)}}var d,p,y;d=f,p=t=>[t.x,t.y],y=t=>new f(t[0],t[1]),t.push({klass:d,typeName:"netplayjs.Vec2",serializer:p,deserializer:y});class g extends a{constructor(){super(...arguments),this.keysPressed={},this.keysHeld={},this.keysReleased={},this.touches=[]}arrowKeys(){return new f((this.keysHeld.ArrowLeft?-1:0)+(this.keysHeld.ArrowRight?1:0),(this.keysHeld.ArrowDown?-1:0)+(this.keysHeld.ArrowUp?1:0))}wasd(){return new f((this.keysHeld.a?-1:0)+(this.keysHeld.d?1:0),(this.keysHeld.s?-1:0)+(this.keysHeld.w?1:0))}}class m{getCanvasScale(){const t=this.canvas.getBoundingClientRect();return{x:this.canvas.width/t.width,y:this.canvas.height/t.height}}projectClientPosition(t,e){const n=this.canvas.getBoundingClientRect(),r=this.getCanvasScale();return{x:(t-n.left)*r.x,y:(e-n.top)*r.y}}constructor(t=document.body,e,n,r){this.keysPressed={},this.keysHeld={},this.keysReleased={},this.mousePosition=null,this.mouseDelta=null,this.touches=[],this.canvas=e,this.touchControls=r,t.addEventListener("keydown",(t=>{this.keysHeld[t.key]=!0,this.keysPressed[t.key]=!0}),!1),t.addEventListener("keyup",(t=>{this.keysHeld[t.key]=!1,this.keysReleased[t.key]=!0}),!1),e.addEventListener("mouseenter",(t=>this.updateMousePosition(t)),!1),e.addEventListener("mousemove",(t=>this.updateMousePosition(t)),!1),e.addEventListener("mouseleave",(t=>{this.mousePosition=null}),!1),e.addEventListener("touchstart",(t=>this.updateTouches(t)),!1),e.addEventListener("touchmove",(t=>this.updateTouches(t)),!1),e.addEventListener("touchend",(t=>this.updateTouches(t)),!1),e.addEventListener("mousedown",(()=>{n&&e.requestPointerLock()}))}updateMousePosition(t){if(document.pointerLockElement===this.canvas)if(this.mousePosition){const e=this.getCanvasScale();this.mousePosition.x+=t.movementX*e.x,this.mousePosition.y+=t.movementY*e.y}else this.mousePosition=this.projectClientPosition(t.clientX,t.clientY);else this.mousePosition=this.projectClientPosition(t.clientX,t.clientY)}updateTouches(t){this.touches.length=t.targetTouches.length;for(let e=0;e<t.targetTouches.length;++e)this.touches[e]=this.projectClientPosition(t.targetTouches[e].clientX,t.targetTouches[e].clientY)}getInput(){let t=new g;for(let e in this.keysPressed)this.keysPressed[e]&&(t.keysPressed[e]=!0,t.keysHeld[e]=!0);for(let e in this.keysHeld)this.keysHeld[e]&&(t.keysHeld[e]=!0);for(let e in this.keysReleased)this.keysReleased[e]&&(t.keysReleased[e]=!0);this.mousePosition&&(t.mousePosition=l(this.mousePosition)),t.touches=l(this.touches);for(let[e,n]of Object.entries(this.touchControls))t.touchControls=t.touchControls||{},t.touchControls[e]=l(n.getValue());return this.keysPressed={},this.keysReleased={},t}}var v=n(2084),w=n.n(v),b=n(5881);b.expect,b.version,b.AssertionError,b.util,b.config,b.use,b.should;const x=b.assert;var E;b.core;const A=window,k=A.trustedTypes,S=k?k.createPolicy("lit-html",{createHTML:t=>t}):void 0,P="$lit$",C=`lit$${(Math.random()+"").slice(9)}$`,M="?"+C,N=`<${M}>`,O=document,I=()=>O.createComment(""),j=t=>null===t||"object"!=typeof t&&"function"!=typeof t,T=Array.isArray,_="[ \t\n\f\r]",B=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,U=/-->/g,L=/>/g,R=RegExp(`>|${_}(?:([^\\s"'>=/]+)(${_}*=${_}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),$=/'/g,D=/"/g,z=/^(?:script|style|textarea|title)$/i,F=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),H=F(1),q=(F(2),Symbol.for("lit-noChange")),V=Symbol.for("lit-nothing"),K=new WeakMap,J=O.createTreeWalker(O,129,null,!1),Y=(t,e)=>{const n=t.length-1,r=[];let o,i=2===e?"<svg>":"",s=B;for(let e=0;e<n;e++){const n=t[e];let a,c,u=-1,l=0;for(;l<n.length&&(s.lastIndex=l,c=s.exec(n),null!==c);)l=s.lastIndex,s===B?"!--"===c[1]?s=U:void 0!==c[1]?s=L:void 0!==c[2]?(z.test(c[2])&&(o=RegExp("</"+c[2],"g")),s=R):void 0!==c[3]&&(s=R):s===R?">"===c[0]?(s=null!=o?o:B,u=-1):void 0===c[1]?u=-2:(u=s.lastIndex-c[2].length,a=c[1],s=void 0===c[3]?R:'"'===c[3]?D:$):s===D||s===$?s=R:s===U||s===L?s=B:(s=R,o=void 0);const h=s===R&&t[e+1].startsWith("/>")?" ":"";i+=s===B?n+N:u>=0?(r.push(a),n.slice(0,u)+P+n.slice(u)+C+h):n+C+(-2===u?(r.push(void 0),e):h)}const a=i+(t[n]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==S?S.createHTML(a):a,r]};class W{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let o=0,i=0;const s=t.length-1,a=this.parts,[c,u]=Y(t,e);if(this.el=W.createElement(c,n),J.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(r=J.nextNode())&&a.length<s;){if(1===r.nodeType){if(r.hasAttributes()){const t=[];for(const e of r.getAttributeNames())if(e.endsWith(P)||e.startsWith(C)){const n=u[i++];if(t.push(e),void 0!==n){const t=r.getAttribute(n.toLowerCase()+P).split(C),e=/([.?@])?(.*)/.exec(n);a.push({type:1,index:o,name:e[2],strings:t,ctor:"."===e[1]?tt:"?"===e[1]?nt:"@"===e[1]?rt:Z})}else a.push({type:6,index:o})}for(const e of t)r.removeAttribute(e)}if(z.test(r.tagName)){const t=r.textContent.split(C),e=t.length-1;if(e>0){r.textContent=k?k.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],I()),J.nextNode(),a.push({type:2,index:++o});r.append(t[e],I())}}}else if(8===r.nodeType)if(r.data===M)a.push({type:2,index:o});else{let t=-1;for(;-1!==(t=r.data.indexOf(C,t+1));)a.push({type:7,index:o}),t+=C.length-1}o++}}static createElement(t,e){const n=O.createElement("template");return n.innerHTML=t,n}}function Q(t,e,n=t,r){var o,i,s,a;if(e===q)return e;let c=void 0!==r?null===(o=n._$Co)||void 0===o?void 0:o[r]:n._$Cl;const u=j(e)?void 0:e._$litDirective$;return(null==c?void 0:c.constructor)!==u&&(null===(i=null==c?void 0:c._$AO)||void 0===i||i.call(c,!1),void 0===u?c=void 0:(c=new u(t),c._$AT(t,n,r)),void 0!==r?(null!==(s=(a=n)._$Co)&&void 0!==s?s:a._$Co=[])[r]=c:n._$Cl=c),void 0!==c&&(e=Q(t,c._$AS(t,e.values),c,r)),e}class G{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;const{el:{content:n},parts:r}=this._$AD,o=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:O).importNode(n,!0);J.currentNode=o;let i=J.nextNode(),s=0,a=0,c=r[0];for(;void 0!==c;){if(s===c.index){let e;2===c.type?e=new X(i,i.nextSibling,this,t):1===c.type?e=new c.ctor(i,c.name,c.strings,this,t):6===c.type&&(e=new ot(i,this,t)),this.u.push(e),c=r[++a]}s!==(null==c?void 0:c.index)&&(i=J.nextNode(),s++)}return o}p(t){let e=0;for(const n of this.u)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class X{constructor(t,e,n,r){var o;this.type=2,this._$AH=V,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cm=null===(o=null==r?void 0:r.isConnected)||void 0===o||o}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Q(this,t,e),j(t)?t===V||null==t||""===t?(this._$AH!==V&&this._$AR(),this._$AH=V):t!==this._$AH&&t!==q&&this.g(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>T(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.k(t):this.g(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}g(t){this._$AH!==V&&j(this._$AH)?this._$AA.nextSibling.data=t:this.T(O.createTextNode(t)),this._$AH=t}$(t){var e;const{values:n,_$litType$:r}=t,o="number"==typeof r?this._$AC(t):(void 0===r.el&&(r.el=W.createElement(r.h,this.options)),r);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===o)this._$AH.p(n);else{const t=new G(o,this),e=t.v(this.options);t.p(n),this.T(e),this._$AH=t}}_$AC(t){let e=K.get(t.strings);return void 0===e&&K.set(t.strings,e=new W(t)),e}k(t){T(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const o of t)r===e.length?e.push(n=new X(this.S(I()),this.S(I()),this,this.options)):n=e[r],n._$AI(o),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cm=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Z{constructor(t,e,n,r,o){this.type=1,this._$AH=V,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=o,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=V}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,r){const o=this.strings;let i=!1;if(void 0===o)t=Q(this,t,e,0),i=!j(t)||t!==this._$AH&&t!==q,i&&(this._$AH=t);else{const r=t;let s,a;for(t=o[0],s=0;s<o.length-1;s++)a=Q(this,r[n+s],e,s),a===q&&(a=this._$AH[s]),i||(i=!j(a)||a!==this._$AH[s]),a===V?t=V:t!==V&&(t+=(null!=a?a:"")+o[s+1]),this._$AH[s]=a}i&&!r&&this.j(t)}j(t){t===V?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class tt extends Z{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===V?void 0:t}}const et=k?k.emptyScript:"";class nt extends Z{constructor(){super(...arguments),this.type=4}j(t){t&&t!==V?this.element.setAttribute(this.name,et):this.element.removeAttribute(this.name)}}class rt extends Z{constructor(t,e,n,r,o){super(t,e,n,r,o),this.type=5}_$AI(t,e=this){var n;if((t=null!==(n=Q(this,t,e,0))&&void 0!==n?n:V)===q)return;const r=this._$AH,o=t===V&&r!==V||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,i=t!==V&&(r===V||o);o&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==n?n:this.element,t):this._$AH.handleEvent(t)}}class ot{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){Q(this,t)}}const it=A.litHtmlPolyfillSupport;null==it||it(W,X),(null!==(E=A.litHtmlVersions)&&void 0!==E?E:A.litHtmlVersions=[]).push("2.7.0");const st=(t,e,n)=>{var r,o;const i=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:e;let s=i._$litPart$;if(void 0===s){const t=null!==(o=null==n?void 0:n.renderBefore)&&void 0!==o?o:null;i._$litPart$=s=new X(e.insertBefore(I(),t),t,void 0,null!=n?n:{})}return s._$AI(t),s};class at{constructor(){this.listeners=[],this.listenersOncer=[],this.on=t=>(this.listeners.push(t),{dispose:()=>this.off(t)}),this.once=t=>{this.listenersOncer.push(t)},this.off=t=>{var e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)},this.emit=t=>{if(this.listeners.forEach((e=>e(t))),this.listenersOncer.length>0){const e=this.listenersOncer;this.listenersOncer=[],e.forEach((e=>e(t)))}},this.pipe=t=>this.on((e=>t.emit(e)))}}const ct=n(6659);var ut=n(618);class lt{constructor(t=5e3){this.window=[],this.windowDuration=t}updateWindow(){const t=performance.now()-this.windowDuration;for(;this.window.length>0&&this.window[0].timestamp<t;)this.window.shift()}onMessage(t){this.window.push({timestamp:performance.now(),bytes:t}),this.updateWindow()}getPacketsPerSecond(){return this.updateWindow(),1e3*this.window.length/this.windowDuration}getAveragePacketSize(){this.updateWindow();const t=this.window.reduce(((t,e)=>t+e.bytes),0);return t/this.window.length}getBytesPerSecond(){this.updateWindow();const t=this.window.reduce(((t,e)=>t+e.bytes),0);return 1e3*t/this.windowDuration}formatStats(){return`${this.getPacketsPerSecond().toFixed(2)} msgs/sec, ${this.getAveragePacketSize().toFixed(2)} bytes/msg, ${this.getBytesPerSecond()} bytes/sec`}}var ht=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class ft extends ct{constructor(t,e,n){super(),this.sendStats=new lt,this.receiveStats=new lt,this.onClose=new at,this.closed=!1,this.client=t,this.peerID=e,this.peerConnection=new RTCPeerConnection({iceServers:t.iceServers}),window.addEventListener("beforeunload",(t=>{var e;this.peerConnection.close(),null===(e=this.dataChannel)||void 0===e||e.close()})),this.peerConnection.onicecandidate=t=>{t.candidate&&this.client.send({kind:"send-message",type:"candidate",destinationID:e,payload:t.candidate})},this.peerConnection.onconnectionstatechange=t=>{w().debug(`ConnectionStateChange: ${this.peerConnection.connectionState}`),"disconnected"===this.peerConnection.connectionState&&this.close()},n?(this.peerConnection.onnegotiationneeded=()=>ht(this,void 0,void 0,(function*(){const t=yield this.peerConnection.createOffer();this.client.send({kind:"send-message",type:"offer",destinationID:e,payload:t}),yield this.peerConnection.setLocalDescription(t)})),this.setDataChannel(this.peerConnection.createDataChannel("data",{ordered:!0}))):this.peerConnection.ondatachannel=t=>{this.setDataChannel(t.channel)}}close(){var t;closed||(this.closed=!0,this.peerConnection.close(),null===(t=this.dataChannel)||void 0===t||t.close(),this.onClose.emit())}setDataChannel(t){this.dataChannel=t,this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=t=>{this.emit("open")},this.dataChannel.onmessage=t=>{this.receiveStats.onMessage(t.data.byteLength),this.emit("data",ut.decode(new Uint8Array(t.data)))},this.dataChannel.onclose=t=>{w().debug("Data channel closed..."),this.close()}}onSignalingMessage(t,e){return ht(this,void 0,void 0,(function*(){if(w().debug(`onSignalingMessage: ${t}, ${JSON.stringify(e)}`),"offer"===t){yield this.peerConnection.setRemoteDescription(e),w().debug("Generating answer...");const t=yield this.peerConnection.createAnswer();yield this.peerConnection.setLocalDescription(t),this.client.send({kind:"send-message",type:"answer",destinationID:this.peerID,payload:t})}else"answer"===t?yield this.peerConnection.setRemoteDescription(e):"candidate"===t&&(yield this.peerConnection.addIceCandidate(e))}))}send(t){var e;if("open"!==(null===(e=this.dataChannel)||void 0===e?void 0:e.readyState))return;let n=ut.encode(t);this.sendStats.onMessage(n.byteLength),this.dataChannel.send(n)}}const dt="https://netplayjs.varunramesh.net";class pt{constructor(t=dt){this.connections=new Map,this.onHostMatch=new at,this.onJoinMatch=new at,this.onConnection=new at,this.onRegistered=new at,this.serverURL=t,this.ws=new WebSocket(function(t){const e=new URL(t);if("http:"===e.protocol)return`ws://${e.hostname}/`;if("https:"===e.protocol)return`wss://${e.hostname}/`;throw new Error(`Unknown protocol: ${e.protocol}`)}(this.serverURL)),this.ws.onmessage=t=>{w().debug(`Server -> Client: ${t.data}`),this.onServerMessage(JSON.parse(t.data))}}send(t){const e=JSON.stringify(t);w().debug(`Client -> Server: ${e}`),this.ws.send(e)}onServerMessage(t){if("registration-success"===t.kind)this.clientID=t.clientID,this.iceServers=t.iceServers,this.onRegistered.emit(this.clientID);else if("peer-message"===t.kind){if(!this.connections.has(t.sourceID)){const e=new ft(this,t.sourceID,!1);this.connections.set(t.sourceID,e),this.onConnection.emit(e)}this.connections.get(t.sourceID).onSignalingMessage(t.type,t.payload)}else"host-match"===t.kind?this.onHostMatch.emit({clientIDs:t.clientIDs}):"join-match"===t.kind&&this.onJoinMatch.emit({hostID:t.hostID})}connectPeer(t){const e=new ft(this,t,!0);return this.connections.set(t,e),this.onConnection.emit(e),e}sendMatchRequest(t,e,n){this.send({kind:"match-request",gameID:t,minPlayers:e,maxPlayers:n})}}var yt=n(2428),gt=n(7040);class mt{connectToHost(t){this.updateState({kind:"connecting-to-host"});const e=this.matchmaker.connectPeer(t);e.on("open",(()=>{this.onClientStart.emit(e),this.updateState({kind:"game-in-progress"}),e.onClose.on((()=>{this.updateState({kind:"connection-closed"})}))}))}constructor(){this.state={kind:"connecting-to-server"},this.onClientStart=new at,this.onHostStart=new at,this.root=this.createRootElement(),this.gameURL=window.location.href.split("#")[0];const t=yt.parse(window.location.hash),e=t.server||this.getLocalStorageServerOverride()||dt;this.matchmaker=new pt(e),this.matchmaker.onRegistered.once((()=>{if(t.room){const e=t.room;this.connectToHost(e)}else{const t=this.matchmaker.clientID,e=this.getJoinURL(t),n=document.createElement("canvas");gt.rT(n,e),this.updateState({kind:"registered",clientID:t,joinURL:e,qrCanvas:n}),this.startHostListening()}})),this.render()}startHostListening(){this.hostListeningHandle=this.matchmaker.onConnection.on((t=>{t.on("open",(()=>{this.onHostStart.emit(t),this.updateState({kind:"game-in-progress"}),t.onClose.on((()=>{this.updateState({kind:"connection-closed"})}))}))}))}stopHostListening(){this.hostListeningHandle.dispose()}startMatchmaking(){this.stopHostListening(),this.matchmaker.sendMatchRequest(this.gameURL,2,2),this.updateState({kind:"searching-for-matches"}),this.matchmaker.onHostMatch.once((t=>{this.updateState({kind:"hosting-public-match"}),this.startHostListening()})),this.matchmaker.onJoinMatch.once((t=>{this.connectToHost(t.hostID)}))}updateState(t){this.state=t,this.render()}getLocalStorageServerOverride(){try{return window.localStorage.getItem("NETPLAYJS_SERVER_OVERRIDE")}catch(t){return null}}getJoinURL(t){let e={room:t};return this.matchmaker.serverURL!==dt&&(e.server=this.matchmaker.serverURL),`${this.gameURL}#${yt.stringify(e)}`}centeredText(t){return H`<div
      style="display: flex; width: 100%; height: 100%; align-items: center; justify-content: center;"
    >
      <div style="font-size: 1.5em;">${t}</div>
    </div>`}menuContent(){return"connecting-to-server"===this.state.kind?this.centeredText("Connecting to NetplayJS server..."):"registered"===this.state.kind?H` <div
        style="display: grid; width: 100%; height: 100%; grid-template-columns: 1fr 1px 1fr; grid-column-gap: 10px;"
      >
        <div
          style="display: flex; flex-direction: column; align-items: center;"
        >
          <h1 style="margin: 5px;">Public Match</h1>
          <p>Play with random strangers on the internet.</p>
          <button
            style="font-size: 1.5em; background-color: #4CAF50; color: white; padding: 0.5em; border: none; cursor: pointer;"
            @click=${()=>this.startMatchmaking()}
          >
            Start Matchmaking
          </button>
        </div>
        <div
          style="display: flex; width: 100%; height: 100%; align-items: center; justify-content: center;"
        >
          <div style="background-color: black; width: 1px; height: 75%;"></div>
        </div>

        <div
          style="display: flex; flex-direction: column; align-items: center;"
        >
          <h1 style="margin: 5px;">Private Match</h1>
          <p>Invite players to a game via a link or QR code.</p>
          Join URL (send this to a friend):

          <a target="_blank" href="${this.state.joinURL}"> ${this.state.joinURL} </a>
          <div>${this.state.qrCanvas}</div>
        </div>
      </div>`:"connecting-to-host"===this.state.kind?this.centeredText("Connecting to host..."):"searching-for-matches"===this.state.kind?this.centeredText("Searching for matches..."):"hosting-public-match"===this.state.kind?this.centeredText("You are the host. Waiting for client to connect..."):"connection-closed"===this.state.kind?this.centeredText("The connection was closed..."):void 0}render(){st(H`
        ${this.menuContent()}
        <div style="position: absolute; right: 10px; bottom: 10px;">
          <a target="_blank" style="text-decoration: none; color: black;" href="https://github.com/rameshvarun/netplayjs">NetplayJS v${n(3517).i8}</a>
        </div>
      `,this.root),"game-in-progress"===this.state.kind?this.root.style.display="none":this.root.style.display="inherit"}createRootElement(){const t=document.createElement("div");return t.style.zIndex="1",t.style.position="absolute",t.style.backgroundColor="white",t.style.padding="10px",t.style.left="50%",t.style.top="50%",t.style.boxShadow="0px 0px 10px black",t.style.transform="translate(-50%, -50%)",t.style.boxSizing="border-box",t.style.borderRadius="5px",t.style.width="960px",t.style.height="400px",t.style.maxWidth="95%",t.style.maxHeight="95%",t.style.fontFamily="sans-serif",document.body.appendChild(t),t}}var vt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class wt{isChannelOrdered(t){return t.ordered}isChannelReliable(t){return null===t.maxPacketLifeTime&&null===t.maxRetransmits}checkChannel(t){x.isTrue(this.isChannelOrdered(t),"Data Channel must be ordered."),x.isTrue(this.isChannelReliable(t),"Channel must be reliable.")}constructor(t){if(this.gameClass=t,this.canvas=document.createElement("canvas"),this.canvas.width=t.canvasSize.width,this.canvas.height=t.canvasSize.height,this.canvas.style.backgroundColor="black",this.canvas.style.position="absolute",this.canvas.style.zIndex="0",this.canvas.style.boxShadow="0px 0px 10px black",this.resize(),window.addEventListener("resize",(()=>this.resize())),document.body.appendChild(this.canvas),this.stats=document.createElement("div"),this.stats.style.zIndex="1",this.stats.style.position="absolute",this.stats.style.backgroundColor="rgba(0, 0, 0, 0.5)",this.stats.style.color="white",this.stats.style.padding="5px",this.stats.style.display="none",document.body.appendChild(this.stats),this.playerPausedIndicator=(()=>{const t=document.createElement("div");return t.style.zIndex="1",t.style.position="absolute",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.color="white",t.style.padding="10px",t.style.left="50%",t.style.top="50%",t.style.transform="translate(-50%, -50%)",t.style.boxSizing="border-box",t.style.fontFamily="sans-serif",t.innerHTML='\n      <p align="center" style="margin: 3px">The other player has minimized or hidden their tab.</p>\n      <p align="center" style="margin: 3px">The game may run slowly until they return.</p>\n      ',t.style.display="none",document.body.appendChild(t),t})(),this.gameClass.touchControls&&window.navigator.userAgent.toLowerCase().includes("mobile"))for(let[t,e]of Object.entries(this.gameClass.touchControls))e.show();this.inputReader=new m(document.body,this.canvas,this.gameClass.pointerLock||!1,this.gameClass.touchControls||{})}calculateLayout(t,e){const n=t.width/e.width,r=t.height/e.height,o=e.width*r>=t.width,i=o?n:r;let s=e.width*i,a=e.height*i,c=0,u=0;return o?u=t.height/2-a/2:c=t.width/2-s/2,{width:s,height:a,left:c,top:u}}resize(){const t=this.calculateLayout({width:window.innerWidth,height:window.innerHeight},this.gameClass.canvasSize);v.debug("Calculating new layout: %o",t),this.canvas.style.width=`${t.width}px`,this.canvas.style.height=`${t.height}px`,this.canvas.style.top=`${t.top}px`,this.canvas.style.left=`${t.left}px`}start(){return vt(this,void 0,void 0,(function*(){const t=new mt;t.onClientStart.once((t=>{const e=[new c(0,!1,!0),new c(1,!0,!1)];this.watchRTCStats(t.peerConnection),this.startClient(e,t),this.startVisibilityWatcher(t)})),t.onHostStart.once((t=>{const e=[new c(0,!0,!0),new c(1,!1,!1)];this.watchRTCStats(t.peerConnection),this.startHost(e,t),this.startVisibilityWatcher(t)}))}))}startVisibilityWatcher(t){t.send({type:"visibility-state",value:document.visibilityState}),document.addEventListener("visibilitychange",(()=>{v.debug(`My visibility state changed to: ${document.visibilityState}.`),t.send({type:"visibility-state",value:document.visibilityState})})),t.on("data",(t=>{"visibility-state"===t.type&&("hidden"===t.value?this.playerPausedIndicator.style.display="inherit":this.playerPausedIndicator.style.display="none")}))}renderRTCStats(t){return H`
      <details>
        <summary>WebRTC Stats</summary>
        ${[...t.values()].map((t=>H`<div style="margin-left: 10px;">
            <details>
              <summary>${t.type}</summary>
              ${Object.entries(t).map((([e,n])=>{if("type"!==e)return H`<div style="margin-left: 10px;">${e}: ${t[e]}</div>`}))}
            </details>
          </div>`))}
      </details>
    `}watchRTCStats(t){return vt(this,void 0,void 0,(function*(){const e=yield t.getStats();this.rtcStats=this.renderRTCStats(e),setTimeout((()=>vt(this,void 0,void 0,(function*(){yield this.watchRTCStats(t)}))),1e3)}))}}class bt{constructor(t){this.discount=t,this.est_average=0,this.est_variance=0,this.initialized=!1}update(t){if(this.initialized){let e=t-this.est_average;this.est_variance=(1-this.discount)*(this.est_variance+this.discount*e*e),this.est_average=this.discount*t+(1-this.discount)*this.est_average}else this.est_average=t,this.initialized=!0}average(){return this.est_average}variance(){return this.est_variance}stddev(){return Math.sqrt(this.est_variance)}}class xt{constructor(t,e,n){this.frame=t,this.state=e,this.inputs=n}isPlayerInputPredicted(t){return u(this.inputs,t).isPrediction}anyInputPredicted(){for(const[t,{isPrediction:e}]of this.inputs.entries())if(e)return!0;return!1}allInputsSynced(){return!this.anyInputPredicted()}}class Et{onStateSync(t,e){for(;this.history.length>1&&this.history[0].frame<t;)h(this.history);this.history[0].state=e,this.state.deserialize(e);for(let t=1;t<this.history.length;++t){let e=this.history[t];this.state.tick(this.getStateInputs(e.inputs)),e.state=l(this.state.serialize())}}onRemoteInput(t,e,n){let r=u(this.highestFrameReceived,e)+1;if(this.highestFrameReceived.set(e,r),t>this.history[this.history.length-1].frame)return void u(this.future,e).push({frame:t,input:n});let o=null;for(let t=0;t<this.history.length;++t)if(this.history[t].isPlayerInputPredicted(e)){o=t;break}let i=this.history[o-1];this.state.deserialize(i.state);for(let t=o;t<this.history.length;++t){let r=this.history[t],i=u(r.inputs,e);if(t===o)i.isPrediction=!1,i.input=n;else{let n=u(this.history[t-1].inputs,e);i.input=n.input.predictNext()}this.state.tick(this.getStateInputs(r.inputs)),r.state=l(this.state.serialize())}if(this.isHost){let t=0;for(;this.history.length>=2&&(this.history[0],this.history[1].allInputsSynced());){let e=h(this.history);t++,this.broadcastState(e.frame,e.state)}}}constructor(t,e,n,r,o,i,s,a,c,u){if(this.isHost=t,this.state=e,this.players=n,this.maxPredictedFrames=o,this.broadcastInput=c,this.pingMeasure=i,this.timestep=s,this.pollInput=a,t){if(!u)throw new Error("Expected a broadcast state function.");this.broadcastState=u}let h=new Map;for(const[t,e]of r.entries())h.set(t,{input:e,isPrediction:!1});this.history=[new xt(0,l(this.state.serialize()),h)],this.future=new Map,this.highestFrameReceived=new Map;for(let t of this.players)this.future.set(t,[]),this.highestFrameReceived.set(t,0)}currentFrame(){return this.history[this.history.length-1].frame}largestFutureSize(){return Math.max(...Array.from(this.future.values()).map((t=>t.length)))}predictedFrames(){for(let t=0;t<this.history.length;++t)if(!this.history[t].allInputsSynced())return this.history.length-t;return 0}shouldStall(){return this.predictedFrames()>this.maxPredictedFrames}tick(){if(this.shouldStall())return;const t=this.history[this.history.length-1],e=new Map;for(const[n,r]of t.inputs.entries())if(n.isLocalPlayer()){let r=this.pollInput();e.set(n,{input:r,isPrediction:!1}),this.broadcastInput(t.frame+1,r)}else if(u(this.future,n).length>0){let t=h(u(this.future,n));e.set(n,{input:t.input,isPrediction:!1})}else e.set(n,{input:r.input.predictNext(),isPrediction:!0});this.state.tick(this.getStateInputs(e)),this.history.push(new xt(t.frame+1,l(this.state.serialize()),e))}getStateInputs(t){let e=new Map;for(const[n,{input:r}]of t.entries())e.set(n,r);return e}start(){setInterval((()=>{let t=1;this.largestFutureSize()>0&&(t=2);for(let e=0;e<t;++e)this.tick()}),this.timestep)}}class At extends s{}const[kt,St]=[600,300],[Pt,Ct]=[10,100],[Mt,Nt]=[10,10],Ot=100,It=kt-100-Pt,jt=300;function Tt(t,e,n){return Math.min(Math.max(t,e),n)}function _t(t,e,n,r,o,i,s,a){return t<i&&e>o&&n<a&&r>s}class Bt extends At{constructor(){super(...arguments),this.leftPaddle=St/2-Ct/2,this.rightPaddle=St/2-Ct/2,this.ballPosition=[kt/2-Mt/2,St/2-Nt/2],this.ballVelocity=[jt,0],this.leftScore=0,this.rightScore=0}tick(t){let e=Bt.timestep/1e3;for(const[n,r]of t.entries()){const t=(r.keysHeld.ArrowDown?1:0)+(r.keysHeld.ArrowUp?-1:0);let o=null;r.touches.length>0?o=r.touches[0].y-Ct/2:r.mousePosition&&(o=r.mousePosition.y-Ct/2),0==n.getID()?o?this.leftPaddle=o:this.leftPaddle+=300*t*e:1==n.getID()&&(o?this.rightPaddle=o:this.rightPaddle+=300*t*e)}if(this.leftPaddle=Tt(this.leftPaddle,0,St-Ct),this.rightPaddle=Tt(this.rightPaddle,0,St-Ct),this.ballPosition[0]+=this.ballVelocity[0]*e,this.ballPosition[1]+=this.ballVelocity[1]*e,this.ballPosition[1]<0&&(this.ballPosition[1]=0,this.ballVelocity[1]=-this.ballVelocity[1]),this.ballPosition[1]>St-Nt&&(this.ballPosition[1]=St-Nt,this.ballVelocity[1]=-this.ballVelocity[1]),_t(this.ballPosition[0],this.ballPosition[0]+Mt,this.ballPosition[1],this.ballPosition[1]+Nt,Ot,Ot+Pt,this.leftPaddle,this.leftPaddle+Ct)){let t=(this.ballPosition[1]+Nt/2-(this.leftPaddle+Ct/2))/Ct;this.ballVelocity[0]=-this.ballVelocity[0],this.ballVelocity[1]=jt*Math.sin(2*t),this.ballPosition[0]=Ot+Pt}if(_t(this.ballPosition[0],this.ballPosition[0]+Mt,this.ballPosition[1],this.ballPosition[1]+Nt,It,It+Pt,this.rightPaddle,this.rightPaddle+Ct)){let t=(this.ballPosition[1]+Nt/2-(this.rightPaddle+Ct/2))/Ct;this.ballVelocity[0]=-this.ballVelocity[0],this.ballVelocity[1]=jt*Math.sin(2*t),this.ballPosition[0]=It-Mt}this.ballPosition[0]>kt&&(this.leftScore+=1,this.ballPosition=[kt/2-Mt/2,St/2-Nt/2],this.ballVelocity=[-300,0]),this.ballPosition[0]<-Nt&&(this.rightScore+=1,this.ballPosition=[kt/2-Mt/2,St/2-Nt/2],this.ballVelocity=[jt,0])}draw(t){const e=t.getContext("2d");e.fillStyle="black",e.fillRect(0,0,t.width,t.height),e.fillStyle="white",e.fillRect(Ot,this.leftPaddle,Pt,Ct),e.fillStyle="white",e.fillRect(It,this.rightPaddle,Pt,Ct),e.fillStyle="white",e.fillRect(this.ballPosition[0],this.ballPosition[1],Mt,Nt),e.font="40px Arial",e.textAlign="center",e.fillText(this.leftScore.toString(),.3*kt,.2*St),e.fillText(this.rightScore.toString(),.7*kt,.2*St)}}Bt.timestep=1e3/60,Bt.canvasSize={width:kt,height:St},new class extends wt{constructor(t){super(t),this.pingMeasure=new bt(.2)}getInitialInputs(t){let e=new Map;for(let n of t)e.set(n,new g);return e}startHost(t,e){var n;x("open"===(null===(n=e.dataChannel)||void 0===n?void 0:n.readyState),"DataChannel must be open."),v.info("Starting a lcokstep host."),this.game=new this.gameClass(this.canvas,t),this.rollbackNetcode=new Et(!0,this.game,t,this.getInitialInputs(t),10,this.pingMeasure,this.gameClass.timestep,(()=>this.inputReader.getInput()),((t,n)=>{e.send({type:"input",frame:t,input:n.serialize()})}),((t,n)=>{e.send({type:"state",frame:t,state:n})})),e.on("data",(n=>{if("input"===n.type){let e=new g;e.deserialize(n.input),this.rollbackNetcode.onRemoteInput(n.frame,t[1],e)}else"ping-req"==n.type?e.send({type:"ping-resp",sent_time:n.sent_time}):"ping-resp"==n.type&&this.pingMeasure.update(Date.now()-n.sent_time)})),console.log("Client has connected... Starting game..."),setInterval((()=>{e.send({type:"ping-req",sent_time:Date.now()})}),100),this.startGameLoop()}startClient(t,e){var n;x("open"===(null===(n=e.dataChannel)||void 0===n?void 0:n.readyState),"DataChannel must be open."),v.info("Starting a lockstep client."),this.game=new this.gameClass(this.canvas,t),this.rollbackNetcode=new Et(!1,this.game,t,this.getInitialInputs(t),10,this.pingMeasure,this.gameClass.timestep,(()=>this.inputReader.getInput()),((t,n)=>{e.send({type:"input",frame:t,input:n.serialize()})})),e.on("data",(n=>{if("input"===n.type){let e=new g;e.deserialize(n.input),this.rollbackNetcode.onRemoteInput(n.frame,t[0],e)}else"state"===n.type?this.rollbackNetcode.onStateSync(n.frame,n.state):"ping-req"==n.type?e.send({type:"ping-resp",sent_time:n.sent_time}):"ping-resp"==n.type&&this.pingMeasure.update(Date.now()-n.sent_time)})),console.log("Successfully connected to server... Starting game..."),setInterval((()=>{e.send({type:"ping-req",sent_time:Date.now()})}),100),this.startGameLoop()}startGameLoop(){this.stats.style.display="inherit",this.rollbackNetcode.start();let t=e=>{this.game.draw(this.canvas);const n=H`
        <div>Netcode Algorithm: Rollback</div>
        <div>Ping: ${this.pingMeasure.average().toFixed(2)} ms +/- ${this.pingMeasure.stddev().toFixed(2)} ms</div>
        <div>History Size: ${this.rollbackNetcode.history.length}</div>
        <div>Frame Number: ${this.rollbackNetcode.currentFrame()}</div>
        <div>Largest Future Size: ${this.rollbackNetcode.largestFutureSize()}</div>
        <div>Predicted Frames: ${this.rollbackNetcode.predictedFrames()}</div>
        <div title="If true, then the other player is running slow, so we wait for them.">Stalling: ${this.rollbackNetcode.shouldStall()}</div>
        ${this.rtcStats}`;st(n,this.stats),requestAnimationFrame(t)};requestAnimationFrame(t)}}(Bt).start()})()})();
//# sourceMappingURL=pong.js.map