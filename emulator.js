/*! For license information please see emulator.js.LICENSE.txt */
(()=>{var t={8068:t=>{function e(){var t=[].slice.call(arguments);function e(e,i){Object.keys(i).forEach((function(s){~t.indexOf(s)||(e[s]=i[s])}))}return function(){for(var t=[].slice.call(arguments),i=0,s={};i<t.length;i++)e(s,t[i]);return s}}function i(t,s,n){var r=e("name","message","stack","constructor","toJSON")(s||{});for(var o in this.message=t||"Unspecified AssertionError",this.showDiff=!1,r)this[o]=r[o];if(n=n||i,Error.captureStackTrace)Error.captureStackTrace(this,n);else try{throw new Error}catch(t){this.stack=t.stack}}t.exports=i,i.prototype=Object.create(Error.prototype),i.prototype.name="AssertionError",i.prototype.constructor=i,i.prototype.toJSON=function(t){var i=e("constructor","toJSON","stack")({name:this.name},this);return!1!==t&&this.stack&&(i.stack=this.stack),i}},5881:(t,e,i)=>{t.exports=i(5422)},5422:(t,e,i)=>{var s=[];e.version="4.3.0",e.AssertionError=i(8068);var n=i(9455);e.use=function(t){return~s.indexOf(t)||(t(e,n),s.push(t)),e},e.util=n;var r=i(9898);e.config=r;var o=i(741);e.use(o);var a=i(5980);e.use(a);var h=i(7983);e.use(h);var l=i(8324);e.use(l);var c=i(9524);e.use(c)},741:(t,e,i)=>{var s=i(9898);t.exports=function(t,e){var i=t.AssertionError,n=e.flag;function r(t,i,s,o){return n(this,"ssfi",s||r),n(this,"lockSsfi",o),n(this,"object",t),n(this,"message",i),e.proxify(this)}t.Assertion=r,Object.defineProperty(r,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),s.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),s.includeStack=t}}),Object.defineProperty(r,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),s.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),s.showDiff=t}}),r.addProperty=function(t,i){e.addProperty(this.prototype,t,i)},r.addMethod=function(t,i){e.addMethod(this.prototype,t,i)},r.addChainableMethod=function(t,i,s){e.addChainableMethod(this.prototype,t,i,s)},r.overwriteProperty=function(t,i){e.overwriteProperty(this.prototype,t,i)},r.overwriteMethod=function(t,i){e.overwriteMethod(this.prototype,t,i)},r.overwriteChainableMethod=function(t,i,s){e.overwriteChainableMethod(this.prototype,t,i,s)},r.prototype.assert=function(t,r,o,a,h,l){var c=e.test(this,arguments);if(!1!==l&&(l=!0),void 0===a&&void 0===h&&(l=!1),!0!==s.showDiff&&(l=!1),!c){r=e.getMessage(this,arguments);var u={actual:e.getActual(this,arguments),expected:a,showDiff:l},p=e.getOperator(this,arguments);throw p&&(u.operator=p),new i(r,u,s.includeStack?this.assert:n(this,"ssfi"))}},Object.defineProperty(r.prototype,"_obj",{get:function(){return n(this,"object")},set:function(t){n(this,"object",t)}})}},9898:t=>{t.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},5980:t=>{t.exports=function(t,e){var i=t.Assertion,s=t.AssertionError,n=e.flag;function r(t,i){i&&n(this,"message",i),t=t.toLowerCase();var s=n(this,"object"),r=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";this.assert(t===e.type(s).toLowerCase(),"expected #{this} to be "+r+t,"expected #{this} not to be "+r+t)}function o(t,i){return e.isNaN(t)&&e.isNaN(i)||t===i}function a(){n(this,"contains",!0)}function h(t,r){r&&n(this,"message",r);var a=n(this,"object"),h=e.type(a).toLowerCase(),l=n(this,"message"),c=n(this,"negate"),u=n(this,"ssfi"),p=n(this,"deep"),d=p?"deep ":"";l=l?l+": ":"";var f=!1;switch(h){case"string":f=-1!==a.indexOf(t);break;case"weakset":if(p)throw new s(l+"unable to use .deep.include with WeakSet",void 0,u);f=a.has(t);break;case"map":var m=p?e.eql:o;a.forEach((function(e){f=f||m(e,t)}));break;case"set":p?a.forEach((function(i){f=f||e.eql(i,t)})):f=a.has(t);break;case"array":f=p?a.some((function(i){return e.eql(i,t)})):-1!==a.indexOf(t);break;default:if(t!==Object(t))throw new s(l+"the given combination of arguments ("+h+" and "+e.type(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+e.type(t).toLowerCase(),void 0,u);var g=Object.keys(t),y=null,b=0;if(g.forEach((function(r){var o=new i(a);if(e.transferFlags(this,o,!0),n(o,"lockSsfi",!0),c&&1!==g.length)try{o.property(r,t[r])}catch(t){if(!e.checkError.compatibleConstructor(t,s))throw t;null===y&&(y=t),b++}else o.property(r,t[r])}),this),c&&g.length>1&&b===g.length)throw y;return}this.assert(f,"expected #{this} to "+d+"include "+e.inspect(t),"expected #{this} to not "+d+"include "+e.inspect(t))}function l(){var t=n(this,"object"),i=e.type(t);this.assert("Arguments"===i,"expected #{this} to be arguments but got "+i,"expected #{this} to not be arguments")}function c(t,e){e&&n(this,"message",e);var i=n(this,"object");if(n(this,"deep")){var s=n(this,"lockSsfi");n(this,"lockSsfi",!0),this.eql(t),n(this,"lockSsfi",s)}else this.assert(t===i,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}function u(t,i){i&&n(this,"message",i),this.assert(e.eql(t,n(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}function p(t,r){r&&n(this,"message",r);var o,a=n(this,"object"),h=n(this,"doLength"),l=n(this,"message"),c=l?l+": ":"",u=n(this,"ssfi"),p=e.type(a).toLowerCase(),d=e.type(t).toLowerCase(),f=!0;if(h&&"map"!==p&&"set"!==p&&new i(a,l,u,!0).to.have.property("length"),h||"date"!==p||"date"===d?"number"===d||!h&&"number"!==p?h||"date"===p||"number"===p?f=!1:o=c+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":o=c+"the argument to above must be a number":o=c+"the argument to above must be a date",f)throw new s(o,void 0,u);if(h){var m,g="length";"map"===p||"set"===p?(g="size",m=a.size):m=a.length,this.assert(m>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,m)}else this.assert(a>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}function d(t,r){r&&n(this,"message",r);var o,a=n(this,"object"),h=n(this,"doLength"),l=n(this,"message"),c=l?l+": ":"",u=n(this,"ssfi"),p=e.type(a).toLowerCase(),d=e.type(t).toLowerCase(),f=!0;if(h&&"map"!==p&&"set"!==p&&new i(a,l,u,!0).to.have.property("length"),h||"date"!==p||"date"===d?"number"===d||!h&&"number"!==p?h||"date"===p||"number"===p?f=!1:o=c+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":o=c+"the argument to least must be a number":o=c+"the argument to least must be a date",f)throw new s(o,void 0,u);if(h){var m,g="length";"map"===p||"set"===p?(g="size",m=a.size):m=a.length,this.assert(m>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,m)}else this.assert(a>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}function f(t,r){r&&n(this,"message",r);var o,a=n(this,"object"),h=n(this,"doLength"),l=n(this,"message"),c=l?l+": ":"",u=n(this,"ssfi"),p=e.type(a).toLowerCase(),d=e.type(t).toLowerCase(),f=!0;if(h&&"map"!==p&&"set"!==p&&new i(a,l,u,!0).to.have.property("length"),h||"date"!==p||"date"===d?"number"===d||!h&&"number"!==p?h||"date"===p||"number"===p?f=!1:o=c+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":o=c+"the argument to below must be a number":o=c+"the argument to below must be a date",f)throw new s(o,void 0,u);if(h){var m,g="length";"map"===p||"set"===p?(g="size",m=a.size):m=a.length,this.assert(m<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,m)}else this.assert(a<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}function m(t,r){r&&n(this,"message",r);var o,a=n(this,"object"),h=n(this,"doLength"),l=n(this,"message"),c=l?l+": ":"",u=n(this,"ssfi"),p=e.type(a).toLowerCase(),d=e.type(t).toLowerCase(),f=!0;if(h&&"map"!==p&&"set"!==p&&new i(a,l,u,!0).to.have.property("length"),h||"date"!==p||"date"===d?"number"===d||!h&&"number"!==p?h||"date"===p||"number"===p?f=!1:o=c+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date":o=c+"the argument to most must be a number":o=c+"the argument to most must be a date",f)throw new s(o,void 0,u);if(h){var m,g="length";"map"===p||"set"===p?(g="size",m=a.size):m=a.length,this.assert(m<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,m)}else this.assert(a<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}function g(t,i){i&&n(this,"message",i);var r=n(this,"object"),o=n(this,"ssfi"),a=n(this,"message");try{var h=r instanceof t}catch(i){if(i instanceof TypeError)throw new s((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+e.type(t)+" was given.",void 0,o);throw i}var l=e.getName(t);null===l&&(l="an unnamed constructor"),this.assert(h,"expected #{this} to be an instance of "+l,"expected #{this} to not be an instance of "+l)}function y(t,i,r){r&&n(this,"message",r);var o=n(this,"nested"),a=n(this,"own"),h=n(this,"message"),l=n(this,"object"),c=n(this,"ssfi"),u=typeof t;if(h=h?h+": ":"",o){if("string"!==u)throw new s(h+"the argument to property must be a string when using nested syntax",void 0,c)}else if("string"!==u&&"number"!==u&&"symbol"!==u)throw new s(h+"the argument to property must be a string, number, or symbol",void 0,c);if(o&&a)throw new s(h+'The "nested" and "own" flags cannot be combined.',void 0,c);if(null==l)throw new s(h+"Target cannot be null or undefined.",void 0,c);var p,d=n(this,"deep"),f=n(this,"negate"),m=o?e.getPathInfo(l,t):null,g=o?m.value:l[t],y="";d&&(y+="deep "),a&&(y+="own "),o&&(y+="nested "),y+="property ",p=a?Object.prototype.hasOwnProperty.call(l,t):o?m.exists:e.hasProperty(l,t),f&&1!==arguments.length||this.assert(p,"expected #{this} to have "+y+e.inspect(t),"expected #{this} to not have "+y+e.inspect(t)),arguments.length>1&&this.assert(p&&(d?e.eql(i,g):i===g),"expected #{this} to have "+y+e.inspect(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+y+e.inspect(t)+" of #{act}",i,g),n(this,"object",g)}function b(t,e,i){n(this,"own",!0),y.apply(this,arguments)}function R(t,i,s){"string"==typeof i&&(s=i,i=null),s&&n(this,"message",s);var r=n(this,"object"),o=Object.getOwnPropertyDescriptor(Object(r),t);o&&i?this.assert(e.eql(i,o),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to match "+e.inspect(i)+", got "+e.inspect(o),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to not match "+e.inspect(i),i,o,!0):this.assert(o,"expected #{this} to have an own property descriptor for "+e.inspect(t),"expected #{this} to not have an own property descriptor for "+e.inspect(t)),n(this,"object",o)}function _(){n(this,"doLength",!0)}function S(t,s){s&&n(this,"message",s);var r,o=n(this,"object"),a=e.type(o).toLowerCase(),h=n(this,"message"),l=n(this,"ssfi"),c="length";switch(a){case"map":case"set":c="size",r=o.size;break;default:new i(o,h,l,!0).to.have.property("length"),r=o.length}this.assert(r==t,"expected #{this} to have a "+c+" of #{exp} but got #{act}","expected #{this} to not have a "+c+" of #{act}",t,r)}function v(t,e){e&&n(this,"message",e);var i=n(this,"object");this.assert(t.exec(i),"expected #{this} to match "+t,"expected #{this} not to match "+t)}function w(t){var i,r,o=n(this,"object"),a=e.type(o),h=e.type(t),l=n(this,"ssfi"),c=n(this,"deep"),u="",p=!0,d=n(this,"message"),f=(d=d?d+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)u=c?"deeply ":"",r=[],o.forEach((function(t,e){r.push(e)})),"Array"!==h&&(t=Array.prototype.slice.call(arguments));else{switch(r=e.getOwnEnumerableProperties(o),h){case"Array":if(arguments.length>1)throw new s(f,void 0,l);break;case"Object":if(arguments.length>1)throw new s(f,void 0,l);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map((function(t){return"symbol"==typeof t?t:String(t)}))}if(!t.length)throw new s(d+"keys required",void 0,l);var m=t.length,g=n(this,"any"),y=n(this,"all"),b=t;if(g||y||(y=!0),g&&(p=b.some((function(t){return r.some((function(i){return c?e.eql(t,i):t===i}))}))),y&&(p=b.every((function(t){return r.some((function(i){return c?e.eql(t,i):t===i}))})),n(this,"contains")||(p=p&&t.length==r.length)),m>1){var R=(t=t.map((function(t){return e.inspect(t)}))).pop();y&&(i=t.join(", ")+", and "+R),g&&(i=t.join(", ")+", or "+R)}else i=e.inspect(t[0]);i=(m>1?"keys ":"key ")+i,i=(n(this,"contains")?"contain ":"have ")+i,this.assert(p,"expected #{this} to "+u+i,"expected #{this} to not "+u+i,b.slice(0).sort(e.compareByInspect),r.sort(e.compareByInspect),!0)}function A(t,s,r){r&&n(this,"message",r);var o,a=n(this,"object"),h=n(this,"ssfi"),l=n(this,"message"),c=n(this,"negate")||!1;new i(a,l,h,!0).is.a("function"),(t instanceof RegExp||"string"==typeof t)&&(s=t,t=null);try{a()}catch(t){o=t}var u=void 0===t&&void 0===s,p=Boolean(t&&s),d=!1,f=!1;if(u||!u&&!c){var m="an error";t instanceof Error?m="#{exp}":t&&(m=e.checkError.getConstructorName(t)),this.assert(o,"expected #{this} to throw "+m,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),o instanceof Error?o.toString():"string"==typeof o?o:o&&e.checkError.getConstructorName(o))}if(t&&o&&(t instanceof Error&&e.checkError.compatibleInstance(o,t)===c&&(p&&c?d=!0:this.assert(c,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(o&&!c?" but #{act} was thrown":""),t.toString(),o.toString())),e.checkError.compatibleConstructor(o,t)===c&&(p&&c?d=!0:this.assert(c,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(o?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&e.checkError.getConstructorName(t),o instanceof Error?o.toString():o&&e.checkError.getConstructorName(o)))),o&&null!=s){var g="including";s instanceof RegExp&&(g="matching"),e.checkError.compatibleMessage(o,s)===c&&(p&&c?f=!0:this.assert(c,"expected #{this} to throw error "+g+" #{exp} but got #{act}","expected #{this} to throw error not "+g+" #{exp}",s,e.checkError.getMessage(o)))}d&&f&&this.assert(c,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(o?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&e.checkError.getConstructorName(t),o instanceof Error?o.toString():o&&e.checkError.getConstructorName(o)),n(this,"object",o)}function C(t,i){i&&n(this,"message",i);var s=n(this,"object"),r=n(this,"itself"),o="function"!=typeof s||r?s[t]:s.prototype[t];this.assert("function"==typeof o,"expected #{this} to respond to "+e.inspect(t),"expected #{this} to not respond to "+e.inspect(t))}function E(t,i){i&&n(this,"message",i);var s=t(n(this,"object"));this.assert(s,"expected #{this} to satisfy "+e.objDisplay(t),"expected #{this} to not satisfy"+e.objDisplay(t),!n(this,"negate"),s)}function I(t,e,r){r&&n(this,"message",r);var o=n(this,"object"),a=n(this,"message"),h=n(this,"ssfi");if(new i(o,a,h,!0).is.a("number"),"number"!=typeof t||"number"!=typeof e)throw new s((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers"+(void 0===e?", and a delta is required":""),void 0,h);this.assert(Math.abs(o-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}function N(t,e,s){s&&n(this,"message",s);var r,o=n(this,"object"),a=n(this,"message"),h=n(this,"ssfi");new i(o,a,h,!0).is.a("function"),e?(new i(t,a,h,!0).to.have.property(e),r=t[e]):(new i(t,a,h,!0).is.a("function"),r=t()),o();var l=null==e?t():t[e],c=null==e?r:"."+e;n(this,"deltaMsgObj",c),n(this,"initialDeltaValue",r),n(this,"finalDeltaValue",l),n(this,"deltaBehavior","change"),n(this,"realDelta",l!==r),this.assert(r!==l,"expected "+c+" to change","expected "+c+" to not change")}function D(t,e,s){s&&n(this,"message",s);var r,o=n(this,"object"),a=n(this,"message"),h=n(this,"ssfi");new i(o,a,h,!0).is.a("function"),e?(new i(t,a,h,!0).to.have.property(e),r=t[e]):(new i(t,a,h,!0).is.a("function"),r=t()),new i(r,a,h,!0).is.a("number"),o();var l=null==e?t():t[e],c=null==e?r:"."+e;n(this,"deltaMsgObj",c),n(this,"initialDeltaValue",r),n(this,"finalDeltaValue",l),n(this,"deltaBehavior","increase"),n(this,"realDelta",l-r),this.assert(l-r>0,"expected "+c+" to increase","expected "+c+" to not increase")}function T(t,e,s){s&&n(this,"message",s);var r,o=n(this,"object"),a=n(this,"message"),h=n(this,"ssfi");new i(o,a,h,!0).is.a("function"),e?(new i(t,a,h,!0).to.have.property(e),r=t[e]):(new i(t,a,h,!0).is.a("function"),r=t()),new i(r,a,h,!0).is.a("number"),o();var l=null==e?t():t[e],c=null==e?r:"."+e;n(this,"deltaMsgObj",c),n(this,"initialDeltaValue",r),n(this,"finalDeltaValue",l),n(this,"deltaBehavior","decrease"),n(this,"realDelta",r-l),this.assert(l-r<0,"expected "+c+" to decrease","expected "+c+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(t){i.addProperty(t)})),i.addProperty("not",(function(){n(this,"negate",!0)})),i.addProperty("deep",(function(){n(this,"deep",!0)})),i.addProperty("nested",(function(){n(this,"nested",!0)})),i.addProperty("own",(function(){n(this,"own",!0)})),i.addProperty("ordered",(function(){n(this,"ordered",!0)})),i.addProperty("any",(function(){n(this,"any",!0),n(this,"all",!1)})),i.addProperty("all",(function(){n(this,"all",!0),n(this,"any",!1)})),i.addChainableMethod("an",r),i.addChainableMethod("a",r),i.addChainableMethod("include",h,a),i.addChainableMethod("contain",h,a),i.addChainableMethod("contains",h,a),i.addChainableMethod("includes",h,a),i.addProperty("ok",(function(){this.assert(n(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),i.addProperty("true",(function(){this.assert(!0===n(this,"object"),"expected #{this} to be true","expected #{this} to be false",!n(this,"negate"))})),i.addProperty("false",(function(){this.assert(!1===n(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!n(this,"negate"))})),i.addProperty("null",(function(){this.assert(null===n(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),i.addProperty("undefined",(function(){this.assert(void 0===n(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),i.addProperty("NaN",(function(){this.assert(e.isNaN(n(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),i.addProperty("exist",(function(){var t=n(this,"object");this.assert(null!=t,"expected #{this} to exist","expected #{this} to not exist")})),i.addProperty("empty",(function(){var t,i=n(this,"object"),r=n(this,"ssfi"),o=n(this,"message");switch(o=o?o+": ":"",e.type(i).toLowerCase()){case"array":case"string":t=i.length;break;case"map":case"set":t=i.size;break;case"weakmap":case"weakset":throw new s(o+".empty was passed a weak collection",void 0,r);case"function":var a=o+".empty was passed a function "+e.getName(i);throw new s(a.trim(),void 0,r);default:if(i!==Object(i))throw new s(o+".empty was passed non-string primitive "+e.inspect(i),void 0,r);t=Object.keys(i).length}this.assert(0===t,"expected #{this} to be empty","expected #{this} not to be empty")})),i.addProperty("arguments",l),i.addProperty("Arguments",l),i.addMethod("equal",c),i.addMethod("equals",c),i.addMethod("eq",c),i.addMethod("eql",u),i.addMethod("eqls",u),i.addMethod("above",p),i.addMethod("gt",p),i.addMethod("greaterThan",p),i.addMethod("least",d),i.addMethod("gte",d),i.addMethod("below",f),i.addMethod("lt",f),i.addMethod("lessThan",f),i.addMethod("most",m),i.addMethod("lte",m),i.addMethod("within",(function(t,r,o){o&&n(this,"message",o);var a,h=n(this,"object"),l=n(this,"doLength"),c=n(this,"message"),u=c?c+": ":"",p=n(this,"ssfi"),d=e.type(h).toLowerCase(),f=e.type(t).toLowerCase(),m=e.type(r).toLowerCase(),g=!0,y="date"===f&&"date"===m?t.toUTCString()+".."+r.toUTCString():t+".."+r;if(l&&"map"!==d&&"set"!==d&&new i(h,c,p,!0).to.have.property("length"),l||"date"!==d||"date"===f&&"date"===m?"number"===f&&"number"===m||!l&&"number"!==d?l||"date"===d||"number"===d?g=!1:a=u+"expected "+("string"===d?"'"+h+"'":h)+" to be a number or a date":a=u+"the arguments to within must be numbers":a=u+"the arguments to within must be dates",g)throw new s(a,void 0,p);if(l){var b,R="length";"map"===d||"set"===d?(R="size",b=h.size):b=h.length,this.assert(b>=t&&b<=r,"expected #{this} to have a "+R+" within "+y,"expected #{this} to not have a "+R+" within "+y)}else this.assert(h>=t&&h<=r,"expected #{this} to be within "+y,"expected #{this} to not be within "+y)})),i.addMethod("instanceof",g),i.addMethod("instanceOf",g),i.addMethod("property",y),i.addMethod("ownProperty",b),i.addMethod("haveOwnProperty",b),i.addMethod("ownPropertyDescriptor",R),i.addMethod("haveOwnPropertyDescriptor",R),i.addChainableMethod("length",S,_),i.addChainableMethod("lengthOf",S,_),i.addMethod("match",v),i.addMethod("matches",v),i.addMethod("string",(function(t,s){s&&n(this,"message",s);var r=n(this,"object"),o=n(this,"message"),a=n(this,"ssfi");new i(r,o,a,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+e.inspect(t),"expected #{this} to not contain "+e.inspect(t))})),i.addMethod("keys",w),i.addMethod("key",w),i.addMethod("throw",A),i.addMethod("throws",A),i.addMethod("Throw",A),i.addMethod("respondTo",C),i.addMethod("respondsTo",C),i.addProperty("itself",(function(){n(this,"itself",!0)})),i.addMethod("satisfy",E),i.addMethod("satisfies",E),i.addMethod("closeTo",I),i.addMethod("approximately",I),i.addMethod("members",(function(t,s){s&&n(this,"message",s);var r=n(this,"object"),o=n(this,"message"),a=n(this,"ssfi");new i(r,o,a,!0).to.be.an("array"),new i(t,o,a,!0).to.be.an("array");var h,l,c,u=n(this,"contains"),p=n(this,"ordered");u?(l="expected #{this} to be "+(h=p?"an ordered superset":"a superset")+" of #{exp}",c="expected #{this} to not be "+h+" of #{exp}"):(l="expected #{this} to have the same "+(h=p?"ordered members":"members")+" as #{exp}",c="expected #{this} to not have the same "+h+" as #{exp}");var d=n(this,"deep")?e.eql:void 0;this.assert(function(t,e,i,s,n){if(!s){if(t.length!==e.length)return!1;e=e.slice()}return t.every((function(t,r){if(n)return i?i(t,e[r]):t===e[r];if(!i){var o=e.indexOf(t);return-1!==o&&(s||e.splice(o,1),!0)}return e.some((function(n,r){return!!i(t,n)&&(s||e.splice(r,1),!0)}))}))}(t,r,d,u,p),l,c,t,r,!0)})),i.addMethod("oneOf",(function(t,e){e&&n(this,"message",e);var s=n(this,"object"),r=n(this,"message"),o=n(this,"ssfi"),a=n(this,"contains");new i(t,r,o,!0).to.be.an("array"),a?this.assert(t.some((function(t){return s.indexOf(t)>-1})),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,s):this.assert(t.indexOf(s)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,s)})),i.addMethod("change",N),i.addMethod("changes",N),i.addMethod("increase",D),i.addMethod("increases",D),i.addMethod("decrease",T),i.addMethod("decreases",T),i.addMethod("by",(function(t,e){e&&n(this,"message",e);var i,s=n(this,"deltaMsgObj"),r=n(this,"initialDeltaValue"),o=n(this,"finalDeltaValue"),a=n(this,"deltaBehavior"),h=n(this,"realDelta");i="change"===a?Math.abs(o-r)===Math.abs(t):h===Math.abs(t),this.assert(i,"expected "+s+" to "+a+" by "+t,"expected "+s+" to not "+a+" by "+t)})),i.addProperty("extensible",(function(){var t=n(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")})),i.addProperty("sealed",(function(){var t=n(this,"object"),e=t!==Object(t)||Object.isSealed(t);this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")})),i.addProperty("frozen",(function(){var t=n(this,"object"),e=t!==Object(t)||Object.isFrozen(t);this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")})),i.addProperty("finite",(function(t){var e=n(this,"object");this.assert("number"==typeof e&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},9524:t=>{t.exports=function(t,e){var i=t.Assertion,s=e.flag,n=t.assert=function(e,s){new i(null,null,t.assert,!0).assert(e,s,"[ negation message unavailable ]")};n.fail=function(e,i,s,r){throw arguments.length<2&&(s=e,e=void 0),s=s||"assert.fail()",new t.AssertionError(s,{actual:e,expected:i,operator:r},n.fail)},n.isOk=function(t,e){new i(t,e,n.isOk,!0).is.ok},n.isNotOk=function(t,e){new i(t,e,n.isNotOk,!0).is.not.ok},n.equal=function(t,e,r){var o=new i(t,r,n.equal,!0);o.assert(e==s(o,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)},n.notEqual=function(t,e,r){var o=new i(t,r,n.notEqual,!0);o.assert(e!=s(o,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)},n.strictEqual=function(t,e,s){new i(t,s,n.strictEqual,!0).to.equal(e)},n.notStrictEqual=function(t,e,s){new i(t,s,n.notStrictEqual,!0).to.not.equal(e)},n.deepEqual=n.deepStrictEqual=function(t,e,s){new i(t,s,n.deepEqual,!0).to.eql(e)},n.notDeepEqual=function(t,e,s){new i(t,s,n.notDeepEqual,!0).to.not.eql(e)},n.isAbove=function(t,e,s){new i(t,s,n.isAbove,!0).to.be.above(e)},n.isAtLeast=function(t,e,s){new i(t,s,n.isAtLeast,!0).to.be.least(e)},n.isBelow=function(t,e,s){new i(t,s,n.isBelow,!0).to.be.below(e)},n.isAtMost=function(t,e,s){new i(t,s,n.isAtMost,!0).to.be.most(e)},n.isTrue=function(t,e){new i(t,e,n.isTrue,!0).is.true},n.isNotTrue=function(t,e){new i(t,e,n.isNotTrue,!0).to.not.equal(!0)},n.isFalse=function(t,e){new i(t,e,n.isFalse,!0).is.false},n.isNotFalse=function(t,e){new i(t,e,n.isNotFalse,!0).to.not.equal(!1)},n.isNull=function(t,e){new i(t,e,n.isNull,!0).to.equal(null)},n.isNotNull=function(t,e){new i(t,e,n.isNotNull,!0).to.not.equal(null)},n.isNaN=function(t,e){new i(t,e,n.isNaN,!0).to.be.NaN},n.isNotNaN=function(t,e){new i(t,e,n.isNotNaN,!0).not.to.be.NaN},n.exists=function(t,e){new i(t,e,n.exists,!0).to.exist},n.notExists=function(t,e){new i(t,e,n.notExists,!0).to.not.exist},n.isUndefined=function(t,e){new i(t,e,n.isUndefined,!0).to.equal(void 0)},n.isDefined=function(t,e){new i(t,e,n.isDefined,!0).to.not.equal(void 0)},n.isFunction=function(t,e){new i(t,e,n.isFunction,!0).to.be.a("function")},n.isNotFunction=function(t,e){new i(t,e,n.isNotFunction,!0).to.not.be.a("function")},n.isObject=function(t,e){new i(t,e,n.isObject,!0).to.be.a("object")},n.isNotObject=function(t,e){new i(t,e,n.isNotObject,!0).to.not.be.a("object")},n.isArray=function(t,e){new i(t,e,n.isArray,!0).to.be.an("array")},n.isNotArray=function(t,e){new i(t,e,n.isNotArray,!0).to.not.be.an("array")},n.isString=function(t,e){new i(t,e,n.isString,!0).to.be.a("string")},n.isNotString=function(t,e){new i(t,e,n.isNotString,!0).to.not.be.a("string")},n.isNumber=function(t,e){new i(t,e,n.isNumber,!0).to.be.a("number")},n.isNotNumber=function(t,e){new i(t,e,n.isNotNumber,!0).to.not.be.a("number")},n.isFinite=function(t,e){new i(t,e,n.isFinite,!0).to.be.finite},n.isBoolean=function(t,e){new i(t,e,n.isBoolean,!0).to.be.a("boolean")},n.isNotBoolean=function(t,e){new i(t,e,n.isNotBoolean,!0).to.not.be.a("boolean")},n.typeOf=function(t,e,s){new i(t,s,n.typeOf,!0).to.be.a(e)},n.notTypeOf=function(t,e,s){new i(t,s,n.notTypeOf,!0).to.not.be.a(e)},n.instanceOf=function(t,e,s){new i(t,s,n.instanceOf,!0).to.be.instanceOf(e)},n.notInstanceOf=function(t,e,s){new i(t,s,n.notInstanceOf,!0).to.not.be.instanceOf(e)},n.include=function(t,e,s){new i(t,s,n.include,!0).include(e)},n.notInclude=function(t,e,s){new i(t,s,n.notInclude,!0).not.include(e)},n.deepInclude=function(t,e,s){new i(t,s,n.deepInclude,!0).deep.include(e)},n.notDeepInclude=function(t,e,s){new i(t,s,n.notDeepInclude,!0).not.deep.include(e)},n.nestedInclude=function(t,e,s){new i(t,s,n.nestedInclude,!0).nested.include(e)},n.notNestedInclude=function(t,e,s){new i(t,s,n.notNestedInclude,!0).not.nested.include(e)},n.deepNestedInclude=function(t,e,s){new i(t,s,n.deepNestedInclude,!0).deep.nested.include(e)},n.notDeepNestedInclude=function(t,e,s){new i(t,s,n.notDeepNestedInclude,!0).not.deep.nested.include(e)},n.ownInclude=function(t,e,s){new i(t,s,n.ownInclude,!0).own.include(e)},n.notOwnInclude=function(t,e,s){new i(t,s,n.notOwnInclude,!0).not.own.include(e)},n.deepOwnInclude=function(t,e,s){new i(t,s,n.deepOwnInclude,!0).deep.own.include(e)},n.notDeepOwnInclude=function(t,e,s){new i(t,s,n.notDeepOwnInclude,!0).not.deep.own.include(e)},n.match=function(t,e,s){new i(t,s,n.match,!0).to.match(e)},n.notMatch=function(t,e,s){new i(t,s,n.notMatch,!0).to.not.match(e)},n.property=function(t,e,s){new i(t,s,n.property,!0).to.have.property(e)},n.notProperty=function(t,e,s){new i(t,s,n.notProperty,!0).to.not.have.property(e)},n.propertyVal=function(t,e,s,r){new i(t,r,n.propertyVal,!0).to.have.property(e,s)},n.notPropertyVal=function(t,e,s,r){new i(t,r,n.notPropertyVal,!0).to.not.have.property(e,s)},n.deepPropertyVal=function(t,e,s,r){new i(t,r,n.deepPropertyVal,!0).to.have.deep.property(e,s)},n.notDeepPropertyVal=function(t,e,s,r){new i(t,r,n.notDeepPropertyVal,!0).to.not.have.deep.property(e,s)},n.ownProperty=function(t,e,s){new i(t,s,n.ownProperty,!0).to.have.own.property(e)},n.notOwnProperty=function(t,e,s){new i(t,s,n.notOwnProperty,!0).to.not.have.own.property(e)},n.ownPropertyVal=function(t,e,s,r){new i(t,r,n.ownPropertyVal,!0).to.have.own.property(e,s)},n.notOwnPropertyVal=function(t,e,s,r){new i(t,r,n.notOwnPropertyVal,!0).to.not.have.own.property(e,s)},n.deepOwnPropertyVal=function(t,e,s,r){new i(t,r,n.deepOwnPropertyVal,!0).to.have.deep.own.property(e,s)},n.notDeepOwnPropertyVal=function(t,e,s,r){new i(t,r,n.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,s)},n.nestedProperty=function(t,e,s){new i(t,s,n.nestedProperty,!0).to.have.nested.property(e)},n.notNestedProperty=function(t,e,s){new i(t,s,n.notNestedProperty,!0).to.not.have.nested.property(e)},n.nestedPropertyVal=function(t,e,s,r){new i(t,r,n.nestedPropertyVal,!0).to.have.nested.property(e,s)},n.notNestedPropertyVal=function(t,e,s,r){new i(t,r,n.notNestedPropertyVal,!0).to.not.have.nested.property(e,s)},n.deepNestedPropertyVal=function(t,e,s,r){new i(t,r,n.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,s)},n.notDeepNestedPropertyVal=function(t,e,s,r){new i(t,r,n.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,s)},n.lengthOf=function(t,e,s){new i(t,s,n.lengthOf,!0).to.have.lengthOf(e)},n.hasAnyKeys=function(t,e,s){new i(t,s,n.hasAnyKeys,!0).to.have.any.keys(e)},n.hasAllKeys=function(t,e,s){new i(t,s,n.hasAllKeys,!0).to.have.all.keys(e)},n.containsAllKeys=function(t,e,s){new i(t,s,n.containsAllKeys,!0).to.contain.all.keys(e)},n.doesNotHaveAnyKeys=function(t,e,s){new i(t,s,n.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)},n.doesNotHaveAllKeys=function(t,e,s){new i(t,s,n.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)},n.hasAnyDeepKeys=function(t,e,s){new i(t,s,n.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)},n.hasAllDeepKeys=function(t,e,s){new i(t,s,n.hasAllDeepKeys,!0).to.have.all.deep.keys(e)},n.containsAllDeepKeys=function(t,e,s){new i(t,s,n.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)},n.doesNotHaveAnyDeepKeys=function(t,e,s){new i(t,s,n.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)},n.doesNotHaveAllDeepKeys=function(t,e,s){new i(t,s,n.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)},n.throws=function(t,e,r,o){("string"==typeof e||e instanceof RegExp)&&(r=e,e=null);var a=new i(t,o,n.throws,!0).to.throw(e,r);return s(a,"object")},n.doesNotThrow=function(t,e,s,r){("string"==typeof e||e instanceof RegExp)&&(s=e,e=null),new i(t,r,n.doesNotThrow,!0).to.not.throw(e,s)},n.operator=function(r,o,a,h){var l;switch(o){case"==":l=r==a;break;case"===":l=r===a;break;case">":l=r>a;break;case">=":l=r>=a;break;case"<":l=r<a;break;case"<=":l=r<=a;break;case"!=":l=r!=a;break;case"!==":l=r!==a;break;default:throw h=h?h+": ":h,new t.AssertionError(h+'Invalid operator "'+o+'"',void 0,n.operator)}var c=new i(l,h,n.operator,!0);c.assert(!0===s(c,"object"),"expected "+e.inspect(r)+" to be "+o+" "+e.inspect(a),"expected "+e.inspect(r)+" to not be "+o+" "+e.inspect(a))},n.closeTo=function(t,e,s,r){new i(t,r,n.closeTo,!0).to.be.closeTo(e,s)},n.approximately=function(t,e,s,r){new i(t,r,n.approximately,!0).to.be.approximately(e,s)},n.sameMembers=function(t,e,s){new i(t,s,n.sameMembers,!0).to.have.same.members(e)},n.notSameMembers=function(t,e,s){new i(t,s,n.notSameMembers,!0).to.not.have.same.members(e)},n.sameDeepMembers=function(t,e,s){new i(t,s,n.sameDeepMembers,!0).to.have.same.deep.members(e)},n.notSameDeepMembers=function(t,e,s){new i(t,s,n.notSameDeepMembers,!0).to.not.have.same.deep.members(e)},n.sameOrderedMembers=function(t,e,s){new i(t,s,n.sameOrderedMembers,!0).to.have.same.ordered.members(e)},n.notSameOrderedMembers=function(t,e,s){new i(t,s,n.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)},n.sameDeepOrderedMembers=function(t,e,s){new i(t,s,n.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)},n.notSameDeepOrderedMembers=function(t,e,s){new i(t,s,n.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)},n.includeMembers=function(t,e,s){new i(t,s,n.includeMembers,!0).to.include.members(e)},n.notIncludeMembers=function(t,e,s){new i(t,s,n.notIncludeMembers,!0).to.not.include.members(e)},n.includeDeepMembers=function(t,e,s){new i(t,s,n.includeDeepMembers,!0).to.include.deep.members(e)},n.notIncludeDeepMembers=function(t,e,s){new i(t,s,n.notIncludeDeepMembers,!0).to.not.include.deep.members(e)},n.includeOrderedMembers=function(t,e,s){new i(t,s,n.includeOrderedMembers,!0).to.include.ordered.members(e)},n.notIncludeOrderedMembers=function(t,e,s){new i(t,s,n.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)},n.includeDeepOrderedMembers=function(t,e,s){new i(t,s,n.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)},n.notIncludeDeepOrderedMembers=function(t,e,s){new i(t,s,n.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)},n.oneOf=function(t,e,s){new i(t,s,n.oneOf,!0).to.be.oneOf(e)},n.changes=function(t,e,s,r){3===arguments.length&&"function"==typeof e&&(r=s,s=null),new i(t,r,n.changes,!0).to.change(e,s)},n.changesBy=function(t,e,s,r,o){if(4===arguments.length&&"function"==typeof e){var a=r;r=s,o=a}else 3===arguments.length&&(r=s,s=null);new i(t,o,n.changesBy,!0).to.change(e,s).by(r)},n.doesNotChange=function(t,e,s,r){return 3===arguments.length&&"function"==typeof e&&(r=s,s=null),new i(t,r,n.doesNotChange,!0).to.not.change(e,s)},n.changesButNotBy=function(t,e,s,r,o){if(4===arguments.length&&"function"==typeof e){var a=r;r=s,o=a}else 3===arguments.length&&(r=s,s=null);new i(t,o,n.changesButNotBy,!0).to.change(e,s).but.not.by(r)},n.increases=function(t,e,s,r){return 3===arguments.length&&"function"==typeof e&&(r=s,s=null),new i(t,r,n.increases,!0).to.increase(e,s)},n.increasesBy=function(t,e,s,r,o){if(4===arguments.length&&"function"==typeof e){var a=r;r=s,o=a}else 3===arguments.length&&(r=s,s=null);new i(t,o,n.increasesBy,!0).to.increase(e,s).by(r)},n.doesNotIncrease=function(t,e,s,r){return 3===arguments.length&&"function"==typeof e&&(r=s,s=null),new i(t,r,n.doesNotIncrease,!0).to.not.increase(e,s)},n.increasesButNotBy=function(t,e,s,r,o){if(4===arguments.length&&"function"==typeof e){var a=r;r=s,o=a}else 3===arguments.length&&(r=s,s=null);new i(t,o,n.increasesButNotBy,!0).to.increase(e,s).but.not.by(r)},n.decreases=function(t,e,s,r){return 3===arguments.length&&"function"==typeof e&&(r=s,s=null),new i(t,r,n.decreases,!0).to.decrease(e,s)},n.decreasesBy=function(t,e,s,r,o){if(4===arguments.length&&"function"==typeof e){var a=r;r=s,o=a}else 3===arguments.length&&(r=s,s=null);new i(t,o,n.decreasesBy,!0).to.decrease(e,s).by(r)},n.doesNotDecrease=function(t,e,s,r){return 3===arguments.length&&"function"==typeof e&&(r=s,s=null),new i(t,r,n.doesNotDecrease,!0).to.not.decrease(e,s)},n.doesNotDecreaseBy=function(t,e,s,r,o){if(4===arguments.length&&"function"==typeof e){var a=r;r=s,o=a}else 3===arguments.length&&(r=s,s=null);return new i(t,o,n.doesNotDecreaseBy,!0).to.not.decrease(e,s).by(r)},n.decreasesButNotBy=function(t,e,s,r,o){if(4===arguments.length&&"function"==typeof e){var a=r;r=s,o=a}else 3===arguments.length&&(r=s,s=null);new i(t,o,n.decreasesButNotBy,!0).to.decrease(e,s).but.not.by(r)},n.ifError=function(t){if(t)throw t},n.isExtensible=function(t,e){new i(t,e,n.isExtensible,!0).to.be.extensible},n.isNotExtensible=function(t,e){new i(t,e,n.isNotExtensible,!0).to.not.be.extensible},n.isSealed=function(t,e){new i(t,e,n.isSealed,!0).to.be.sealed},n.isNotSealed=function(t,e){new i(t,e,n.isNotSealed,!0).to.not.be.sealed},n.isFrozen=function(t,e){new i(t,e,n.isFrozen,!0).to.be.frozen},n.isNotFrozen=function(t,e){new i(t,e,n.isNotFrozen,!0).to.not.be.frozen},n.isEmpty=function(t,e){new i(t,e,n.isEmpty,!0).to.be.empty},n.isNotEmpty=function(t,e){new i(t,e,n.isNotEmpty,!0).to.not.be.empty},function t(e,i){return n[i]=n[e],t}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},7983:t=>{t.exports=function(t,e){t.expect=function(e,i){return new t.Assertion(e,i)},t.expect.fail=function(e,i,s,n){throw arguments.length<2&&(s=e,e=void 0),s=s||"expect.fail()",new t.AssertionError(s,{actual:e,expected:i,operator:n},t.expect.fail)}}},8324:t=>{t.exports=function(t,e){var i=t.Assertion;function s(){Object.defineProperty(Object.prototype,"should",{set:function(t){Object.defineProperty(this,"should",{value:t,enumerable:!0,configurable:!0,writable:!0})},get:function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol||"function"==typeof BigInt&&this instanceof BigInt?new i(this.valueOf(),null,t):new i(this,null,t)},configurable:!0});var e={fail:function(i,s,n,r){throw arguments.length<2&&(n=i,i=void 0),n=n||"should.fail()",new t.AssertionError(n,{actual:i,expected:s,operator:r},e.fail)},equal:function(t,e,s){new i(t,s).to.equal(e)},Throw:function(t,e,s,n){new i(t,n).to.Throw(e,s)},exist:function(t,e){new i(t,e).to.exist},not:{}};return e.not.equal=function(t,e,s){new i(t,s).to.not.equal(e)},e.not.Throw=function(t,e,s,n){new i(t,n).to.not.Throw(e,s)},e.not.exist=function(t,e){new i(t,e).to.not.exist},e.throw=e.Throw,e.not.throw=e.not.Throw,e}t.should=s,t.Should=s}},9056:(t,e,i)=>{var s=i(2422),n=i(5422),r=i(4390),o=i(5893),a=i(626),h="function"==typeof Object.setPrototypeOf,l=function(){},c=Object.getOwnPropertyNames(l).filter((function(t){var e=Object.getOwnPropertyDescriptor(l,t);return"object"!=typeof e||!e.configurable})),u=Function.prototype.call,p=Function.prototype.apply;t.exports=function(t,e,i,l){"function"!=typeof l&&(l=function(){});var d={method:i,chainingBehavior:l};t.__methods||(t.__methods={}),t.__methods[e]=d,Object.defineProperty(t,e,{get:function(){d.chainingBehavior.call(this);var i=function(){r(this,"lockSsfi")||r(this,"ssfi",i);var t=d.method.apply(this,arguments);if(void 0!==t)return t;var e=new n.Assertion;return a(this,e),e};if(s(i,e,!0),h){var l=Object.create(this);l.call=u,l.apply=p,Object.setPrototypeOf(i,l)}else Object.getOwnPropertyNames(t).forEach((function(e){if(-1===c.indexOf(e)){var s=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,s)}}));return a(this,i),o(i)},configurable:!0})}},2422:t=>{var e=Object.getOwnPropertyDescriptor((function(){}),"length");t.exports=function(t,i,s){return e.configurable?(Object.defineProperty(t,"length",{get:function(){if(s)throw Error("Invalid Chai property: "+i+'.length. Due to a compatibility issue, "length" cannot directly follow "'+i+'". Use "'+i+'.lengthOf" instead.');throw Error("Invalid Chai property: "+i+'.length. See docs for proper usage of "'+i+'".')}}),t):t}},6603:(t,e,i)=>{var s=i(2422),n=i(5422),r=i(4390),o=i(5893),a=i(626);t.exports=function(t,e,i){var h=function(){r(this,"lockSsfi")||r(this,"ssfi",h);var t=i.apply(this,arguments);if(void 0!==t)return t;var e=new n.Assertion;return a(this,e),e};s(h,e,!1),t[e]=o(h,e)}},2102:(t,e,i)=>{var s=i(5422),n=i(4390),r=i(7956),o=i(626);t.exports=function(t,e,i){i=void 0===i?function(){}:i,Object.defineProperty(t,e,{get:function t(){r()||n(this,"lockSsfi")||n(this,"ssfi",t);var e=i.call(this);if(void 0!==e)return e;var a=new s.Assertion;return o(this,a),a},configurable:!0})}},9934:(t,e,i)=>{var s=i(4849);t.exports=function(t,e){return s(t)<s(e)?-1:1}},8026:(t,e,i)=>{var s=i(8068),n=i(4390),r=i(9174);t.exports=function(t,e){var i=n(t,"message"),o=n(t,"ssfi");i=i?i+": ":"",t=n(t,"object"),(e=e.map((function(t){return t.toLowerCase()}))).sort();var a=e.map((function(t,i){var s=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an":"a";return(e.length>1&&i===e.length-1?"or ":"")+s+" "+t})).join(", "),h=r(t).toLowerCase();if(!e.some((function(t){return h===t})))throw new s(i+"object tested must be "+a+", but "+h+" given",void 0,o)}},4390:t=>{t.exports=function(t,e,i){var s=t.__flags||(t.__flags=Object.create(null));if(3!==arguments.length)return s[e];s[e]=i}},4877:t=>{t.exports=function(t,e){return e.length>4?e[4]:t._obj}},40:t=>{t.exports=function(t){var e=[];for(var i in t)e.push(i);return e}},3993:(t,e,i)=>{var s=i(4390),n=i(4877),r=i(7140);t.exports=function(t,e){var i=s(t,"negate"),o=s(t,"object"),a=e[3],h=n(t,e),l=i?e[2]:e[1],c=s(t,"message");return"function"==typeof l&&(l=l()),l=(l=l||"").replace(/#\{this\}/g,(function(){return r(o)})).replace(/#\{act\}/g,(function(){return r(h)})).replace(/#\{exp\}/g,(function(){return r(a)})),c?c+": "+l:l}},6484:(t,e,i)=>{var s=i(9174),n=i(4390);t.exports=function(t,e){var i=n(t,"operator"),r=n(t,"negate"),o=e[3],a=r?e[2]:e[1];if(i)return i;if("function"==typeof a&&(a=a()),(a=a||"")&&!/\shave\s/.test(a)){var h=function(t){var e=s(t);return-1!==["Array","Object","function"].indexOf(e)}(o);return/\snot\s/.test(a)?h?"notDeepStrictEqual":"notStrictEqual":h?"deepStrictEqual":"strictEqual"}}},7302:(t,e,i)=>{var s=i(1071);t.exports=function(t){return Object.keys(t).concat(s(t))}},1071:t=>{t.exports=function(t){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}},7896:t=>{t.exports=function(t){var e=Object.getOwnPropertyNames(t);function i(t){-1===e.indexOf(t)&&e.push(t)}for(var s=Object.getPrototypeOf(t);null!==s;)Object.getOwnPropertyNames(s).forEach(i),s=Object.getPrototypeOf(s);return e}},9455:(t,e,i)=>{var s=i(1549);e.test=i(5039),e.type=i(9174),e.expectTypes=i(8026),e.getMessage=i(3993),e.getActual=i(4877),e.inspect=i(4849),e.objDisplay=i(7140),e.flag=i(4390),e.transferFlags=i(626),e.eql=i(4487),e.getPathInfo=s.getPathInfo,e.hasProperty=s.hasProperty,e.getName=i(1257),e.addProperty=i(2102),e.addMethod=i(6603),e.overwriteProperty=i(9761),e.overwriteMethod=i(5235),e.addChainableMethod=i(9056),e.overwriteChainableMethod=i(794),e.compareByInspect=i(9934),e.getOwnEnumerablePropertySymbols=i(1071),e.getOwnEnumerableProperties=i(7302),e.checkError=i(1724),e.proxify=i(5893),e.addLengthGuard=i(2422),e.isProxyEnabled=i(7956),e.isNaN=i(4706),e.getOperator=i(6484)},4849:(t,e,i)=>{var s=i(1257),n=i(7896),r=i(40),o=i(9898);t.exports=function(t,e,i,s){return h({showHidden:e,seen:[],stylize:function(t){return t}},t,void 0===i?2:i)};var a=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&"nodeType"in t&&1===t.nodeType&&"string"==typeof t.nodeName};function h(t,i,m){if(i&&"function"==typeof i.inspect&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var g=i.inspect(m,t);return"string"!=typeof g&&(g=h(t,g,m)),g}var y=function(t,e){switch(typeof e){case"undefined":return t.stylize("undefined","undefined");case"string":var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string");case"number":return 0===e&&1/e==-1/0?t.stylize("-0","number"):t.stylize(""+e,"number");case"boolean":return t.stylize(""+e,"boolean");case"symbol":return t.stylize(e.toString(),"symbol")}if(null===e)return t.stylize("null","null")}(t,i);if(y)return y;if(a(i)){if("outerHTML"in i)return i.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(i);var b=document.createElementNS("http://www.w3.org/1999/xhtml","_");b.appendChild(i.cloneNode(!1));var R=b.innerHTML.replace("><",">"+i.innerHTML+"<");return b.innerHTML="",R}catch(t){}}var _,S,v=r(i),w=t.showHidden?n(i):v;if(0===w.length||d(i)&&(1===w.length&&"stack"===w[0]||2===w.length&&"description"===w[0]&&"stack"===w[1])){if("function"==typeof i)return S=(_=s(i))?": "+_:"",t.stylize("[Function"+S+"]","special");if(u(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(p(i))return t.stylize(Date.prototype.toUTCString.call(i),"date");if(d(i))return l(i)}var A,C,E="",I=!1,N=!1,D=["{","}"];if("object"==typeof(A=i)&&/\w+Array]$/.test(f(A))&&(N=!0,D=["[","]"]),function(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===f(t)}(i)&&(I=!0,D=["[","]"]),"function"==typeof i&&(E=" [Function"+(S=(_=s(i))?": "+_:"")+"]"),u(i)&&(E=" "+RegExp.prototype.toString.call(i)),p(i)&&(E=" "+Date.prototype.toUTCString.call(i)),d(i))return l(i);if(0===w.length&&(!I||0==i.length))return D[0]+E+D[1];if(m<0)return u(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special");if(t.seen.push(i),I)C=function(t,e,i,s,n){for(var r=[],o=0,a=e.length;o<a;++o)Object.prototype.hasOwnProperty.call(e,String(o))?r.push(c(t,e,i,s,String(o),!0)):r.push("");return n.forEach((function(n){n.match(/^\d+$/)||r.push(c(t,e,i,s,n,!0))})),r}(t,i,m,v,w);else{if(N)return function(t){for(var e="[ ",i=0;i<t.length;++i){if(e.length>=o.truncateThreshold-7){e+="...";break}e+=t[i]+", "}return-1!==(e+=" ]").indexOf(",  ]")&&(e=e.replace(",  ]"," ]")),e}(i);C=w.map((function(e){return c(t,i,m,v,e,I)}))}return t.seen.pop(),function(t,e,i){return t.reduce((function(t,e){return t+e.length+1}),0)>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(C,E,D)}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,i,s,n,r){var o,a,l=Object.getOwnPropertyDescriptor(e,n);if(l&&(l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special"))),s.indexOf(n)<0&&(o="["+n+"]"),a||(t.seen.indexOf(e[n])<0?(a=h(t,e[n],null===i?null:i-1)).indexOf("\n")>-1&&(a=r?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),void 0===o){if(r&&n.match(/^\d+$/))return a;(o=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function u(t){return"object"==typeof t&&"[object RegExp]"===f(t)}function p(t){return"object"==typeof t&&"[object Date]"===f(t)}function d(t){return"object"==typeof t&&"[object Error]"===f(t)}function f(t){return Object.prototype.toString.call(t)}},4706:t=>{t.exports=Number.isNaN||function(t){return t!=t}},7956:(t,e,i)=>{var s=i(9898);t.exports=function(){return s.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},7140:(t,e,i)=>{var s=i(4849),n=i(9898);t.exports=function(t){var e=s(t),i=Object.prototype.toString.call(t);if(n.truncateThreshold&&e.length>=n.truncateThreshold){if("[object Function]"===i)return t.name&&""!==t.name?"[Function: "+t.name+"]":"[Function]";if("[object Array]"===i)return"[ Array("+t.length+") ]";if("[object Object]"===i){var r=Object.keys(t);return"{ Object ("+(r.length>2?r.splice(0,2).join(", ")+", ...":r.join(", "))+") }"}return e}return e}},794:(t,e,i)=>{var s=i(5422),n=i(626);t.exports=function(t,e,i,r){var o=t.__methods[e],a=o.chainingBehavior;o.chainingBehavior=function(){var t=r(a).call(this);if(void 0!==t)return t;var e=new s.Assertion;return n(this,e),e};var h=o.method;o.method=function(){var t=i(h).apply(this,arguments);if(void 0!==t)return t;var e=new s.Assertion;return n(this,e),e}}},5235:(t,e,i)=>{var s=i(2422),n=i(5422),r=i(4390),o=i(5893),a=i(626);t.exports=function(t,e,i){var h=t[e],l=function(){throw new Error(e+" is not a function")};h&&"function"==typeof h&&(l=h);var c=function(){r(this,"lockSsfi")||r(this,"ssfi",c);var t=r(this,"lockSsfi");r(this,"lockSsfi",!0);var e=i(l).apply(this,arguments);if(r(this,"lockSsfi",t),void 0!==e)return e;var s=new n.Assertion;return a(this,s),s};s(c,e,!1),t[e]=o(c,e)}},9761:(t,e,i)=>{var s=i(5422),n=i(4390),r=i(7956),o=i(626);t.exports=function(t,e,i){var a=Object.getOwnPropertyDescriptor(t,e),h=function(){};a&&"function"==typeof a.get&&(h=a.get),Object.defineProperty(t,e,{get:function t(){r()||n(this,"lockSsfi")||n(this,"ssfi",t);var e=n(this,"lockSsfi");n(this,"lockSsfi",!0);var a=i(h).call(this);if(n(this,"lockSsfi",e),void 0!==a)return a;var l=new s.Assertion;return o(this,l),l},configurable:!0})}},5893:(t,e,i)=>{var s=i(9898),n=i(4390),r=i(7896),o=i(7956),a=["__flags","__methods","_obj","assert"];t.exports=function(t,e){return o()?new Proxy(t,{get:function t(i,o){if("string"==typeof o&&-1===s.proxyExcludedKeys.indexOf(o)&&!Reflect.has(i,o)){if(e)throw Error("Invalid Chai property: "+e+"."+o+'. See docs for proper usage of "'+e+'".');var h=null,l=4;throw r(i).forEach((function(t){if(!Object.prototype.hasOwnProperty(t)&&-1===a.indexOf(t)){var e=function(t,e,i){if(Math.abs(t.length-e.length)>=i)return i;for(var s=[],n=0;n<=t.length;n++)s[n]=Array(e.length+1).fill(0),s[n][0]=n;for(var r=0;r<e.length;r++)s[0][r]=r;for(n=1;n<=t.length;n++){var o=t.charCodeAt(n-1);for(r=1;r<=e.length;r++)Math.abs(n-r)>=i?s[n][r]=i:s[n][r]=Math.min(s[n-1][r]+1,s[n][r-1]+1,s[n-1][r-1]+(o===e.charCodeAt(r-1)?0:1))}return s[t.length][e.length]}(o,t,l);e<l&&(h=t,l=e)}})),null!==h?Error("Invalid Chai property: "+o+'. Did you mean "'+h+'"?'):Error("Invalid Chai property: "+o)}return-1!==a.indexOf(o)||n(i,"lockSsfi")||n(i,"ssfi",t),Reflect.get(i,o)}}):t}},5039:(t,e,i)=>{var s=i(4390);t.exports=function(t,e){var i=s(t,"negate"),n=e[0];return i?!n:n}},626:t=>{t.exports=function(t,e,i){var s=t.__flags||(t.__flags=Object.create(null));for(var n in e.__flags||(e.__flags=Object.create(null)),i=3!==arguments.length||i,s)(i||"object"!==n&&"ssfi"!==n&&"lockSsfi"!==n&&"message"!=n)&&(e.__flags[n]=s[n])}},1724:t=>{"use strict";var e=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function i(t){var i="";if(void 0===t.name){var s=String(t).match(e);s&&(i=s[1])}else i=t.name;return i}t.exports={compatibleInstance:function(t,e){return e instanceof Error&&t===e},compatibleConstructor:function(t,e){return e instanceof Error?t.constructor===e.constructor||t instanceof e.constructor:(e.prototype instanceof Error||e===Error)&&(t.constructor===e||t instanceof e)},compatibleMessage:function(t,e){var i="string"==typeof t?t:t.message;return e instanceof RegExp?e.test(i):"string"==typeof e&&-1!==i.indexOf(e)},getMessage:function(t){var e="";return t&&t.message?e=t.message:"string"==typeof t&&(e=t),e},getConstructorName:function(t){var e=t;return t instanceof Error?e=i(t.constructor):"function"==typeof t&&(e=i(t).trim()||i(new t)),e}}},0:t=>{"use strict";var e="%[a-f0-9]{2}",i=new RegExp("("+e+")|([^%]+?)","gi"),s=new RegExp("("+e+")+","gi");function n(t,e){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(1===t.length)return t;e=e||1;var i=t.slice(0,e),s=t.slice(e);return Array.prototype.concat.call([],n(i),n(s))}function r(t){try{return decodeURIComponent(t)}catch(r){for(var e=t.match(i)||[],s=1;s<e.length;s++)e=(t=n(e,s).join("")).match(i)||[];return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"","%FF%FE":""},i=s.exec(t);i;){try{e[i[0]]=decodeURIComponent(i[0])}catch(t){var n=r(i[0]);n!==i[0]&&(e[i[0]]=n)}i=s.exec(t)}e["%C2"]="";for(var o=Object.keys(e),a=0;a<o.length;a++){var h=o[a];t=t.replace(new RegExp(h,"g"),e[h])}return t}(t)}}},4487:(t,e,i)=>{"use strict";var s=i(9174);function n(){this._key="chai/deep-eql__"+Math.random()+Date.now()}n.prototype={get:function(t){return t[this._key]},set:function(t,e){Object.isExtensible(t)&&Object.defineProperty(t,this._key,{value:e,configurable:!0})}};var r="function"==typeof WeakMap?WeakMap:n;function o(t,e,i){if(!i||m(t)||m(e))return null;var s=i.get(t);if(s){var n=s.get(e);if("boolean"==typeof n)return n}return null}function a(t,e,i,s){if(i&&!m(t)&&!m(e)){var n=i.get(t);n?n.set(e,s):((n=new r).set(e,s),i.set(t,n))}}function h(t,e,i){if(i&&i.comparator)return c(t,e,i);var s=l(t,e);return null!==s?s:c(t,e,i)}function l(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e||!m(t)&&!m(e)&&null}function c(t,e,i){(i=i||{}).memoize=!1!==i.memoize&&(i.memoize||new r);var n=i&&i.comparator,c=o(t,e,i.memoize);if(null!==c)return c;var m=o(e,t,i.memoize);if(null!==m)return m;if(n){var g=n(t,e);if(!1===g||!0===g)return a(t,e,i.memoize,g),g;var y=l(t,e);if(null!==y)return y}var b=s(t);if(b!==s(e))return a(t,e,i.memoize,!1),!1;a(t,e,i.memoize,!0);var R=function(t,e,i,s){switch(i){case"String":case"Number":case"Boolean":case"Date":return h(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return t===e;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return u(t,e,s);case"RegExp":return function(t,e){return t.toString()===e.toString()}(t,e);case"Generator":return function(t,e,i){return u(d(t),d(e),i)}(t,e,s);case"DataView":return u(new Uint8Array(t.buffer),new Uint8Array(e.buffer),s);case"ArrayBuffer":return u(new Uint8Array(t),new Uint8Array(e),s);case"Set":case"Map":return function(t,e,i){if(t.size!==e.size)return!1;if(0===t.size)return!0;var s=[],n=[];return t.forEach((function(t,e){s.push([t,e])})),e.forEach((function(t,e){n.push([t,e])})),u(s.sort(),n.sort(),i)}(t,e,s);default:return function(t,e,i){var s=f(t),n=f(e);if(s.length&&s.length===n.length)return s.sort(),n.sort(),!1!==u(s,n)&&function(t,e,i,s){var n=i.length;if(0===n)return!0;for(var r=0;r<n;r+=1)if(!1===h(t[i[r]],e[i[r]],s))return!1;return!0}(t,e,s,i);var r=p(t),o=p(e);return r.length&&r.length===o.length?(r.sort(),o.sort(),u(r,o,i)):0===s.length&&0===r.length&&0===n.length&&0===o.length}(t,e,s)}}(t,e,b,i);return a(t,e,i.memoize,R),R}function u(t,e,i){var s=t.length;if(s!==e.length)return!1;if(0===s)return!0;for(var n=-1;++n<s;)if(!1===h(t[n],e[n],i))return!1;return!0}function p(t){if(function(t){return"undefined"!=typeof Symbol&&"object"==typeof t&&void 0!==Symbol.iterator&&"function"==typeof t[Symbol.iterator]}(t))try{return d(t[Symbol.iterator]())}catch(t){return[]}return[]}function d(t){for(var e=t.next(),i=[e.value];!1===e.done;)e=t.next(),i.push(e.value);return i}function f(t){var e=[];for(var i in t)e.push(i);return e}function m(t){return null===t||"object"!=typeof t}t.exports=h,t.exports.MemoizeMap=r},2596:t=>{"use strict";var e={single_source_shortest_paths:function(t,i,s){var n={},r={};r[i]=0;var o,a,h,l,c,u,p,d=e.PriorityQueue.make();for(d.push(i,0);!d.empty();)for(h in a=(o=d.pop()).value,l=o.cost,c=t[a]||{})c.hasOwnProperty(h)&&(u=l+c[h],p=r[h],(void 0===r[h]||p>u)&&(r[h]=u,d.push(h,u),n[h]=a));if(void 0!==s&&void 0===r[s]){var f=["Could not find a path from ",i," to ",s,"."].join("");throw new Error(f)}return n},extract_shortest_path_from_predecessor_list:function(t,e){for(var i=[],s=e;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,i,s){var n=e.single_source_shortest_paths(t,i,s);return e.extract_shortest_path_from_predecessor_list(n,s)},PriorityQueue:{make:function(t){var i,s=e.PriorityQueue,n={};for(i in t=t||{},s)s.hasOwnProperty(i)&&(n[i]=s[i]);return n.queue=[],n.sorter=t.sorter||s.default_sorter,n},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var i={value:t,cost:e};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=e},9194:t=>{"use strict";t.exports=function(t){for(var e=[],i=t.length,s=0;s<i;s++){var n=t.charCodeAt(s);if(n>=55296&&n<=56319&&i>s+1){var r=t.charCodeAt(s+1);r>=56320&&r<=57343&&(n=1024*(n-55296)+r-56320+65536,s+=1)}n<128?e.push(n):n<2048?(e.push(n>>6|192),e.push(63&n|128)):n<55296||n>=57344&&n<65536?(e.push(n>>12|224),e.push(n>>6&63|128),e.push(63&n|128)):n>=65536&&n<=1114111?(e.push(n>>18|240),e.push(n>>12&63|128),e.push(n>>6&63|128),e.push(63&n|128)):e.push(239,191,189)}return new Uint8Array(e).buffer}},903:t=>{!function(e){t.exports=e;var i="listeners",s={on:function(t,e){return o(this,t).push(e),this},once:function(t,e){var i=this;return s.originalListener=e,o(i,t).push(s),i;function s(){r.call(i,t,s),e.apply(this,arguments)}},off:r,emit:function(t,e){var i=this,s=o(i,t,!0);if(!s)return!1;var n=arguments.length;if(1===n)s.forEach((function(t){t.call(i)}));else if(2===n)s.forEach((function(t){t.call(i,e)}));else{var r=Array.prototype.slice.call(arguments,1);s.forEach((function(t){t.apply(i,r)}))}return!!s.length}};function n(t){for(var e in s)t[e]=s[e];return t}function r(t,e){var s,n=this;if(arguments.length){if(e){if(s=o(n,t,!0)){if(!(s=s.filter((function(t){return t!==e&&t.originalListener!==e}))).length)return r.call(n,t);n[i][t]=s}}else if((s=n[i])&&(delete s[t],!Object.keys(s).length))return r.call(n)}else delete n[i];return n}function o(t,e,s){if(!s||t[i]){var n=t[i]||(t[i]={});return n[e]||(n[e]=[])}}n(e.prototype),e.mixin=n}((function t(){if(!(this instanceof t))return new t}))},550:t=>{"use strict";t.exports=function(t,e){for(var i={},s=Object.keys(t),n=Array.isArray(e),r=0;r<s.length;r++){var o=s[r],a=t[o];(n?-1!==e.indexOf(o):e(o,a,t))&&(i[o]=a)}return i}},1257:t=>{"use strict";var e=Function.prototype.toString,i=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;t.exports=function(t){if("function"!=typeof t)return null;var s="";if(void 0===Function.prototype.name&&void 0===t.name){var n=e.call(t).match(i);n&&(s=n[1])}else s=t.name;return s}},8345:(t,e)=>{e.read=function(t,e,i,s,n){var r,o,a=8*n-s-1,h=(1<<a)-1,l=h>>1,c=-7,u=i?n-1:0,p=i?-1:1,d=t[e+u];for(u+=p,r=d&(1<<-c)-1,d>>=-c,c+=a;c>0;r=256*r+t[e+u],u+=p,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+t[e+u],u+=p,c-=8);if(0===r)r=1-l;else{if(r===h)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,s),r-=l}return(d?-1:1)*o*Math.pow(2,r-s)},e.write=function(t,e,i,s,n,r){var o,a,h,l=8*r-n-1,c=(1<<l)-1,u=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=s?0:r-1,f=s?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+u>=1?p/h:p*Math.pow(2,1-u))*h>=2&&(o++,h/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*h-1)*Math.pow(2,n),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),o=0));n>=8;t[i+d]=255&a,d+=f,a/=256,n-=8);for(o=o<<n|a,l+=n;l>0;t[i+d]=255&o,d+=f,o/=256,l-=8);t[i+d-f]|=128*m}},436:function(t,e){!function(t){var e,i="undefined",s=i!==typeof Buffer&&Buffer,n=i!==typeof Uint8Array&&Uint8Array,r=i!==typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],a=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},h=4294967296;function l(a,l,_){var S=l?0:4,v=l?4:0,w=l?0:3,A=l?1:2,C=l?2:1,E=l?3:0,I=l?g:b,N=l?y:R,D=x.prototype,T="is"+a,O="_"+T;return D.buffer=void 0,D.offset=0,D[O]=!0,D.toNumber=k,D.toString=function(t){var e=this.buffer,i=this.offset,s=P(e,i+S),n=P(e,i+v),r="",o=!_&&2147483648&s;for(o&&(s=~s,n=h-n),t=t||10;;){var a=s%t*h+n;if(s=Math.floor(s/t),n=Math.floor(a/t),r=(a%t).toString(t)+r,!s&&!n)break}return o&&(r="-"+r),r},D.toJSON=k,D.toArray=c,s&&(D.toBuffer=u),n&&(D.toArrayBuffer=p),x[T]=function(t){return!(!t||!t[O])},t[a]=x,x;function x(t,s,a,l){return this instanceof x?function(t,s,a,l,c){n&&r&&(s instanceof r&&(s=new n(s)),l instanceof r&&(l=new n(l))),s||a||l||e?(d(s,a)||(c=a,l=s,a=0,s=new(e||Array)(8)),t.buffer=s,t.offset=a|=0,i!==typeof l&&("string"==typeof l?function(t,e,i,s){var n=0,r=i.length,o=0,a=0;"-"===i[0]&&n++;for(var l=n;n<r;){var c=parseInt(i[n++],s);if(!(c>=0))break;a=a*s+c,o=o*s+Math.floor(a/h),a%=h}l&&(o=~o,a?a=h-a:o++),M(t,e+S,o),M(t,e+v,a)}(s,a,l,c||10):d(l,c)?f(s,a,l,c):"number"==typeof c?(M(s,a+S,l),M(s,a+v,c)):l>0?I(s,a,l):l<0?N(s,a,l):f(s,a,o,0))):t.buffer=m(o,0)}(this,t,s,a,l):new x(t,s,a,l)}function k(){var t=this.buffer,e=this.offset,i=P(t,e+S),s=P(t,e+v);return _||(i|=0),i?i*h+s:s}function M(t,e,i){t[e+E]=255&i,i>>=8,t[e+C]=255&i,i>>=8,t[e+A]=255&i,i>>=8,t[e+w]=255&i}function P(t,e){return 16777216*t[e+w]+(t[e+A]<<16)+(t[e+C]<<8)+t[e+E]}}function c(t){var i=this.buffer,s=this.offset;return e=null,!1!==t&&0===s&&8===i.length&&a(i)?i:m(i,s)}function u(t){var i=this.buffer,n=this.offset;if(e=s,!1!==t&&0===n&&8===i.length&&Buffer.isBuffer(i))return i;var r=new s(8);return f(r,0,i,n),r}function p(t){var i=this.buffer,s=this.offset,o=i.buffer;if(e=n,!1!==t&&0===s&&o instanceof r&&8===o.byteLength)return o;var a=new n(8);return f(a,0,i,s),a.buffer}function d(t,e){var i=t&&t.length;return e|=0,i&&e+8<=i&&"string"!=typeof t[e]}function f(t,e,i,s){e|=0,s|=0;for(var n=0;n<8;n++)t[e++]=255&i[s++]}function m(t,e){return Array.prototype.slice.call(t,e,e+8)}function g(t,e,i){for(var s=e+8;s>e;)t[--s]=255&i,i/=256}function y(t,e,i){var s=e+8;for(i++;s>e;)t[--s]=255&-i^255,i/=256}function b(t,e,i){for(var s=e+8;e<s;)t[e++]=255&i,i/=256}function R(t,e,i){var s=e+8;for(i++;e<s;)t[e++]=255&-i^255,i/=256}l("Uint64BE",!0,!0),l("Int64BE",!0,!1),l("Uint64LE",!1,!0),l("Int64LE",!1,!1)}("string"!=typeof e.nodeName?e:this||{})},618:(t,e,i)=>{e.encode=i(235).encode,e.decode=i(994).decode,i(3872),i(2530),i(7679),i(9776)},5882:function(t){function e(t){return t&&t.isBuffer&&t}t.exports=e("undefined"!=typeof Buffer&&Buffer)||e(this.Buffer)||e("undefined"!=typeof window&&window.Buffer)||this.Buffer},9811:(t,e)=>{e.copy=function(t,e,i,s){var n;i||(i=0),s||0===s||(s=this.length),e||(e=0);var r=s-i;if(t===this&&i<e&&e<s)for(n=r-1;n>=0;n--)t[n+e]=this[n+i];else for(n=0;n<r;n++)t[n+e]=this[n+i];return r},e.toString=function(t,e,i){var s=this,n=0|e;i||(i=s.length);for(var r="",o=0;n<i;)(o=s[n++])<128?r+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&s[n++]:224==(240&o)?o=(15&o)<<12|(63&s[n++])<<6|63&s[n++]:240==(248&o)&&(o=(7&o)<<18|(63&s[n++])<<12|(63&s[n++])<<6|63&s[n++]),o>=65536?(o-=65536,r+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):r+=String.fromCharCode(o));return r},e.write=function(t,e){for(var i=this,s=e||(e|=0),n=t.length,r=0,o=0;o<n;)(r=t.charCodeAt(o++))<128?i[s++]=r:r<2048?(i[s++]=192|r>>>6,i[s++]=128|63&r):r<55296||r>57343?(i[s++]=224|r>>>12,i[s++]=128|r>>>6&63,i[s++]=128|63&r):(r=65536+(r-55296<<10|t.charCodeAt(o++)-56320),i[s++]=240|r>>>18,i[s++]=128|r>>>12&63,i[s++]=128|r>>>6&63,i[s++]=128|63&r);return s-e}},2038:(t,e,i)=>{var s=i(7259),n=t.exports=r(0);function r(t){return new Array(t)}n.alloc=r,n.concat=s.concat,n.from=function(t){if(!s.isBuffer(t)&&s.isView(t))t=s.Uint8Array.from(t);else if(s.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return s.from.call(n,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}},5920:(t,e,i)=>{var s=i(7259),n=s.global,r=t.exports=s.hasBuffer?o(0):[];function o(t){return new n(t)}r.alloc=s.hasBuffer&&n.alloc||o,r.concat=s.concat,r.from=function(t){if(!s.isBuffer(t)&&s.isView(t))t=s.Uint8Array.from(t);else if(s.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return s.from.call(r,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return n.from&&1!==n.from.length?n.from(t):new n(t)}},5095:(t,e,i)=>{var s,n=i(9811);e.copy=l,e.slice=c,e.toString=function(t,e,i){return(!a&&r.isBuffer(this)?this.toString:n.toString).apply(this,arguments)},e.write=(s="write",function(){return(this[s]||n[s]).apply(this,arguments)});var r=i(7259),o=r.global,a=r.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,h=a&&!o.TYPED_ARRAY_SUPPORT;function l(t,e,i,s){var o=r.isBuffer(this),a=r.isBuffer(t);if(o&&a)return this.copy(t,e,i,s);if(h||o||a||!r.isView(this)||!r.isView(t))return n.copy.call(this,t,e,i,s);var l=i||null!=s?c.call(this,i,s):this;return t.set(l,e),l.length}function c(t,e){var i=this.slice||!h&&this.subarray;if(i)return i.call(this,t,e);var s=r.alloc.call(this,e-t);return l.call(this,s,0,t,e),s}},5757:(t,e,i)=>{var s=i(7259),n=t.exports=s.hasArrayBuffer?r(0):[];function r(t){return new Uint8Array(t)}n.alloc=r,n.concat=s.concat,n.from=function(t){if(s.isView(t)){var e=t.byteOffset,i=t.byteLength;(t=t.buffer).byteLength!==i&&(t.slice?t=t.slice(e,e+i):(t=new Uint8Array(t)).byteLength!==i&&(t=Array.prototype.slice.call(t,e,e+i)))}else{if("string"==typeof t)return s.from.call(n,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}},7259:(t,e,i)=>{var s=e.global=i(5882),n=e.hasBuffer=s&&!!s.isBuffer,r=e.hasArrayBuffer="undefined"!=typeof ArrayBuffer,o=e.isArray=i(5182);e.isArrayBuffer=r?function(t){return t instanceof ArrayBuffer||f(t)}:y;var a=e.isBuffer=n?s.isBuffer:y,h=e.isView=r?ArrayBuffer.isView||b("ArrayBuffer","buffer"):y;e.alloc=d,e.concat=function(t,i){i||(i=0,Array.prototype.forEach.call(t,(function(t){i+=t.length})));var s=this!==e&&this||t[0],n=d.call(s,i),r=0;return Array.prototype.forEach.call(t,(function(t){r+=p.copy.call(t,n,r)})),n},e.from=function(t){return"string"==typeof t?m.call(this,t):g(this).from(t)};var l=e.Array=i(2038),c=e.Buffer=i(5920),u=e.Uint8Array=i(5757),p=e.prototype=i(5095);function d(t){return g(this).alloc(t)}var f=b("ArrayBuffer");function m(t){var e=3*t.length,i=d.call(this,e),s=p.write.call(i,t);return e!==s&&(i=p.slice.call(i,0,s)),i}function g(t){return a(t)?c:h(t)?u:o(t)?l:n?c:r?u:l}function y(){return!1}function b(t,e){return t="[object "+t+"]",function(i){return null!=i&&{}.toString.call(e?i[e]:i)===t}}},3070:(t,e,i)=>{var s=i(5182);e.createCodec=a,e.install=function(t){for(var e in t)r.prototype[e]=o(r.prototype[e],t[e])},e.filter=function(t){return s(t)?function(t){return t=t.slice(),function(i){return t.reduce(e,i)};function e(t,e){return e(t)}}(t):t};var n=i(7259);function r(t){if(!(this instanceof r))return new r(t);this.options=t,this.init()}function o(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function a(t){return new r(t)}r.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=n.Uint8Array),this},e.preset=a({preset:!0})},9776:(t,e,i)=>{i(8942),i(5069),i(3070).preset},7434:(t,e,i)=>{e.T=n;var s=i(8942).preset;function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}i(2094).k.mixin(n.prototype),n.prototype.codec=s,n.prototype.fetch=function(){return this.codec.decode(this)}},994:(t,e,i)=>{e.decode=function(t,e){var i=new s(e);return i.write(t),i.read()};var s=i(7434).T},2530:(t,e,i)=>{var s=i(903),n=i(7434).T;function r(t){if(!(this instanceof r))return new r(t);n.call(this,t)}r.prototype=new n,s.mixin(r.prototype),r.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},r.prototype.push=function(t){this.emit("data",t)},r.prototype.end=function(t){this.decode(t),this.emit("end")}},8090:(t,e,i)=>{e.F=n;var s=i(5069).preset;function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}i(2094).I.mixin(n.prototype),n.prototype.codec=s,n.prototype.write=function(t){this.codec.encode(this,t)}},235:(t,e,i)=>{e.encode=function(t,e){var i=new s(e);return i.write(t),i.read()};var s=i(8090).F},3872:(t,e,i)=>{var s=i(903),n=i(8090).F;function r(t){if(!(this instanceof r))return new r(t);n.call(this,t)}r.prototype=new n,s.mixin(r.prototype),r.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},r.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},1583:(t,e,i)=>{e.S=function t(e,i){if(!(this instanceof t))return new t(e,i);this.buffer=s.from(e),this.type=i};var s=i(7259)},4897:(t,e,i)=>{e.setExtPackers=function(t){t.addExtPacker(14,Error,[u,h]),t.addExtPacker(1,EvalError,[u,h]),t.addExtPacker(2,RangeError,[u,h]),t.addExtPacker(3,ReferenceError,[u,h]),t.addExtPacker(4,SyntaxError,[u,h]),t.addExtPacker(5,TypeError,[u,h]),t.addExtPacker(6,URIError,[u,h]),t.addExtPacker(10,RegExp,[c,h]),t.addExtPacker(11,Boolean,[l,h]),t.addExtPacker(12,String,[l,h]),t.addExtPacker(13,Date,[Number,h]),t.addExtPacker(15,Number,[l,h]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,o),t.addExtPacker(18,Uint8Array,o),t.addExtPacker(19,Int16Array,o),t.addExtPacker(20,Uint16Array,o),t.addExtPacker(21,Int32Array,o),t.addExtPacker(22,Uint32Array,o),t.addExtPacker(23,Float32Array,o),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,o),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,o),t.addExtPacker(26,ArrayBuffer,o),t.addExtPacker(29,DataView,o)),n.hasBuffer&&t.addExtPacker(27,r,n.from)};var s,n=i(7259),r=n.global,o=n.Uint8Array.from,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function h(t){return s||(s=i(235).encode),s(t)}function l(t){return t.valueOf()}function c(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function u(t){var e={};for(var i in a)e[i]=t[i];return e}},6801:(t,e,i)=>{e.setExtUnpackers=function(t){t.addExtUnpacker(14,[a,l(Error)]),t.addExtUnpacker(1,[a,l(EvalError)]),t.addExtUnpacker(2,[a,l(RangeError)]),t.addExtUnpacker(3,[a,l(ReferenceError)]),t.addExtUnpacker(4,[a,l(SyntaxError)]),t.addExtUnpacker(5,[a,l(TypeError)]),t.addExtUnpacker(6,[a,l(URIError)]),t.addExtUnpacker(10,[a,h]),t.addExtUnpacker(11,[a,c(Boolean)]),t.addExtUnpacker(12,[a,c(String)]),t.addExtUnpacker(13,[a,c(Date)]),t.addExtUnpacker(15,[a,c(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,c(Int8Array)),t.addExtUnpacker(18,c(Uint8Array)),t.addExtUnpacker(19,[u,c(Int16Array)]),t.addExtUnpacker(20,[u,c(Uint16Array)]),t.addExtUnpacker(21,[u,c(Int32Array)]),t.addExtUnpacker(22,[u,c(Uint32Array)]),t.addExtUnpacker(23,[u,c(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[u,c(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,c(Uint8ClampedArray)),t.addExtUnpacker(26,u),t.addExtUnpacker(29,[u,c(DataView)])),n.hasBuffer&&t.addExtUnpacker(27,c(r))};var s,n=i(7259),r=n.global,o={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(t){return s||(s=i(994).decode),s(t)}function h(t){return RegExp.apply(null,t)}function l(t){return function(e){var i=new t;for(var s in o)i[s]=e[s];return i}}function c(t){return function(e){return new t(e)}}function u(t){return new Uint8Array(t).buffer}},7679:(t,e,i)=>{i(8942),i(5069),i(3070).createCodec},2094:(t,e,i)=>{e.k=r,e.I=o;var s=i(7259),n="BUFFER_SHORTAGE";function r(){if(!(this instanceof r))return new r}function o(){if(!(this instanceof o))return new o}function a(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function h(t){(this.buffers||(this.buffers=[])).push(t)}function l(t){return function(e){for(var i in t)e[i]=t[i];return e}}r.mixin=l({bufferish:s,write:function(t){var e=this.offset?s.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:function(){throw new Error("method not implemented: fetch()")},flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=n)throw t;this.offset=e;break}this.push(t)}},push:h,pull:function(){return(this.buffers||(this.buffers=[])).shift()},read:a,reserve:function(t){var e=this.offset,i=e+t;if(i>this.buffer.length)throw new Error(n);return this.offset=i,e},offset:0}),r.mixin(r.prototype),o.mixin=l({bufferish:s,write:function(){throw new Error("method not implemented: write()")},fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return s.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:h,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:a,reserve:function(t){var e=0|t;if(this.buffer){var i=this.buffer.length,s=0|this.offset,n=s+e;if(n<i)return this.offset=n,s;this.flush(),t=Math.max(t,Math.min(2*i,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var i=this.reserve(e);s.prototype.copy.call(t,this.buffer,i)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),o.mixin(o.prototype)},8942:(t,e,i)=>{var s=i(1583).S,n=i(6801),r=i(8694).readUint8,o=i(2324),a=i(3070);function h(){var t=this.options;return this.decode=function(t){var e=o.getReadToken(t);return function(t){var i=r(t),s=e[i];if(!s)throw new Error("Invalid type: "+(i?"0x"+i.toString(16):i));return s(t)}}(t),t&&t.preset&&n.setExtUnpackers(this),this}a.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=a.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new s(e,t)}},init:h}),e.preset=h.call(a.preset)},8694:(t,e,i)=>{var s=i(8345),n=i(436),r=n.Uint64BE,o=n.Int64BE;e.getReadFormat=function(t){var e=a.hasArrayBuffer&&t&&t.binarraybuffer,i=t&&t.int64;return{map:l&&t&&t.usemap?p:u,array:d,str:f,bin:e?g:m,ext:y,uint8:b,uint16:_,uint32:v,uint64:A(8,i?I:C),int8:R,int16:S,int32:w,int64:A(8,i?N:E),float32:A(4,D),float64:A(8,T)}},e.readUint8=b;var a=i(7259),h=i(5095),l="undefined"!=typeof Map,c=!0;function u(t,e){var i,s={},n=new Array(e),r=new Array(e),o=t.codec.decode;for(i=0;i<e;i++)n[i]=o(t),r[i]=o(t);for(i=0;i<e;i++)s[n[i]]=r[i];return s}function p(t,e){var i,s=new Map,n=new Array(e),r=new Array(e),o=t.codec.decode;for(i=0;i<e;i++)n[i]=o(t),r[i]=o(t);for(i=0;i<e;i++)s.set(n[i],r[i]);return s}function d(t,e){for(var i=new Array(e),s=t.codec.decode,n=0;n<e;n++)i[n]=s(t);return i}function f(t,e){var i=t.reserve(e),s=i+e;return h.toString.call(t.buffer,"utf-8",i,s)}function m(t,e){var i=t.reserve(e),s=i+e,n=h.slice.call(t.buffer,i,s);return a.from(n)}function g(t,e){var i=t.reserve(e),s=i+e,n=h.slice.call(t.buffer,i,s);return a.Uint8Array.from(n).buffer}function y(t,e){var i=t.reserve(e+1),s=t.buffer[i++],n=i+e,r=t.codec.getExtUnpacker(s);if(!r)throw new Error("Invalid ext type: "+(s?"0x"+s.toString(16):s));return r(h.slice.call(t.buffer,i,n))}function b(t){var e=t.reserve(1);return t.buffer[e]}function R(t){var e=t.reserve(1),i=t.buffer[e];return 128&i?i-256:i}function _(t){var e=t.reserve(2),i=t.buffer;return i[e++]<<8|i[e]}function S(t){var e=t.reserve(2),i=t.buffer,s=i[e++]<<8|i[e];return 32768&s?s-65536:s}function v(t){var e=t.reserve(4),i=t.buffer;return 16777216*i[e++]+(i[e++]<<16)+(i[e++]<<8)+i[e]}function w(t){var e=t.reserve(4),i=t.buffer;return i[e++]<<24|i[e++]<<16|i[e++]<<8|i[e]}function A(t,e){return function(i){var s=i.reserve(t);return e.call(i.buffer,s,c)}}function C(t){return new r(this,t).toNumber()}function E(t){return new o(this,t).toNumber()}function I(t){return new r(this,t)}function N(t){return new o(this,t)}function D(t){return s.read(this,t,!1,23,4)}function T(t){return s.read(this,t,!1,52,8)}},2324:(t,e,i)=>{var s=i(8694);function n(t){var e,i=new Array(256);for(e=0;e<=127;e++)i[e]=r(e);for(e=128;e<=143;e++)i[e]=a(e-128,t.map);for(e=144;e<=159;e++)i[e]=a(e-144,t.array);for(e=160;e<=191;e++)i[e]=a(e-160,t.str);for(i[192]=r(null),i[193]=null,i[194]=r(!1),i[195]=r(!0),i[196]=o(t.uint8,t.bin),i[197]=o(t.uint16,t.bin),i[198]=o(t.uint32,t.bin),i[199]=o(t.uint8,t.ext),i[200]=o(t.uint16,t.ext),i[201]=o(t.uint32,t.ext),i[202]=t.float32,i[203]=t.float64,i[204]=t.uint8,i[205]=t.uint16,i[206]=t.uint32,i[207]=t.uint64,i[208]=t.int8,i[209]=t.int16,i[210]=t.int32,i[211]=t.int64,i[212]=a(1,t.ext),i[213]=a(2,t.ext),i[214]=a(4,t.ext),i[215]=a(8,t.ext),i[216]=a(16,t.ext),i[217]=o(t.uint8,t.str),i[218]=o(t.uint16,t.str),i[219]=o(t.uint32,t.str),i[220]=o(t.uint16,t.array),i[221]=o(t.uint32,t.array),i[222]=o(t.uint16,t.map),i[223]=o(t.uint32,t.map),e=224;e<=255;e++)i[e]=r(e-256);return i}function r(t){return function(){return t}}function o(t,e){return function(i){var s=t(i);return e(i,s)}}function a(t,e){return function(i){return e(i,t)}}e.getReadToken=function(t){var e=s.getReadFormat(t);return t&&t.useraw?function(t){var e,i=n(t).slice();for(i[217]=i[196],i[218]=i[197],i[219]=i[198],e=160;e<=191;e++)i[e]=a(e-160,t.bin);return i}(e):n(e)}},5069:(t,e,i)=>{var s=i(1583).S,n=i(4897),r=i(8848),o=i(3070);function a(){var t=this.options;return this.encode=function(t){var e=r.getWriteType(t);return function(t,i){var s=e[typeof i];if(!s)throw new Error('Unsupported type "'+typeof i+'": '+i);s(t,i)}}(t),t&&t.preset&&n.setExtPackers(this),this}o.install({addExtPacker:function(t,e,i){i=o.filter(i);var n=e.name;function r(e){return i&&(e=i(e)),new s(e,t)}n&&"Object"!==n?(this.extPackers||(this.extPackers={}))[n]=r:(this.extEncoderList||(this.extEncoderList=[])).unshift([e,r])},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),i=t.constructor,s=i&&i.name&&e[i.name];if(s)return s;for(var n=this.extEncoderList||(this.extEncoderList=[]),r=n.length,o=0;o<r;o++){var a=n[o];if(i===a[0])return a[1]}},init:a}),e.preset=a.call(o.preset)},8073:(t,e,i)=>{var s=i(8345),n=i(436),r=n.Uint64BE,o=n.Int64BE,a=i(8397).w,h=i(7259),l=h.global,c=h.hasBuffer&&"TYPED_ARRAY_SUPPORT"in l&&!l.TYPED_ARRAY_SUPPORT,u=h.hasBuffer&&l.prototype||{};function p(){var t=a.slice();return t[196]=d(196),t[197]=f(197),t[198]=m(198),t[199]=d(199),t[200]=f(200),t[201]=m(201),t[202]=g(202,4,u.writeFloatBE||R,!0),t[203]=g(203,8,u.writeDoubleBE||_,!0),t[204]=d(204),t[205]=f(205),t[206]=m(206),t[207]=g(207,8,y),t[208]=d(208),t[209]=f(209),t[210]=m(210),t[211]=g(211,8,b),t[217]=d(217),t[218]=f(218),t[219]=m(219),t[220]=f(220),t[221]=m(221),t[222]=f(222),t[223]=m(223),t}function d(t){return function(e,i){var s=e.reserve(2),n=e.buffer;n[s++]=t,n[s]=i}}function f(t){return function(e,i){var s=e.reserve(3),n=e.buffer;n[s++]=t,n[s++]=i>>>8,n[s]=i}}function m(t){return function(e,i){var s=e.reserve(5),n=e.buffer;n[s++]=t,n[s++]=i>>>24,n[s++]=i>>>16,n[s++]=i>>>8,n[s]=i}}function g(t,e,i,s){return function(n,r){var o=n.reserve(e+1);n.buffer[o++]=t,i.call(n.buffer,r,o,s)}}function y(t,e){new r(this,e,t)}function b(t,e){new o(this,e,t)}function R(t,e){s.write(this,t,e,!1,23,4)}function _(t,e){s.write(this,t,e,!1,52,8)}e.getWriteToken=function(t){return t&&t.uint8array?((e=p())[202]=g(202,4,R),e[203]=g(203,8,_),e):c||h.hasBuffer&&t&&t.safe?function(){var t=a.slice();return t[196]=g(196,1,l.prototype.writeUInt8),t[197]=g(197,2,l.prototype.writeUInt16BE),t[198]=g(198,4,l.prototype.writeUInt32BE),t[199]=g(199,1,l.prototype.writeUInt8),t[200]=g(200,2,l.prototype.writeUInt16BE),t[201]=g(201,4,l.prototype.writeUInt32BE),t[202]=g(202,4,l.prototype.writeFloatBE),t[203]=g(203,8,l.prototype.writeDoubleBE),t[204]=g(204,1,l.prototype.writeUInt8),t[205]=g(205,2,l.prototype.writeUInt16BE),t[206]=g(206,4,l.prototype.writeUInt32BE),t[207]=g(207,8,y),t[208]=g(208,1,l.prototype.writeInt8),t[209]=g(209,2,l.prototype.writeInt16BE),t[210]=g(210,4,l.prototype.writeInt32BE),t[211]=g(211,8,b),t[217]=g(217,1,l.prototype.writeUInt8),t[218]=g(218,2,l.prototype.writeUInt16BE),t[219]=g(219,4,l.prototype.writeUInt32BE),t[220]=g(220,2,l.prototype.writeUInt16BE),t[221]=g(221,4,l.prototype.writeUInt32BE),t[222]=g(222,2,l.prototype.writeUInt16BE),t[223]=g(223,4,l.prototype.writeUInt32BE),t}():p();var e}},8848:(t,e,i)=>{var s=i(5182),n=i(436),r=n.Uint64BE,o=n.Int64BE,a=i(7259),h=i(5095),l=i(8073),c=i(8397).w,u=i(1583).S,p="undefined"!=typeof Uint8Array,d="undefined"!=typeof Map,f=[];f[1]=212,f[2]=213,f[4]=214,f[8]=215,f[16]=216,e.getWriteType=function(t){var e,i=l.getWriteToken(t),n=t&&t.useraw,m=p&&t&&t.binarraybuffer,g=m?a.isArrayBuffer:a.isBuffer,y=m?function(t,e){S(t,new Uint8Array(e))}:S,b=d&&t&&t.usemap?function(t,e){if(!(e instanceof Map))return v(t,e);var s=e.size;i[s<16?128+s:s<=65535?222:223](t,s);var n=t.codec.encode;e.forEach((function(e,i,s){n(t,i),n(t,e)}))}:v;return{boolean:function(t,e){i[e?195:194](t,e)},function:_,number:function(t,e){var s=0|e;e===s?i[-32<=s&&s<=127?255&s:0<=s?s<=255?204:s<=65535?205:206:-128<=s?208:-32768<=s?209:210](t,s):i[203](t,e)},object:n?function(t,e){if(g(e))return function(t,e){var s=e.length;i[s<32?160+s:s<=65535?218:219](t,s),t.send(e)}(t,e);R(t,e)}:R,string:(e=n?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5},function(t,s){var n=s.length,r=5+3*n;t.offset=t.reserve(r);var o=t.buffer,a=e(n),l=t.offset+a;n=h.write.call(o,s,l);var c=e(n);if(a!==c){var u=l+c-a,p=l+n;h.copy.call(o,o,u,l,p)}i[1===c?160+n:c<=3?215+c:219](t,n),t.offset+=n}),symbol:_,undefined:_};function R(t,e){if(null===e)return _(t,e);if(g(e))return y(t,e);if(s(e))return function(t,e){var s=e.length;i[s<16?144+s:s<=65535?220:221](t,s);for(var n=t.codec.encode,r=0;r<s;r++)n(t,e[r])}(t,e);if(r.isUint64BE(e))return function(t,e){i[207](t,e.toArray())}(t,e);if(o.isInt64BE(e))return function(t,e){i[211](t,e.toArray())}(t,e);var n=t.codec.getExtPacker(e);if(n&&(e=n(e)),e instanceof u)return function(t,e){var s=e.buffer,n=s.length,r=f[n]||(n<255?199:n<=65535?200:201);i[r](t,n),c[e.type](t),t.send(s)}(t,e);b(t,e)}function _(t,e){i[192](t,e)}function S(t,e){var s=e.length;i[s<255?196:s<=65535?197:198](t,s),t.send(e)}function v(t,e){var s=Object.keys(e),n=s.length;i[n<16?128+n:n<=65535?222:223](t,n);var r=t.codec.encode;s.forEach((function(i){r(t,i),r(t,e[i])}))}}},8397:(t,e)=>{for(var i=e.w=new Array(256),s=0;s<=255;s++)i[s]=n(s);function n(t){return function(e){var i=e.reserve(1);e.buffer[i]=t}}},1549:t=>{"use strict";function e(t,e){return null!=t&&e in Object(t)}function i(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(t){if("constructor"===t||"__proto__"===t||"prototype"===t)return{};var e=/^\[(\d+)\]$/.exec(t);return e?{i:parseFloat(e[1])}:{p:t.replace(/\\([.[\]])/g,"$1")}}))}function s(t,e,i){var s=t,n=null;i=void 0===i?e.length:i;for(var r=0;r<i;r++){var o=e[r];s&&(s=void 0===o.p?s[o.i]:s[o.p],r===i-1&&(n=s))}return n}function n(t,n){var r=i(n),o=r[r.length-1],a={parent:r.length>1?s(t,r,r.length-1):t,name:o.p||o.i,value:s(t,r)};return a.exists=e(a.parent,a.name),a}t.exports={hasProperty:e,getPathInfo:n,getPathValue:function(t,e){return n(t,e).value},setPathValue:function(t,e,s){return function(t,e,i){for(var s=t,n=i.length,r=null,o=0;o<n;o++){var a=null,h=null;if(r=i[o],o===n-1)s[a=void 0===r.p?r.i:r.p]=e;else if(void 0!==r.p&&s[r.p])s=s[r.p];else if(void 0!==r.i&&s[r.i])s=s[r.i];else{var l=i[o+1];a=void 0===r.p?r.i:r.p,h=void 0===l.p?[]:{},s[a]=h,s=s[a]}}}(t,s,i(e)),t}}},7040:(t,e,i)=>{const s=i(2454),n=i(7297),r=i(7083),o=i(2858);function a(t,e,i,r,o){const a=[].slice.call(arguments,1),h=a.length,l="function"==typeof a[h-1];if(!l&&!s())throw new Error("Callback required as last argument");if(!l){if(h<1)throw new Error("Too few arguments provided");return 1===h?(i=e,e=r=void 0):2!==h||e.getContext||(r=i,i=e,e=void 0),new Promise((function(s,o){try{const o=n.create(i,r);s(t(o,e,r))}catch(t){o(t)}}))}if(h<2)throw new Error("Too few arguments provided");2===h?(o=i,i=e,e=r=void 0):3===h&&(e.getContext&&void 0===o?(o=r,r=void 0):(o=r,r=i,i=e,e=void 0));try{const s=n.create(i,r);o(null,t(s,e,r))}catch(t){o(t)}}n.create,e.rT=a.bind(null,r.render),a.bind(null,r.renderToDataURL),a.bind(null,(function(t,e,i){return o.render(t,i)}))},2454:t=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},2955:(t,e,i)=>{const s=i(4257).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];const e=Math.floor(t/7)+2,i=s(t),n=145===i?26:2*Math.ceil((i-13)/(2*e-2)),r=[i-7];for(let t=1;t<e-1;t++)r[t]=r[t-1]-n;return r.push(6),r.reverse()},e.getPositions=function(t){const i=[],s=e.getRowColCoords(t),n=s.length;for(let t=0;t<n;t++)for(let e=0;e<n;e++)0===t&&0===e||0===t&&e===n-1||t===n-1&&0===e||i.push([s[t],s[e]]);return i}},7042:(t,e,i)=>{const s=i(9279),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(t){this.mode=s.ALPHANUMERIC,this.data=t}r.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let i=45*n.indexOf(this.data[e]);i+=n.indexOf(this.data[e+1]),t.put(i,11)}this.data.length%2&&t.put(n.indexOf(this.data[e]),6)},t.exports=r},1650:t=>{function e(){this.buffer=[],this.length=0}e.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let i=0;i<e;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=e},4914:t=>{function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}e.prototype.set=function(t,e,i,s){const n=t*this.size+e;this.data[n]=i,s&&(this.reservedBit[n]=!0)},e.prototype.get=function(t,e){return this.data[t*this.size+e]},e.prototype.xor=function(t,e,i){this.data[t*this.size+e]^=i},e.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=e},8086:(t,e,i)=>{const s=i(9194),n=i(9279);function r(t){this.mode=n.BYTE,"string"==typeof t&&(t=s(t)),this.data=new Uint8Array(t)}r.getBitsLength=function(t){return 8*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){for(let e=0,i=this.data.length;e<i;e++)t.put(this.data[e],8)},t.exports=r},8582:(t,e,i)=>{const s=i(8803),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case s.L:return n[4*(t-1)+0];case s.M:return n[4*(t-1)+1];case s.Q:return n[4*(t-1)+2];case s.H:return n[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case s.L:return r[4*(t-1)+0];case s.M:return r[4*(t-1)+1];case s.Q:return r[4*(t-1)+2];case s.H:return r[4*(t-1)+3];default:return}}},8803:(t,e)=>{e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,i){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return i}}},2351:(t,e,i)=>{const s=i(4257).getSymbolSize;e.getPositions=function(t){const e=s(t);return[[0,0],[e-7,0],[0,e-7]]}},4144:(t,e,i)=>{const s=i(4257),n=s.getBCHDigit(1335);e.getEncodedBits=function(t,e){const i=t.bit<<3|e;let r=i<<10;for(;s.getBCHDigit(r)-n>=0;)r^=1335<<s.getBCHDigit(r)-n;return 21522^(i<<10|r)}},7799:(t,e)=>{const i=new Uint8Array(512),s=new Uint8Array(256);!function(){let t=1;for(let e=0;e<255;e++)i[e]=t,s[t]=e,t<<=1,256&t&&(t^=285);for(let t=255;t<512;t++)i[t]=i[t-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return s[t]},e.exp=function(t){return i[t]},e.mul=function(t,e){return 0===t||0===e?0:i[s[t]+s[e]]}},1857:(t,e,i)=>{const s=i(9279),n=i(4257);function r(t){this.mode=s.KANJI,this.data=t}r.getBitsLength=function(t){return 13*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let i=n.toSJIS(this.data[e]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13)}},t.exports=r},7182:(t,e)=>{e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function i(t,i,s){switch(t){case e.Patterns.PATTERN000:return(i+s)%2==0;case e.Patterns.PATTERN001:return i%2==0;case e.Patterns.PATTERN010:return s%3==0;case e.Patterns.PATTERN011:return(i+s)%3==0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2==0;case e.Patterns.PATTERN101:return i*s%2+i*s%3==0;case e.Patterns.PATTERN110:return(i*s%2+i*s%3)%2==0;case e.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){const e=t.size;let i=0,s=0,n=0,r=null,o=null;for(let a=0;a<e;a++){s=n=0,r=o=null;for(let h=0;h<e;h++){let e=t.get(a,h);e===r?s++:(s>=5&&(i+=s-5+3),r=e,s=1),e=t.get(h,a),e===o?n++:(n>=5&&(i+=n-5+3),o=e,n=1)}s>=5&&(i+=s-5+3),n>=5&&(i+=n-5+3)}return i},e.getPenaltyN2=function(t){const e=t.size;let i=0;for(let s=0;s<e-1;s++)for(let n=0;n<e-1;n++){const e=t.get(s,n)+t.get(s,n+1)+t.get(s+1,n)+t.get(s+1,n+1);4!==e&&0!==e||i++}return 3*i},e.getPenaltyN3=function(t){const e=t.size;let i=0,s=0,n=0;for(let r=0;r<e;r++){s=n=0;for(let o=0;o<e;o++)s=s<<1&2047|t.get(r,o),o>=10&&(1488===s||93===s)&&i++,n=n<<1&2047|t.get(o,r),o>=10&&(1488===n||93===n)&&i++}return 40*i},e.getPenaltyN4=function(t){let e=0;const i=t.data.length;for(let s=0;s<i;s++)e+=t.data[s];return 10*Math.abs(Math.ceil(100*e/i/5)-10)},e.applyMask=function(t,e){const s=e.size;for(let n=0;n<s;n++)for(let r=0;r<s;r++)e.isReserved(r,n)||e.xor(r,n,i(t,r,n))},e.getBestMask=function(t,i){const s=Object.keys(e.Patterns).length;let n=0,r=1/0;for(let o=0;o<s;o++){i(o),e.applyMask(o,t);const s=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(o,t),s<r&&(r=s,n=o)}return n}},9279:(t,e,i)=>{const s=i(2971),n=i(4499);e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!s.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return n.testNumeric(t)?e.NUMERIC:n.testAlphanumeric(t)?e.ALPHANUMERIC:n.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,i){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return i}}},5543:(t,e,i)=>{const s=i(9279);function n(t){this.mode=s.NUMERIC,this.data=t.toString()}n.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){let e,i,s;for(e=0;e+3<=this.data.length;e+=3)i=this.data.substr(e,3),s=parseInt(i,10),t.put(s,10);const n=this.data.length-e;n>0&&(i=this.data.substr(e),s=parseInt(i,10),t.put(s,3*n+1))},t.exports=n},1028:(t,e,i)=>{const s=i(7799);e.mul=function(t,e){const i=new Uint8Array(t.length+e.length-1);for(let n=0;n<t.length;n++)for(let r=0;r<e.length;r++)i[n+r]^=s.mul(t[n],e[r]);return i},e.mod=function(t,e){let i=new Uint8Array(t);for(;i.length-e.length>=0;){const t=i[0];for(let n=0;n<e.length;n++)i[n]^=s.mul(e[n],t);let n=0;for(;n<i.length&&0===i[n];)n++;i=i.slice(n)}return i},e.generateECPolynomial=function(t){let i=new Uint8Array([1]);for(let n=0;n<t;n++)i=e.mul(i,new Uint8Array([1,s.exp(n)]));return i}},7297:(t,e,i)=>{const s=i(4257),n=i(8803),r=i(1650),o=i(4914),a=i(2955),h=i(2351),l=i(7182),c=i(8582),u=i(2707),p=i(1562),d=i(4144),f=i(9279),m=i(6873);function g(t,e,i){const s=t.size,n=d.getEncodedBits(e,i);let r,o;for(r=0;r<15;r++)o=1==(n>>r&1),r<6?t.set(r,8,o,!0):r<8?t.set(r+1,8,o,!0):t.set(s-15+r,8,o,!0),r<8?t.set(8,s-r-1,o,!0):r<9?t.set(8,15-r-1+1,o,!0):t.set(8,15-r-1,o,!0);t.set(s-8,8,1,!0)}function y(t,e,i,n){let d;if(Array.isArray(t))d=m.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let s=e;if(!s){const e=m.rawSplit(t);s=p.getBestVersionForData(e,i)}d=m.fromString(t,s||40)}}const y=p.getBestVersionForData(d,i);if(!y)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<y)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+y+".\n")}else e=y;const b=function(t,e,i){const n=new r;i.forEach((function(e){n.put(e.mode.bit,4),n.put(e.getLength(),f.getCharCountIndicator(e.mode,t)),e.write(n)}));const o=8*(s.getSymbolTotalCodewords(t)-c.getTotalCodewordsCount(t,e));for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let t=0;t<a;t++)n.put(t%2?17:236,8);return function(t,e,i){const n=s.getSymbolTotalCodewords(e),r=n-c.getTotalCodewordsCount(e,i),o=c.getBlocksCount(e,i),a=o-n%o,h=Math.floor(n/o),l=Math.floor(r/o),p=l+1,d=h-l,f=new u(d);let m=0;const g=new Array(o),y=new Array(o);let b=0;const R=new Uint8Array(t.buffer);for(let t=0;t<o;t++){const e=t<a?l:p;g[t]=R.slice(m,m+e),y[t]=f.encode(g[t]),m+=e,b=Math.max(b,e)}const _=new Uint8Array(n);let S,v,w=0;for(S=0;S<b;S++)for(v=0;v<o;v++)S<g[v].length&&(_[w++]=g[v][S]);for(S=0;S<d;S++)for(v=0;v<o;v++)_[w++]=y[v][S];return _}(n,t,e)}(e,i,d),R=s.getSymbolSize(e),_=new o(R);return function(t,e){const i=t.size,s=h.getPositions(e);for(let e=0;e<s.length;e++){const n=s[e][0],r=s[e][1];for(let e=-1;e<=7;e++)if(!(n+e<=-1||i<=n+e))for(let s=-1;s<=7;s++)r+s<=-1||i<=r+s||(e>=0&&e<=6&&(0===s||6===s)||s>=0&&s<=6&&(0===e||6===e)||e>=2&&e<=4&&s>=2&&s<=4?t.set(n+e,r+s,!0,!0):t.set(n+e,r+s,!1,!0))}}(_,e),function(t){const e=t.size;for(let i=8;i<e-8;i++){const e=i%2==0;t.set(i,6,e,!0),t.set(6,i,e,!0)}}(_),function(t,e){const i=a.getPositions(e);for(let e=0;e<i.length;e++){const s=i[e][0],n=i[e][1];for(let e=-2;e<=2;e++)for(let i=-2;i<=2;i++)-2===e||2===e||-2===i||2===i||0===e&&0===i?t.set(s+e,n+i,!0,!0):t.set(s+e,n+i,!1,!0)}}(_,e),g(_,i,0),e>=7&&function(t,e){const i=t.size,s=p.getEncodedBits(e);let n,r,o;for(let e=0;e<18;e++)n=Math.floor(e/3),r=e%3+i-8-3,o=1==(s>>e&1),t.set(n,r,o,!0),t.set(r,n,o,!0)}(_,e),function(t,e){const i=t.size;let s=-1,n=i-1,r=7,o=0;for(let a=i-1;a>0;a-=2)for(6===a&&a--;;){for(let i=0;i<2;i++)if(!t.isReserved(n,a-i)){let s=!1;o<e.length&&(s=1==(e[o]>>>r&1)),t.set(n,a-i,s),r--,-1===r&&(o++,r=7)}if(n+=s,n<0||i<=n){n-=s,s=-s;break}}}(_,b),isNaN(n)&&(n=l.getBestMask(_,g.bind(null,_,i))),l.applyMask(n,_),g(_,i,n),{modules:_,version:e,errorCorrectionLevel:i,maskPattern:n,segments:d}}e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let i,r,o=n.M;return void 0!==e&&(o=n.from(e.errorCorrectionLevel,n.M),i=p.from(e.version),r=l.from(e.maskPattern),e.toSJISFunc&&s.setToSJISFunction(e.toSJISFunc)),y(t,i,o,r)}},2707:(t,e,i)=>{const s=i(1028);function n(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(t){this.degree=t,this.genPoly=s.generateECPolynomial(this.degree)},n.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const i=s.mod(e,this.genPoly),n=this.degree-i.length;if(n>0){const t=new Uint8Array(this.degree);return t.set(i,n),t}return i},t.exports=n},4499:(t,e)=>{const i="[0-9]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+")(?:.|[\r\n]))+";e.KANJI=new RegExp(s,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(n,"g"),e.NUMERIC=new RegExp(i,"g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const r=new RegExp("^"+s+"$"),o=new RegExp("^"+i+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return r.test(t)},e.testNumeric=function(t){return o.test(t)},e.testAlphanumeric=function(t){return a.test(t)}},6873:(t,e,i)=>{const s=i(9279),n=i(5543),r=i(7042),o=i(8086),a=i(1857),h=i(4499),l=i(4257),c=i(2596);function u(t){return unescape(encodeURIComponent(t)).length}function p(t,e,i){const s=[];let n;for(;null!==(n=t.exec(i));)s.push({data:n[0],index:n.index,mode:e,length:n[0].length});return s}function d(t){const e=p(h.NUMERIC,s.NUMERIC,t),i=p(h.ALPHANUMERIC,s.ALPHANUMERIC,t);let n,r;return l.isKanjiModeEnabled()?(n=p(h.BYTE,s.BYTE,t),r=p(h.KANJI,s.KANJI,t)):(n=p(h.BYTE_KANJI,s.BYTE,t),r=[]),e.concat(i,n,r).sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function f(t,e){switch(e){case s.NUMERIC:return n.getBitsLength(t);case s.ALPHANUMERIC:return r.getBitsLength(t);case s.KANJI:return a.getBitsLength(t);case s.BYTE:return o.getBitsLength(t)}}function m(t,e){let i;const h=s.getBestModeForData(t);if(i=s.from(e,h),i!==s.BYTE&&i.bit<h.bit)throw new Error('"'+t+'" cannot be encoded with mode '+s.toString(i)+".\n Suggested mode is: "+s.toString(h));switch(i!==s.KANJI||l.isKanjiModeEnabled()||(i=s.BYTE),i){case s.NUMERIC:return new n(t);case s.ALPHANUMERIC:return new r(t);case s.KANJI:return new a(t);case s.BYTE:return new o(t)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"==typeof e?t.push(m(e,null)):e.data&&t.push(m(e.data,e.mode)),t}),[])},e.fromString=function(t,i){const n=function(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i];switch(n.mode){case s.NUMERIC:e.push([n,{data:n.data,mode:s.ALPHANUMERIC,length:n.length},{data:n.data,mode:s.BYTE,length:n.length}]);break;case s.ALPHANUMERIC:e.push([n,{data:n.data,mode:s.BYTE,length:n.length}]);break;case s.KANJI:e.push([n,{data:n.data,mode:s.BYTE,length:u(n.data)}]);break;case s.BYTE:e.push([{data:n.data,mode:s.BYTE,length:u(n.data)}])}}return e}(d(t,l.isKanjiModeEnabled())),r=function(t,e){const i={},n={start:{}};let r=["start"];for(let o=0;o<t.length;o++){const a=t[o],h=[];for(let t=0;t<a.length;t++){const l=a[t],c=""+o+t;h.push(c),i[c]={node:l,lastCount:0},n[c]={};for(let t=0;t<r.length;t++){const o=r[t];i[o]&&i[o].node.mode===l.mode?(n[o][c]=f(i[o].lastCount+l.length,l.mode)-f(i[o].lastCount,l.mode),i[o].lastCount+=l.length):(i[o]&&(i[o].lastCount=l.length),n[o][c]=f(l.length,l.mode)+4+s.getCharCountIndicator(l.mode,e))}}r=h}for(let t=0;t<r.length;t++)n[r[t]].end=0;return{map:n,table:i}}(n,i),o=c.find_path(r.map,"start","end"),a=[];for(let t=1;t<o.length-1;t++)a.push(r.table[o[t]].node);return e.fromArray(a.reduce((function(t,e){const i=t.length-1>=0?t[t.length-1]:null;return i&&i.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[]))},e.rawSplit=function(t){return e.fromArray(d(t,l.isKanjiModeEnabled()))}},4257:(t,e)=>{let i;const s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return s[t]},e.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');i=t},e.isKanjiModeEnabled=function(){return void 0!==i},e.toSJIS=function(t){return i(t)}},2971:(t,e)=>{e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},1562:(t,e,i)=>{const s=i(4257),n=i(8582),r=i(8803),o=i(9279),a=i(2971),h=s.getBCHDigit(7973);function l(t,e){return o.getCharCountIndicator(t,e)+4}function c(t,e){let i=0;return t.forEach((function(t){const s=l(t.mode,e);i+=s+t.getBitsLength()})),i}e.from=function(t,e){return a.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,i){if(!a.isValid(t))throw new Error("Invalid QR Code version");void 0===i&&(i=o.BYTE);const r=8*(s.getSymbolTotalCodewords(t)-n.getTotalCodewordsCount(t,e));if(i===o.MIXED)return r;const h=r-l(i,t);switch(i){case o.NUMERIC:return Math.floor(h/10*3);case o.ALPHANUMERIC:return Math.floor(h/11*2);case o.KANJI:return Math.floor(h/13);case o.BYTE:default:return Math.floor(h/8)}},e.getBestVersionForData=function(t,i){let s;const n=r.from(i,r.M);if(Array.isArray(t)){if(t.length>1)return function(t,i){for(let s=1;s<=40;s++)if(c(t,s)<=e.getCapacity(s,i,o.MIXED))return s}(t,n);if(0===t.length)return 1;s=t[0]}else s=t;return function(t,i,s){for(let n=1;n<=40;n++)if(i<=e.getCapacity(n,s,t))return n}(s.mode,s.getLength(),n)},e.getEncodedBits=function(t){if(!a.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;s.getBCHDigit(e)-h>=0;)e^=7973<<s.getBCHDigit(e)-h;return t<<12|e}},7083:(t,e,i)=>{const s=i(3724);e.render=function(t,e,i){let n=i,r=e;void 0!==n||e&&e.getContext||(n=e,e=void 0),e||(r=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),n=s.getOptions(n);const o=s.getImageWidth(t.modules.size,n),a=r.getContext("2d"),h=a.createImageData(o,o);return s.qrToImageData(h.data,t,n),function(t,e,i){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=i,e.width=i,e.style.height=i+"px",e.style.width=i+"px"}(a,r,o),a.putImageData(h,0,0),r},e.renderToDataURL=function(t,i,s){let n=s;void 0!==n||i&&i.getContext||(n=i,i=void 0),n||(n={});const r=e.render(t,i,n),o=n.type||"image/png",a=n.rendererOpts||{};return r.toDataURL(o,a.quality)}},2858:(t,e,i)=>{const s=i(3724);function n(t,e){const i=t.a/255,s=e+'="'+t.hex+'"';return i<1?s+" "+e+'-opacity="'+i.toFixed(2).slice(1)+'"':s}function r(t,e,i){let s=t+e;return void 0!==i&&(s+=" "+i),s}e.render=function(t,e,i){const o=s.getOptions(e),a=t.modules.size,h=t.modules.data,l=a+2*o.margin,c=o.color.light.a?"<path "+n(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+n(o.color.dark,"stroke")+' d="'+function(t,e,i){let s="",n=0,o=!1,a=0;for(let h=0;h<t.length;h++){const l=Math.floor(h%e),c=Math.floor(h/e);l||o||(o=!0),t[h]?(a++,h>0&&l>0&&t[h-1]||(s+=o?r("M",l+i,.5+c+i):r("m",n,0),n=0,o=!1),l+1<e&&t[h+1]||(s+=r("h",a),a=0)):n++}return s}(h,a,o.margin)+'"/>',p='viewBox="0 0 '+l+" "+l+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+p+' shape-rendering="crispEdges">'+c+u+"</svg>\n";return"function"==typeof i&&i(null,d),d}},3724:(t,e)=>{function i(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");const i=parseInt(e.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,s=t.width&&t.width>=21?t.width:void 0,n=t.scale||4;return{width:s,scale:s?4:n,margin:e,color:{dark:i(t.color.dark||"#000000ff"),light:i(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,i){const s=e.getScale(t,i);return Math.floor((t+2*i.margin)*s)},e.qrToImageData=function(t,i,s){const n=i.modules.size,r=i.modules.data,o=e.getScale(n,s),a=Math.floor((n+2*s.margin)*o),h=s.margin*o,l=[s.color.light,s.color.dark];for(let e=0;e<a;e++)for(let i=0;i<a;i++){let c=4*(e*a+i),u=s.color.light;e>=h&&i>=h&&e<a-h&&i<a-h&&(u=l[r[Math.floor((e-h)/o)*n+Math.floor((i-h)/o)]?1:0]),t[c++]=u.r,t[c++]=u.g,t[c++]=u.b,t[c]=u.a}}},2428:(t,e,i)=>{"use strict";const s=i(7237),n=i(0),r=i(3841),o=i(550);function a(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function h(t,e){return e.encode?e.strict?s(t):encodeURIComponent(t):t}function l(t,e){return e.decode?n(t):t}function c(t){return Array.isArray(t)?t.sort():"object"==typeof t?c(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function u(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function p(t){const e=(t=u(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function d(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function f(t,e){a((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const i=function(t){let e;switch(t.arrayFormat){case"index":return(t,i,s)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===s[t]&&(s[t]={}),s[t][e[1]]=i):s[t]=i};case"bracket":return(t,i,s)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==s[t]?s[t]=[].concat(s[t],i):s[t]=[i]:s[t]=i};case"comma":case"separator":return(e,i,s)=>{const n="string"==typeof i&&i.includes(t.arrayFormatSeparator),r="string"==typeof i&&!n&&l(i,t).includes(t.arrayFormatSeparator);i=r?l(i,t):i;const o=n||r?i.split(t.arrayFormatSeparator).map((e=>l(e,t))):null===i?i:l(i,t);s[e]=o};default:return(t,e,i)=>{void 0!==i[t]?i[t]=[].concat(i[t],e):i[t]=e}}}(e),s=Object.create(null);if("string"!=typeof t)return s;if(!(t=t.trim().replace(/^[?#&]/,"")))return s;for(const n of t.split("&")){if(""===n)continue;let[t,o]=r(e.decode?n.replace(/\+/g," "):n,"=");o=void 0===o?null:["comma","separator"].includes(e.arrayFormat)?o:l(o,e),i(l(t,e),o,s)}for(const t of Object.keys(s)){const i=s[t];if("object"==typeof i&&null!==i)for(const t of Object.keys(i))i[t]=d(i[t],e);else s[t]=d(i,e)}return!1===e.sort?s:(!0===e.sort?Object.keys(s).sort():Object.keys(s).sort(e.sort)).reduce(((t,e)=>{const i=s[e];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?t[e]=c(i):t[e]=i,t}),Object.create(null))}e.extract=p,e.parse=f,e.stringify=(t,e)=>{if(!t)return"";a((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const i=i=>e.skipNull&&null==t[i]||e.skipEmptyString&&""===t[i],s=function(t){switch(t.arrayFormat){case"index":return e=>(i,s)=>{const n=i.length;return void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?i:null===s?[...i,[h(e,t),"[",n,"]"].join("")]:[...i,[h(e,t),"[",h(n,t),"]=",h(s,t)].join("")]};case"bracket":return e=>(i,s)=>void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?i:null===s?[...i,[h(e,t),"[]"].join("")]:[...i,[h(e,t),"[]=",h(s,t)].join("")];case"comma":case"separator":return e=>(i,s)=>null==s||0===s.length?i:0===i.length?[[h(e,t),"=",h(s,t)].join("")]:[[i,h(s,t)].join(t.arrayFormatSeparator)];default:return e=>(i,s)=>void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?i:null===s?[...i,h(e,t)]:[...i,[h(e,t),"=",h(s,t)].join("")]}}(e),n={};for(const e of Object.keys(t))i(e)||(n[e]=t[e]);const r=Object.keys(n);return!1!==e.sort&&r.sort(e.sort),r.map((i=>{const n=t[i];return void 0===n?"":null===n?h(i,e):Array.isArray(n)?n.reduce(s(i),[]).join("&"):h(i,e)+"="+h(n,e)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[i,s]=r(t,"#");return Object.assign({url:i.split("?")[0]||"",query:f(p(t),e)},e&&e.parseFragmentIdentifier&&s?{fragmentIdentifier:l(s,e)}:{})},e.stringifyUrl=(t,i)=>{i=Object.assign({encode:!0,strict:!0},i);const s=u(t.url).split("?")[0]||"",n=e.extract(t.url),r=e.parse(n,{sort:!1}),o=Object.assign(r,t.query);let a=e.stringify(o,i);a&&(a=`?${a}`);let l=function(t){let e="";const i=t.indexOf("#");return-1!==i&&(e=t.slice(i)),e}(t.url);return t.fragmentIdentifier&&(l=`#${h(t.fragmentIdentifier,i)}`),`${s}${a}${l}`},e.pick=(t,i,s)=>{s=Object.assign({parseFragmentIdentifier:!0},s);const{url:n,query:r,fragmentIdentifier:a}=e.parseUrl(t,s);return e.stringifyUrl({url:n,query:o(r,i),fragmentIdentifier:a},s)},e.exclude=(t,i,s)=>{const n=Array.isArray(i)?t=>!i.includes(t):(t,e)=>!i(t,e);return e.pick(t,n,s)}},3841:t=>{"use strict";t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const i=t.indexOf(e);return-1===i?[t]:[t.slice(0,i),t.slice(i+e.length)]}},7237:t=>{"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},4188:t=>{var e=function(){this.state=new Array(8);for(var t=0;t<this.state.length;t++)this.state[t]=64};e.BUTTON_A=0,e.BUTTON_B=1,e.BUTTON_SELECT=2,e.BUTTON_START=3,e.BUTTON_UP=4,e.BUTTON_DOWN=5,e.BUTTON_LEFT=6,e.BUTTON_RIGHT=7,e.prototype={buttonDown:function(t){this.state[t]=65},buttonUp:function(t){this.state[t]=64}},t.exports=e},9990:(t,e,i)=>{var s=i(1610),n=function(t){this.nes=t,this.mem=null,this.REG_ACC=null,this.REG_X=null,this.REG_Y=null,this.REG_SP=null,this.REG_PC=null,this.REG_PC_NEW=null,this.REG_STATUS=null,this.F_CARRY=null,this.F_DECIMAL=null,this.F_INTERRUPT=null,this.F_INTERRUPT_NEW=null,this.F_OVERFLOW=null,this.F_SIGN=null,this.F_ZERO=null,this.F_NOTUSED=null,this.F_NOTUSED_NEW=null,this.F_BRK=null,this.F_BRK_NEW=null,this.opdata=null,this.cyclesToHalt=null,this.crash=null,this.irqRequested=null,this.irqType=null,this.reset()};n.prototype={IRQ_NORMAL:0,IRQ_NMI:1,IRQ_RESET:2,reset:function(){this.mem=new Array(65536);for(var t=0;t<8192;t++)this.mem[t]=255;for(var e=0;e<4;e++){var i=2048*e;this.mem[i+8]=247,this.mem[i+9]=239,this.mem[i+10]=223,this.mem[i+15]=191}for(var s=8193;s<this.mem.length;s++)this.mem[s]=0;this.REG_ACC=0,this.REG_X=0,this.REG_Y=0,this.REG_SP=511,this.REG_PC=32767,this.REG_PC_NEW=32767,this.REG_STATUS=40,this.setStatus(40),this.F_CARRY=0,this.F_DECIMAL=0,this.F_INTERRUPT=1,this.F_INTERRUPT_NEW=1,this.F_OVERFLOW=0,this.F_SIGN=0,this.F_ZERO=1,this.F_NOTUSED=1,this.F_NOTUSED_NEW=1,this.F_BRK=1,this.F_BRK_NEW=1,this.opdata=(new r).opdata,this.cyclesToHalt=0,this.crash=!1,this.irqRequested=!1,this.irqType=null},emulate:function(){var t,e;if(this.irqRequested){switch(t=this.F_CARRY|(0===this.F_ZERO?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7,this.REG_PC_NEW=this.REG_PC,this.F_INTERRUPT_NEW=this.F_INTERRUPT,this.irqType){case 0:if(0!==this.F_INTERRUPT)break;this.doIrq(t);break;case 1:this.doNonMaskableInterrupt(t);break;case 2:this.doResetInterrupt()}this.REG_PC=this.REG_PC_NEW,this.F_INTERRUPT=this.F_INTERRUPT_NEW,this.F_BRK=this.F_BRK_NEW,this.irqRequested=!1}var i=this.opdata[this.nes.mmap.load(this.REG_PC+1)],s=i>>24,n=0,r=i>>8&255,o=this.REG_PC;this.REG_PC+=i>>16&255;var a=0;switch(r){case 0:a=this.load(o+2);break;case 1:a=this.load(o+2),a+=a<128?this.REG_PC:this.REG_PC-256;break;case 2:break;case 3:a=this.load16bit(o+2);break;case 4:a=this.REG_ACC;break;case 5:a=this.REG_PC;break;case 6:a=this.load(o+2)+this.REG_X&255;break;case 7:a=this.load(o+2)+this.REG_Y&255;break;case 8:(65280&(a=this.load16bit(o+2)))!=(a+this.REG_X&65280)&&(n=1),a+=this.REG_X;break;case 9:(65280&(a=this.load16bit(o+2)))!=(a+this.REG_Y&65280)&&(n=1),a+=this.REG_Y;break;case 10:(65280&(a=this.load(o+2)))!=(a+this.REG_X&65280)&&(n=1),a+=this.REG_X,a&=255,a=this.load16bit(a);break;case 11:(65280&(a=this.load16bit(this.load(o+2))))!=(a+this.REG_Y&65280)&&(n=1),a+=this.REG_Y;break;case 12:a=(a=this.load16bit(o+2))<8191?this.mem[a]+(this.mem[65280&a|1+(255&a)&255]<<8):this.nes.mmap.load(a)+(this.nes.mmap.load(65280&a|1+(255&a)&255)<<8)}switch(a&=65535,255&i){case 0:t=this.REG_ACC+this.load(a)+this.F_CARRY,0==(128&(this.REG_ACC^this.load(a)))&&0!=(128&(this.REG_ACC^t))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t>255?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t,this.REG_ACC=255&t,s+=n;break;case 1:this.REG_ACC=this.REG_ACC&this.load(a),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,11!==r&&(s+=n);break;case 2:4===r?(this.F_CARRY=this.REG_ACC>>7&1,this.REG_ACC=this.REG_ACC<<1&255,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC):(t=this.load(a),this.F_CARRY=t>>7&1,t=t<<1&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.write(a,t));break;case 3:0===this.F_CARRY&&(s+=(65280&o)!=(65280&a)?2:1,this.REG_PC=a);break;case 4:1===this.F_CARRY&&(s+=(65280&o)!=(65280&a)?2:1,this.REG_PC=a);break;case 5:0===this.F_ZERO&&(s+=(65280&o)!=(65280&a)?2:1,this.REG_PC=a);break;case 6:t=this.load(a),this.F_SIGN=t>>7&1,this.F_OVERFLOW=t>>6&1,t&=this.REG_ACC,this.F_ZERO=t;break;case 7:1===this.F_SIGN&&(s++,this.REG_PC=a);break;case 8:0!==this.F_ZERO&&(s+=(65280&o)!=(65280&a)?2:1,this.REG_PC=a);break;case 9:0===this.F_SIGN&&(s+=(65280&o)!=(65280&a)?2:1,this.REG_PC=a);break;case 10:this.REG_PC+=2,this.push(this.REG_PC>>8&255),this.push(255&this.REG_PC),this.F_BRK=1,this.push(this.F_CARRY|(0===this.F_ZERO?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7),this.F_INTERRUPT=1,this.REG_PC=this.load16bit(65534),this.REG_PC--;break;case 11:0===this.F_OVERFLOW&&(s+=(65280&o)!=(65280&a)?2:1,this.REG_PC=a);break;case 12:1===this.F_OVERFLOW&&(s+=(65280&o)!=(65280&a)?2:1,this.REG_PC=a);break;case 13:this.F_CARRY=0;break;case 14:this.F_DECIMAL=0;break;case 15:this.F_INTERRUPT=0;break;case 16:this.F_OVERFLOW=0;break;case 17:t=this.REG_ACC-this.load(a),this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t,s+=n;break;case 18:t=this.REG_X-this.load(a),this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t;break;case 19:t=this.REG_Y-this.load(a),this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t;break;case 20:t=this.load(a)-1&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.write(a,t);break;case 21:this.REG_X=this.REG_X-1&255,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break;case 22:this.REG_Y=this.REG_Y-1&255,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break;case 23:this.REG_ACC=255&(this.load(a)^this.REG_ACC),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,s+=n;break;case 24:t=this.load(a)+1&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.write(a,255&t);break;case 25:this.REG_X=this.REG_X+1&255,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break;case 26:this.REG_Y++,this.REG_Y&=255,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break;case 27:this.REG_PC=a-1;break;case 28:this.push(this.REG_PC>>8&255),this.push(255&this.REG_PC),this.REG_PC=a-1;break;case 29:this.REG_ACC=this.load(a),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,s+=n;break;case 30:this.REG_X=this.load(a),this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X,s+=n;break;case 31:this.REG_Y=this.load(a),this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y,s+=n;break;case 32:4===r?(t=255&this.REG_ACC,this.F_CARRY=1&t,t>>=1,this.REG_ACC=t):(t=255&this.load(a),this.F_CARRY=1&t,t>>=1,this.write(a,t)),this.F_SIGN=0,this.F_ZERO=t;break;case 33:case 68:break;case 34:t=255&(this.load(a)|this.REG_ACC),this.F_SIGN=t>>7&1,this.F_ZERO=t,this.REG_ACC=t,11!==r&&(s+=n);break;case 35:this.push(this.REG_ACC);break;case 36:this.F_BRK=1,this.push(this.F_CARRY|(0===this.F_ZERO?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7);break;case 37:this.REG_ACC=this.pull(),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break;case 38:t=this.pull(),this.F_CARRY=1&t,this.F_ZERO=1==(t>>1&1)?0:1,this.F_INTERRUPT=t>>2&1,this.F_DECIMAL=t>>3&1,this.F_BRK=t>>4&1,this.F_NOTUSED=t>>5&1,this.F_OVERFLOW=t>>6&1,this.F_SIGN=t>>7&1,this.F_NOTUSED=1;break;case 39:4===r?(t=this.REG_ACC,e=this.F_CARRY,this.F_CARRY=t>>7&1,t=(t<<1&255)+e,this.REG_ACC=t):(t=this.load(a),e=this.F_CARRY,this.F_CARRY=t>>7&1,t=(t<<1&255)+e,this.write(a,t)),this.F_SIGN=t>>7&1,this.F_ZERO=t;break;case 40:4===r?(e=this.F_CARRY<<7,this.F_CARRY=1&this.REG_ACC,t=(this.REG_ACC>>1)+e,this.REG_ACC=t):(t=this.load(a),e=this.F_CARRY<<7,this.F_CARRY=1&t,t=(t>>1)+e,this.write(a,t)),this.F_SIGN=t>>7&1,this.F_ZERO=t;break;case 41:if(t=this.pull(),this.F_CARRY=1&t,this.F_ZERO=0==(t>>1&1)?1:0,this.F_INTERRUPT=t>>2&1,this.F_DECIMAL=t>>3&1,this.F_BRK=t>>4&1,this.F_NOTUSED=t>>5&1,this.F_OVERFLOW=t>>6&1,this.F_SIGN=t>>7&1,this.REG_PC=this.pull(),this.REG_PC+=this.pull()<<8,65535===this.REG_PC)return;this.REG_PC--,this.F_NOTUSED=1;break;case 42:if(this.REG_PC=this.pull(),this.REG_PC+=this.pull()<<8,65535===this.REG_PC)return;break;case 43:t=this.REG_ACC-this.load(a)-(1-this.F_CARRY),this.F_SIGN=t>>7&1,this.F_ZERO=255&t,0!=(128&(this.REG_ACC^t))&&0!=(128&(this.REG_ACC^this.load(a)))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t<0?0:1,this.REG_ACC=255&t,11!==r&&(s+=n);break;case 44:this.F_CARRY=1;break;case 45:this.F_DECIMAL=1;break;case 46:this.F_INTERRUPT=1;break;case 47:this.write(a,this.REG_ACC);break;case 48:this.write(a,this.REG_X);break;case 49:this.write(a,this.REG_Y);break;case 50:this.REG_X=this.REG_ACC,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break;case 51:this.REG_Y=this.REG_ACC,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break;case 52:this.REG_X=this.REG_SP-256,this.F_SIGN=this.REG_SP>>7&1,this.F_ZERO=this.REG_X;break;case 53:this.REG_ACC=this.REG_X,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break;case 54:this.REG_SP=this.REG_X+256,this.stackWrap();break;case 55:this.REG_ACC=this.REG_Y,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break;case 56:t=this.REG_ACC&this.load(a),this.F_CARRY=1&t,this.REG_ACC=this.F_ZERO=t>>1,this.F_SIGN=0;break;case 57:this.REG_ACC=this.F_ZERO=this.REG_ACC&this.load(a),this.F_CARRY=this.F_SIGN=this.REG_ACC>>7&1;break;case 58:t=this.REG_ACC&this.load(a),this.REG_ACC=this.F_ZERO=(t>>1)+(this.F_CARRY<<7),this.F_SIGN=this.F_CARRY,this.F_CARRY=t>>7&1,this.F_OVERFLOW=1&(t>>7^t>>6);break;case 59:t=(this.REG_X&this.REG_ACC)-this.load(a),this.F_SIGN=t>>7&1,this.F_ZERO=255&t,0!=(128&(this.REG_X^t))&&0!=(128&(this.REG_X^this.load(a)))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t<0?0:1,this.REG_X=255&t;break;case 60:this.REG_ACC=this.REG_X=this.F_ZERO=this.load(a),this.F_SIGN=this.REG_ACC>>7&1,s+=n;break;case 61:this.write(a,this.REG_ACC&this.REG_X);break;case 62:t=this.load(a)-1&255,this.write(a,t),t=this.REG_ACC-t,this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t,11!==r&&(s+=n);break;case 63:t=this.load(a)+1&255,this.write(a,t),t=this.REG_ACC-t-(1-this.F_CARRY),this.F_SIGN=t>>7&1,this.F_ZERO=255&t,0!=(128&(this.REG_ACC^t))&&0!=(128&(this.REG_ACC^this.load(a)))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t<0?0:1,this.REG_ACC=255&t,11!==r&&(s+=n);break;case 64:t=this.load(a),e=this.F_CARRY,this.F_CARRY=t>>7&1,t=(t<<1&255)+e,this.write(a,t),this.REG_ACC=this.REG_ACC&t,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,11!==r&&(s+=n);break;case 65:t=this.load(a),e=this.F_CARRY<<7,this.F_CARRY=1&t,t=(t>>1)+e,this.write(a,t),t=this.REG_ACC+this.load(a)+this.F_CARRY,0==(128&(this.REG_ACC^this.load(a)))&&0!=(128&(this.REG_ACC^t))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t>255?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t,this.REG_ACC=255&t,11!==r&&(s+=n);break;case 66:t=this.load(a),this.F_CARRY=t>>7&1,t=t<<1&255,this.write(a,t),this.REG_ACC=this.REG_ACC|t,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,11!==r&&(s+=n);break;case 67:t=255&this.load(a),this.F_CARRY=1&t,t>>=1,this.write(a,t),this.REG_ACC=this.REG_ACC^t,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,11!==r&&(s+=n);break;case 69:this.load(a),11!==r&&(s+=n);break;default:this.nes.stop(),this.nes.crashMessage="Game crashed, invalid opcode at address $"+o.toString(16)}return s},load:function(t){return t<8192?this.mem[2047&t]:this.nes.mmap.load(t)},load16bit:function(t){return t<8191?this.mem[2047&t]|this.mem[t+1&2047]<<8:this.nes.mmap.load(t)|this.nes.mmap.load(t+1)<<8},write:function(t,e){t<8192?this.mem[2047&t]=e:this.nes.mmap.write(t,e)},requestIrq:function(t){this.irqRequested&&t===this.IRQ_NORMAL||(this.irqRequested=!0,this.irqType=t)},push:function(t){this.nes.mmap.write(this.REG_SP,t),this.REG_SP--,this.REG_SP=256|255&this.REG_SP},stackWrap:function(){this.REG_SP=256|255&this.REG_SP},pull:function(){return this.REG_SP++,this.REG_SP=256|255&this.REG_SP,this.nes.mmap.load(this.REG_SP)},pageCrossed:function(t,e){return(65280&t)!=(65280&e)},haltCycles:function(t){this.cyclesToHalt+=t},doNonMaskableInterrupt:function(t){0!=(128&this.nes.mmap.load(8192))&&(this.REG_PC_NEW++,this.push(this.REG_PC_NEW>>8&255),this.push(255&this.REG_PC_NEW),this.push(t),this.REG_PC_NEW=this.nes.mmap.load(65530)|this.nes.mmap.load(65531)<<8,this.REG_PC_NEW--)},doResetInterrupt:function(){this.REG_PC_NEW=this.nes.mmap.load(65532)|this.nes.mmap.load(65533)<<8,this.REG_PC_NEW--},doIrq:function(t){this.REG_PC_NEW++,this.push(this.REG_PC_NEW>>8&255),this.push(255&this.REG_PC_NEW),this.push(t),this.F_INTERRUPT_NEW=1,this.F_BRK_NEW=0,this.REG_PC_NEW=this.nes.mmap.load(65534)|this.nes.mmap.load(65535)<<8,this.REG_PC_NEW--},getStatus:function(){return this.F_CARRY|this.F_ZERO<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7},setStatus:function(t){this.F_CARRY=1&t,this.F_ZERO=t>>1&1,this.F_INTERRUPT=t>>2&1,this.F_DECIMAL=t>>3&1,this.F_BRK=t>>4&1,this.F_NOTUSED=t>>5&1,this.F_OVERFLOW=t>>6&1,this.F_SIGN=t>>7&1},JSON_PROPERTIES:["mem","cyclesToHalt","irqRequested","irqType","REG_ACC","REG_X","REG_Y","REG_SP","REG_PC","REG_PC_NEW","REG_STATUS","F_CARRY","F_DECIMAL","F_INTERRUPT","F_INTERRUPT_NEW","F_OVERFLOW","F_SIGN","F_ZERO","F_NOTUSED","F_NOTUSED_NEW","F_BRK","F_BRK_NEW"],toJSON:function(){return s.toJSON(this)},fromJSON:function(t){s.fromJSON(this,t)}};var r=function(){this.opdata=new Array(256);for(var t=0;t<256;t++)this.opdata[t]=255;this.setOp(this.INS_ADC,105,this.ADDR_IMM,2,2),this.setOp(this.INS_ADC,101,this.ADDR_ZP,2,3),this.setOp(this.INS_ADC,117,this.ADDR_ZPX,2,4),this.setOp(this.INS_ADC,109,this.ADDR_ABS,3,4),this.setOp(this.INS_ADC,125,this.ADDR_ABSX,3,4),this.setOp(this.INS_ADC,121,this.ADDR_ABSY,3,4),this.setOp(this.INS_ADC,97,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_ADC,113,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_AND,41,this.ADDR_IMM,2,2),this.setOp(this.INS_AND,37,this.ADDR_ZP,2,3),this.setOp(this.INS_AND,53,this.ADDR_ZPX,2,4),this.setOp(this.INS_AND,45,this.ADDR_ABS,3,4),this.setOp(this.INS_AND,61,this.ADDR_ABSX,3,4),this.setOp(this.INS_AND,57,this.ADDR_ABSY,3,4),this.setOp(this.INS_AND,33,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_AND,49,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_ASL,10,this.ADDR_ACC,1,2),this.setOp(this.INS_ASL,6,this.ADDR_ZP,2,5),this.setOp(this.INS_ASL,22,this.ADDR_ZPX,2,6),this.setOp(this.INS_ASL,14,this.ADDR_ABS,3,6),this.setOp(this.INS_ASL,30,this.ADDR_ABSX,3,7),this.setOp(this.INS_BCC,144,this.ADDR_REL,2,2),this.setOp(this.INS_BCS,176,this.ADDR_REL,2,2),this.setOp(this.INS_BEQ,240,this.ADDR_REL,2,2),this.setOp(this.INS_BIT,36,this.ADDR_ZP,2,3),this.setOp(this.INS_BIT,44,this.ADDR_ABS,3,4),this.setOp(this.INS_BMI,48,this.ADDR_REL,2,2),this.setOp(this.INS_BNE,208,this.ADDR_REL,2,2),this.setOp(this.INS_BPL,16,this.ADDR_REL,2,2),this.setOp(this.INS_BRK,0,this.ADDR_IMP,1,7),this.setOp(this.INS_BVC,80,this.ADDR_REL,2,2),this.setOp(this.INS_BVS,112,this.ADDR_REL,2,2),this.setOp(this.INS_CLC,24,this.ADDR_IMP,1,2),this.setOp(this.INS_CLD,216,this.ADDR_IMP,1,2),this.setOp(this.INS_CLI,88,this.ADDR_IMP,1,2),this.setOp(this.INS_CLV,184,this.ADDR_IMP,1,2),this.setOp(this.INS_CMP,201,this.ADDR_IMM,2,2),this.setOp(this.INS_CMP,197,this.ADDR_ZP,2,3),this.setOp(this.INS_CMP,213,this.ADDR_ZPX,2,4),this.setOp(this.INS_CMP,205,this.ADDR_ABS,3,4),this.setOp(this.INS_CMP,221,this.ADDR_ABSX,3,4),this.setOp(this.INS_CMP,217,this.ADDR_ABSY,3,4),this.setOp(this.INS_CMP,193,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_CMP,209,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_CPX,224,this.ADDR_IMM,2,2),this.setOp(this.INS_CPX,228,this.ADDR_ZP,2,3),this.setOp(this.INS_CPX,236,this.ADDR_ABS,3,4),this.setOp(this.INS_CPY,192,this.ADDR_IMM,2,2),this.setOp(this.INS_CPY,196,this.ADDR_ZP,2,3),this.setOp(this.INS_CPY,204,this.ADDR_ABS,3,4),this.setOp(this.INS_DEC,198,this.ADDR_ZP,2,5),this.setOp(this.INS_DEC,214,this.ADDR_ZPX,2,6),this.setOp(this.INS_DEC,206,this.ADDR_ABS,3,6),this.setOp(this.INS_DEC,222,this.ADDR_ABSX,3,7),this.setOp(this.INS_DEX,202,this.ADDR_IMP,1,2),this.setOp(this.INS_DEY,136,this.ADDR_IMP,1,2),this.setOp(this.INS_EOR,73,this.ADDR_IMM,2,2),this.setOp(this.INS_EOR,69,this.ADDR_ZP,2,3),this.setOp(this.INS_EOR,85,this.ADDR_ZPX,2,4),this.setOp(this.INS_EOR,77,this.ADDR_ABS,3,4),this.setOp(this.INS_EOR,93,this.ADDR_ABSX,3,4),this.setOp(this.INS_EOR,89,this.ADDR_ABSY,3,4),this.setOp(this.INS_EOR,65,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_EOR,81,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_INC,230,this.ADDR_ZP,2,5),this.setOp(this.INS_INC,246,this.ADDR_ZPX,2,6),this.setOp(this.INS_INC,238,this.ADDR_ABS,3,6),this.setOp(this.INS_INC,254,this.ADDR_ABSX,3,7),this.setOp(this.INS_INX,232,this.ADDR_IMP,1,2),this.setOp(this.INS_INY,200,this.ADDR_IMP,1,2),this.setOp(this.INS_JMP,76,this.ADDR_ABS,3,3),this.setOp(this.INS_JMP,108,this.ADDR_INDABS,3,5),this.setOp(this.INS_JSR,32,this.ADDR_ABS,3,6),this.setOp(this.INS_LDA,169,this.ADDR_IMM,2,2),this.setOp(this.INS_LDA,165,this.ADDR_ZP,2,3),this.setOp(this.INS_LDA,181,this.ADDR_ZPX,2,4),this.setOp(this.INS_LDA,173,this.ADDR_ABS,3,4),this.setOp(this.INS_LDA,189,this.ADDR_ABSX,3,4),this.setOp(this.INS_LDA,185,this.ADDR_ABSY,3,4),this.setOp(this.INS_LDA,161,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_LDA,177,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_LDX,162,this.ADDR_IMM,2,2),this.setOp(this.INS_LDX,166,this.ADDR_ZP,2,3),this.setOp(this.INS_LDX,182,this.ADDR_ZPY,2,4),this.setOp(this.INS_LDX,174,this.ADDR_ABS,3,4),this.setOp(this.INS_LDX,190,this.ADDR_ABSY,3,4),this.setOp(this.INS_LDY,160,this.ADDR_IMM,2,2),this.setOp(this.INS_LDY,164,this.ADDR_ZP,2,3),this.setOp(this.INS_LDY,180,this.ADDR_ZPX,2,4),this.setOp(this.INS_LDY,172,this.ADDR_ABS,3,4),this.setOp(this.INS_LDY,188,this.ADDR_ABSX,3,4),this.setOp(this.INS_LSR,74,this.ADDR_ACC,1,2),this.setOp(this.INS_LSR,70,this.ADDR_ZP,2,5),this.setOp(this.INS_LSR,86,this.ADDR_ZPX,2,6),this.setOp(this.INS_LSR,78,this.ADDR_ABS,3,6),this.setOp(this.INS_LSR,94,this.ADDR_ABSX,3,7),this.setOp(this.INS_NOP,26,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,58,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,90,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,122,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,218,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,234,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,250,this.ADDR_IMP,1,2),this.setOp(this.INS_ORA,9,this.ADDR_IMM,2,2),this.setOp(this.INS_ORA,5,this.ADDR_ZP,2,3),this.setOp(this.INS_ORA,21,this.ADDR_ZPX,2,4),this.setOp(this.INS_ORA,13,this.ADDR_ABS,3,4),this.setOp(this.INS_ORA,29,this.ADDR_ABSX,3,4),this.setOp(this.INS_ORA,25,this.ADDR_ABSY,3,4),this.setOp(this.INS_ORA,1,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_ORA,17,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_PHA,72,this.ADDR_IMP,1,3),this.setOp(this.INS_PHP,8,this.ADDR_IMP,1,3),this.setOp(this.INS_PLA,104,this.ADDR_IMP,1,4),this.setOp(this.INS_PLP,40,this.ADDR_IMP,1,4),this.setOp(this.INS_ROL,42,this.ADDR_ACC,1,2),this.setOp(this.INS_ROL,38,this.ADDR_ZP,2,5),this.setOp(this.INS_ROL,54,this.ADDR_ZPX,2,6),this.setOp(this.INS_ROL,46,this.ADDR_ABS,3,6),this.setOp(this.INS_ROL,62,this.ADDR_ABSX,3,7),this.setOp(this.INS_ROR,106,this.ADDR_ACC,1,2),this.setOp(this.INS_ROR,102,this.ADDR_ZP,2,5),this.setOp(this.INS_ROR,118,this.ADDR_ZPX,2,6),this.setOp(this.INS_ROR,110,this.ADDR_ABS,3,6),this.setOp(this.INS_ROR,126,this.ADDR_ABSX,3,7),this.setOp(this.INS_RTI,64,this.ADDR_IMP,1,6),this.setOp(this.INS_RTS,96,this.ADDR_IMP,1,6),this.setOp(this.INS_SBC,233,this.ADDR_IMM,2,2),this.setOp(this.INS_SBC,229,this.ADDR_ZP,2,3),this.setOp(this.INS_SBC,245,this.ADDR_ZPX,2,4),this.setOp(this.INS_SBC,237,this.ADDR_ABS,3,4),this.setOp(this.INS_SBC,253,this.ADDR_ABSX,3,4),this.setOp(this.INS_SBC,249,this.ADDR_ABSY,3,4),this.setOp(this.INS_SBC,225,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_SBC,241,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_SEC,56,this.ADDR_IMP,1,2),this.setOp(this.INS_SED,248,this.ADDR_IMP,1,2),this.setOp(this.INS_SEI,120,this.ADDR_IMP,1,2),this.setOp(this.INS_STA,133,this.ADDR_ZP,2,3),this.setOp(this.INS_STA,149,this.ADDR_ZPX,2,4),this.setOp(this.INS_STA,141,this.ADDR_ABS,3,4),this.setOp(this.INS_STA,157,this.ADDR_ABSX,3,5),this.setOp(this.INS_STA,153,this.ADDR_ABSY,3,5),this.setOp(this.INS_STA,129,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_STA,145,this.ADDR_POSTIDXIND,2,6),this.setOp(this.INS_STX,134,this.ADDR_ZP,2,3),this.setOp(this.INS_STX,150,this.ADDR_ZPY,2,4),this.setOp(this.INS_STX,142,this.ADDR_ABS,3,4),this.setOp(this.INS_STY,132,this.ADDR_ZP,2,3),this.setOp(this.INS_STY,148,this.ADDR_ZPX,2,4),this.setOp(this.INS_STY,140,this.ADDR_ABS,3,4),this.setOp(this.INS_TAX,170,this.ADDR_IMP,1,2),this.setOp(this.INS_TAY,168,this.ADDR_IMP,1,2),this.setOp(this.INS_TSX,186,this.ADDR_IMP,1,2),this.setOp(this.INS_TXA,138,this.ADDR_IMP,1,2),this.setOp(this.INS_TXS,154,this.ADDR_IMP,1,2),this.setOp(this.INS_TYA,152,this.ADDR_IMP,1,2),this.setOp(this.INS_ALR,75,this.ADDR_IMM,2,2),this.setOp(this.INS_ANC,11,this.ADDR_IMM,2,2),this.setOp(this.INS_ANC,43,this.ADDR_IMM,2,2),this.setOp(this.INS_ARR,107,this.ADDR_IMM,2,2),this.setOp(this.INS_AXS,203,this.ADDR_IMM,2,2),this.setOp(this.INS_LAX,163,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_LAX,167,this.ADDR_ZP,2,3),this.setOp(this.INS_LAX,175,this.ADDR_ABS,3,4),this.setOp(this.INS_LAX,179,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_LAX,183,this.ADDR_ZPY,2,4),this.setOp(this.INS_LAX,191,this.ADDR_ABSY,3,4),this.setOp(this.INS_SAX,131,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_SAX,135,this.ADDR_ZP,2,3),this.setOp(this.INS_SAX,143,this.ADDR_ABS,3,4),this.setOp(this.INS_SAX,151,this.ADDR_ZPY,2,4),this.setOp(this.INS_DCP,195,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_DCP,199,this.ADDR_ZP,2,5),this.setOp(this.INS_DCP,207,this.ADDR_ABS,3,6),this.setOp(this.INS_DCP,211,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_DCP,215,this.ADDR_ZPX,2,6),this.setOp(this.INS_DCP,219,this.ADDR_ABSY,3,7),this.setOp(this.INS_DCP,223,this.ADDR_ABSX,3,7),this.setOp(this.INS_ISC,227,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_ISC,231,this.ADDR_ZP,2,5),this.setOp(this.INS_ISC,239,this.ADDR_ABS,3,6),this.setOp(this.INS_ISC,243,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_ISC,247,this.ADDR_ZPX,2,6),this.setOp(this.INS_ISC,251,this.ADDR_ABSY,3,7),this.setOp(this.INS_ISC,255,this.ADDR_ABSX,3,7),this.setOp(this.INS_RLA,35,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_RLA,39,this.ADDR_ZP,2,5),this.setOp(this.INS_RLA,47,this.ADDR_ABS,3,6),this.setOp(this.INS_RLA,51,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_RLA,55,this.ADDR_ZPX,2,6),this.setOp(this.INS_RLA,59,this.ADDR_ABSY,3,7),this.setOp(this.INS_RLA,63,this.ADDR_ABSX,3,7),this.setOp(this.INS_RRA,99,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_RRA,103,this.ADDR_ZP,2,5),this.setOp(this.INS_RRA,111,this.ADDR_ABS,3,6),this.setOp(this.INS_RRA,115,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_RRA,119,this.ADDR_ZPX,2,6),this.setOp(this.INS_RRA,123,this.ADDR_ABSY,3,7),this.setOp(this.INS_RRA,127,this.ADDR_ABSX,3,7),this.setOp(this.INS_SLO,3,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_SLO,7,this.ADDR_ZP,2,5),this.setOp(this.INS_SLO,15,this.ADDR_ABS,3,6),this.setOp(this.INS_SLO,19,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_SLO,23,this.ADDR_ZPX,2,6),this.setOp(this.INS_SLO,27,this.ADDR_ABSY,3,7),this.setOp(this.INS_SLO,31,this.ADDR_ABSX,3,7),this.setOp(this.INS_SRE,67,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_SRE,71,this.ADDR_ZP,2,5),this.setOp(this.INS_SRE,79,this.ADDR_ABS,3,6),this.setOp(this.INS_SRE,83,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_SRE,87,this.ADDR_ZPX,2,6),this.setOp(this.INS_SRE,91,this.ADDR_ABSY,3,7),this.setOp(this.INS_SRE,95,this.ADDR_ABSX,3,7),this.setOp(this.INS_SKB,128,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,130,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,137,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,194,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,226,this.ADDR_IMM,2,2),this.setOp(this.INS_IGN,12,this.ADDR_ABS,3,4),this.setOp(this.INS_IGN,28,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,60,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,92,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,124,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,220,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,252,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,4,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,68,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,100,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,20,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,52,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,84,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,116,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,212,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,244,this.ADDR_ZPX,2,4),this.cycTable=new Array(7,6,2,8,3,3,5,5,3,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,3,2,2,2,3,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,5,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,6,2,6,4,4,4,4,2,5,2,5,5,5,5,5,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,5,2,5,4,4,4,4,2,4,2,4,4,4,4,4,2,6,2,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,3,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7),this.instname=new Array(70),this.instname[0]="ADC",this.instname[1]="AND",this.instname[2]="ASL",this.instname[3]="BCC",this.instname[4]="BCS",this.instname[5]="BEQ",this.instname[6]="BIT",this.instname[7]="BMI",this.instname[8]="BNE",this.instname[9]="BPL",this.instname[10]="BRK",this.instname[11]="BVC",this.instname[12]="BVS",this.instname[13]="CLC",this.instname[14]="CLD",this.instname[15]="CLI",this.instname[16]="CLV",this.instname[17]="CMP",this.instname[18]="CPX",this.instname[19]="CPY",this.instname[20]="DEC",this.instname[21]="DEX",this.instname[22]="DEY",this.instname[23]="EOR",this.instname[24]="INC",this.instname[25]="INX",this.instname[26]="INY",this.instname[27]="JMP",this.instname[28]="JSR",this.instname[29]="LDA",this.instname[30]="LDX",this.instname[31]="LDY",this.instname[32]="LSR",this.instname[33]="NOP",this.instname[34]="ORA",this.instname[35]="PHA",this.instname[36]="PHP",this.instname[37]="PLA",this.instname[38]="PLP",this.instname[39]="ROL",this.instname[40]="ROR",this.instname[41]="RTI",this.instname[42]="RTS",this.instname[43]="SBC",this.instname[44]="SEC",this.instname[45]="SED",this.instname[46]="SEI",this.instname[47]="STA",this.instname[48]="STX",this.instname[49]="STY",this.instname[50]="TAX",this.instname[51]="TAY",this.instname[52]="TSX",this.instname[53]="TXA",this.instname[54]="TXS",this.instname[55]="TYA",this.instname[56]="ALR",this.instname[57]="ANC",this.instname[58]="ARR",this.instname[59]="AXS",this.instname[60]="LAX",this.instname[61]="SAX",this.instname[62]="DCP",this.instname[63]="ISC",this.instname[64]="RLA",this.instname[65]="RRA",this.instname[66]="SLO",this.instname[67]="SRE",this.instname[68]="SKB",this.instname[69]="IGN",this.addrDesc=new Array("Zero Page           ","Relative            ","Implied             ","Absolute            ","Accumulator         ","Immediate           ","Zero Page,X         ","Zero Page,Y         ","Absolute,X          ","Absolute,Y          ","Preindexed Indirect ","Postindexed Indirect","Indirect Absolute   ")};r.prototype={INS_ADC:0,INS_AND:1,INS_ASL:2,INS_BCC:3,INS_BCS:4,INS_BEQ:5,INS_BIT:6,INS_BMI:7,INS_BNE:8,INS_BPL:9,INS_BRK:10,INS_BVC:11,INS_BVS:12,INS_CLC:13,INS_CLD:14,INS_CLI:15,INS_CLV:16,INS_CMP:17,INS_CPX:18,INS_CPY:19,INS_DEC:20,INS_DEX:21,INS_DEY:22,INS_EOR:23,INS_INC:24,INS_INX:25,INS_INY:26,INS_JMP:27,INS_JSR:28,INS_LDA:29,INS_LDX:30,INS_LDY:31,INS_LSR:32,INS_NOP:33,INS_ORA:34,INS_PHA:35,INS_PHP:36,INS_PLA:37,INS_PLP:38,INS_ROL:39,INS_ROR:40,INS_RTI:41,INS_RTS:42,INS_SBC:43,INS_SEC:44,INS_SED:45,INS_SEI:46,INS_STA:47,INS_STX:48,INS_STY:49,INS_TAX:50,INS_TAY:51,INS_TSX:52,INS_TXA:53,INS_TXS:54,INS_TYA:55,INS_ALR:56,INS_ANC:57,INS_ARR:58,INS_AXS:59,INS_LAX:60,INS_SAX:61,INS_DCP:62,INS_ISC:63,INS_RLA:64,INS_RRA:65,INS_SLO:66,INS_SRE:67,INS_SKB:68,INS_IGN:69,INS_DUMMY:70,ADDR_ZP:0,ADDR_REL:1,ADDR_IMP:2,ADDR_ABS:3,ADDR_ACC:4,ADDR_IMM:5,ADDR_ZPX:6,ADDR_ZPY:7,ADDR_ABSX:8,ADDR_ABSY:9,ADDR_PREIDXIND:10,ADDR_POSTIDXIND:11,ADDR_INDABS:12,setOp:function(t,e,i,s,n){this.opdata[e]=255&t|(255&i)<<8|(255&s)<<16|(255&n)<<24}},t.exports=n},7520:(t,e,i)=>{t.exports={Controller:i(4188),NES:i(9744)}},6939:(t,e,i)=>{var s=i(1610),n={0:function(t){this.nes=t}};n[0].prototype={reset:function(){this.joy1StrobeState=0,this.joy2StrobeState=0,this.joypadLastWrite=0,this.zapperFired=!1,this.zapperX=null,this.zapperY=null},write:function(t,e){t<8192?this.nes.cpu.mem[2047&t]=e:t>16407?(this.nes.cpu.mem[t]=e,t>=24576&&t<32768&&this.nes.opts.onBatteryRamWrite(t,e)):t>8199&&t<16384?this.regWrite(8192+(7&t),e):this.regWrite(t,e)},writelow:function(t,e){t<8192?this.nes.cpu.mem[2047&t]=e:t>16407?this.nes.cpu.mem[t]=e:t>8199&&t<16384?this.regWrite(8192+(7&t),e):this.regWrite(t,e)},load:function(t){return(t&=65535)>16407?this.nes.cpu.mem[t]:t>=8192?this.regLoad(t):this.nes.cpu.mem[2047&t]},regLoad:function(t){switch(t>>12){case 0:case 1:break;case 2:case 3:switch(7&t){case 0:return this.nes.cpu.mem[8192];case 1:return this.nes.cpu.mem[8193];case 2:return this.nes.ppu.readStatusRegister();case 3:case 5:case 6:return 0;case 4:return this.nes.ppu.sramLoad();case 7:return this.nes.ppu.vramLoad()}break;case 4:switch(t-16405){case 0:return this.nes.papu.readReg(t);case 1:return this.joy1Read();case 2:var e;return e=null!==this.zapperX&&null!==this.zapperY&&this.nes.ppu.isPixelWhite(this.zapperX,this.zapperY)?0:8,this.zapperFired&&(e|=16),65535&(this.joy2Read()|e)}}return 0},regWrite:function(t,e){switch(t){case 8192:this.nes.cpu.mem[t]=e,this.nes.ppu.updateControlReg1(e);break;case 8193:this.nes.cpu.mem[t]=e,this.nes.ppu.updateControlReg2(e);break;case 8195:this.nes.ppu.writeSRAMAddress(e);break;case 8196:this.nes.ppu.sramWrite(e);break;case 8197:this.nes.ppu.scrollWrite(e);break;case 8198:this.nes.ppu.writeVRAMAddress(e);break;case 8199:this.nes.ppu.vramWrite(e);break;case 16404:this.nes.ppu.sramDMA(e);break;case 16405:case 16407:this.nes.papu.writeReg(t,e);break;case 16406:0==(1&e)&&1==(1&this.joypadLastWrite)&&(this.joy1StrobeState=0,this.joy2StrobeState=0),this.joypadLastWrite=e;break;default:t>=16384&&t<=16407&&this.nes.papu.writeReg(t,e)}},joy1Read:function(){var t;switch(this.joy1StrobeState){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t=this.nes.controllers[1].state[this.joy1StrobeState];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:default:t=0;break;case 19:t=1}return this.joy1StrobeState++,24===this.joy1StrobeState&&(this.joy1StrobeState=0),t},joy2Read:function(){var t;switch(this.joy2StrobeState){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t=this.nes.controllers[2].state[this.joy2StrobeState];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:default:t=0;break;case 19:t=1}return this.joy2StrobeState++,24===this.joy2StrobeState&&(this.joy2StrobeState=0),t},loadROM:function(){if(!this.nes.rom.valid||this.nes.rom.romCount<1)throw new Error("NoMapper: Invalid ROM! Unable to load.");this.loadPRGROM(),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},loadPRGROM:function(){this.nes.rom.romCount>1?(this.loadRomBank(0,32768),this.loadRomBank(1,49152)):(this.loadRomBank(0,32768),this.loadRomBank(0,49152))},loadCHRROM:function(){this.nes.rom.vromCount>0&&(1===this.nes.rom.vromCount?(this.loadVromBank(0,0),this.loadVromBank(0,4096)):(this.loadVromBank(0,0),this.loadVromBank(1,4096)))},loadBatteryRam:function(){if(this.nes.rom.batteryRam){var t=this.nes.rom.batteryRam;null!==t&&8192===t.length&&s.copyArrayElements(t,0,this.nes.cpu.mem,24576,8192)}},loadRomBank:function(t,e){t%=this.nes.rom.romCount,s.copyArrayElements(this.nes.rom.rom[t],0,this.nes.cpu.mem,e,16384)},loadVromBank:function(t,e){if(0!==this.nes.rom.vromCount){this.nes.ppu.triggerRendering(),s.copyArrayElements(this.nes.rom.vrom[t%this.nes.rom.vromCount],0,this.nes.ppu.vramMem,e,4096);var i=this.nes.rom.vromTile[t%this.nes.rom.vromCount];s.copyArrayElements(i,0,this.nes.ppu.ptTile,e>>4,256)}},load32kRomBank:function(t,e){this.loadRomBank(2*t%this.nes.rom.romCount,e),this.loadRomBank((2*t+1)%this.nes.rom.romCount,e+16384)},load8kVromBank:function(t,e){0!==this.nes.rom.vromCount&&(this.nes.ppu.triggerRendering(),this.loadVromBank(t%this.nes.rom.vromCount,e),this.loadVromBank((t+1)%this.nes.rom.vromCount,e+4096))},load1kVromBank:function(t,e){if(0!==this.nes.rom.vromCount){this.nes.ppu.triggerRendering();var i=Math.floor(t/4)%this.nes.rom.vromCount,n=t%4*1024;s.copyArrayElements(this.nes.rom.vrom[i],n,this.nes.ppu.vramMem,e,1024);for(var r=this.nes.rom.vromTile[i],o=e>>4,a=0;a<64;a++)this.nes.ppu.ptTile[o+a]=r[(t%4<<6)+a]}},load2kVromBank:function(t,e){if(0!==this.nes.rom.vromCount){this.nes.ppu.triggerRendering();var i=Math.floor(t/2)%this.nes.rom.vromCount,n=t%2*2048;s.copyArrayElements(this.nes.rom.vrom[i],n,this.nes.ppu.vramMem,e,2048);for(var r=this.nes.rom.vromTile[i],o=e>>4,a=0;a<128;a++)this.nes.ppu.ptTile[o+a]=r[(t%2<<7)+a]}},load8kRomBank:function(t,e){var i=Math.floor(t/2)%this.nes.rom.romCount,n=t%2*8192;s.copyArrayElements(this.nes.rom.rom[i],n,this.nes.cpu.mem,e,8192)},clockIrqCounter:function(){},latchAccess:function(t){},toJSON:function(){return{joy1StrobeState:this.joy1StrobeState,joy2StrobeState:this.joy2StrobeState,joypadLastWrite:this.joypadLastWrite}},fromJSON:function(t){this.joy1StrobeState=t.joy1StrobeState,this.joy2StrobeState=t.joy2StrobeState,this.joypadLastWrite=t.joypadLastWrite}},n[1]=function(t){this.nes=t},n[1].prototype=new n[0],n[1].prototype.reset=function(){n[0].prototype.reset.apply(this),this.regBuffer=0,this.regBufferCounter=0,this.mirroring=0,this.oneScreenMirroring=0,this.prgSwitchingArea=1,this.prgSwitchingSize=1,this.vromSwitchingSize=0,this.romSelectionReg0=0,this.romSelectionReg1=0,this.romBankSelect=0},n[1].prototype.write=function(t,e){t<32768?n[0].prototype.write.apply(this,arguments):0!=(128&e)?(this.regBufferCounter=0,this.regBuffer=0,0===this.getRegNumber(t)&&(this.prgSwitchingArea=1,this.prgSwitchingSize=1)):(this.regBuffer=this.regBuffer&255-(1<<this.regBufferCounter)|(1&e)<<this.regBufferCounter,this.regBufferCounter++,5===this.regBufferCounter&&(this.setReg(this.getRegNumber(t),this.regBuffer),this.regBuffer=0,this.regBufferCounter=0))},n[1].prototype.setReg=function(t,e){var i;switch(t){case 0:(i=3&e)!==this.mirroring&&(this.mirroring=i,0==(2&this.mirroring)?this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING):0!=(1&this.mirroring)?this.nes.ppu.setMirroring(this.nes.rom.HORIZONTAL_MIRRORING):this.nes.ppu.setMirroring(this.nes.rom.VERTICAL_MIRRORING)),this.prgSwitchingArea=e>>2&1,this.prgSwitchingSize=e>>3&1,this.vromSwitchingSize=e>>4&1;break;case 1:this.romSelectionReg0=e>>4&1,this.nes.rom.vromCount>0&&(0===this.vromSwitchingSize?0===this.romSelectionReg0?this.load8kVromBank(15&e,0):this.load8kVromBank(Math.floor(this.nes.rom.vromCount/2)+(15&e),0):0===this.romSelectionReg0?this.loadVromBank(15&e,0):this.loadVromBank(Math.floor(this.nes.rom.vromCount/2)+(15&e),0));break;case 2:this.romSelectionReg1=e>>4&1,this.nes.rom.vromCount>0&&1===this.vromSwitchingSize&&(0===this.romSelectionReg1?this.loadVromBank(15&e,4096):this.loadVromBank(Math.floor(this.nes.rom.vromCount/2)+(15&e),4096));break;default:var s;i=15&e;var n=0;this.nes.rom.romCount>=32?0===this.vromSwitchingSize?1===this.romSelectionReg0&&(n=16):n=(this.romSelectionReg0|this.romSelectionReg1<<1)<<3:this.nes.rom.romCount>=16&&1===this.romSelectionReg0&&(n=8),0===this.prgSwitchingSize?(s=n+(15&e),this.load32kRomBank(s,32768)):(s=2*n+(15&e),0===this.prgSwitchingArea?this.loadRomBank(s,49152):this.loadRomBank(s,32768))}},n[1].prototype.getRegNumber=function(t){return t>=32768&&t<=40959?0:t>=40960&&t<=49151?1:t>=49152&&t<=57343?2:3},n[1].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("MMC1: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},n[1].prototype.switchLowHighPrgRom=function(t){},n[1].prototype.switch16to32=function(){},n[1].prototype.switch32to16=function(){},n[1].prototype.toJSON=function(){var t=n[0].prototype.toJSON.apply(this);return t.mirroring=this.mirroring,t.oneScreenMirroring=this.oneScreenMirroring,t.prgSwitchingArea=this.prgSwitchingArea,t.prgSwitchingSize=this.prgSwitchingSize,t.vromSwitchingSize=this.vromSwitchingSize,t.romSelectionReg0=this.romSelectionReg0,t.romSelectionReg1=this.romSelectionReg1,t.romBankSelect=this.romBankSelect,t.regBuffer=this.regBuffer,t.regBufferCounter=this.regBufferCounter,t},n[1].prototype.fromJSON=function(t){n[0].prototype.fromJSON.apply(this,arguments),this.mirroring=t.mirroring,this.oneScreenMirroring=t.oneScreenMirroring,this.prgSwitchingArea=t.prgSwitchingArea,this.prgSwitchingSize=t.prgSwitchingSize,this.vromSwitchingSize=t.vromSwitchingSize,this.romSelectionReg0=t.romSelectionReg0,this.romSelectionReg1=t.romSelectionReg1,this.romBankSelect=t.romBankSelect,this.regBuffer=t.regBuffer,this.regBufferCounter=t.regBufferCounter},n[2]=function(t){this.nes=t},n[2].prototype=new n[0],n[2].prototype.write=function(t,e){t<32768?n[0].prototype.write.apply(this,arguments):this.loadRomBank(e,32768)},n[2].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UNROM: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},n[3]=function(t){this.nes=t},n[3].prototype=new n[0],n[3].prototype.write=function(t,e){if(t<32768)n[0].prototype.write.apply(this,arguments);else{var i=e%(this.nes.rom.vromCount/2)*2;this.loadVromBank(i,0),this.loadVromBank(i+1,4096),this.load8kVromBank(2*e,0)}},n[4]=function(t){this.nes=t,this.CMD_SEL_2_1K_VROM_0000=0,this.CMD_SEL_2_1K_VROM_0800=1,this.CMD_SEL_1K_VROM_1000=2,this.CMD_SEL_1K_VROM_1400=3,this.CMD_SEL_1K_VROM_1800=4,this.CMD_SEL_1K_VROM_1C00=5,this.CMD_SEL_ROM_PAGE1=6,this.CMD_SEL_ROM_PAGE2=7,this.command=null,this.prgAddressSelect=null,this.chrAddressSelect=null,this.pageNumber=null,this.irqCounter=null,this.irqLatchValue=null,this.irqEnable=null,this.prgAddressChanged=!1},n[4].prototype=new n[0],n[4].prototype.write=function(t,e){if(t<32768)n[0].prototype.write.apply(this,arguments);else switch(t){case 32768:this.command=7&e;var i=e>>6&1;i!==this.prgAddressSelect&&(this.prgAddressChanged=!0),this.prgAddressSelect=i,this.chrAddressSelect=e>>7&1;break;case 32769:this.executeCommand(this.command,e);break;case 40960:0!=(1&e)?this.nes.ppu.setMirroring(this.nes.rom.HORIZONTAL_MIRRORING):this.nes.ppu.setMirroring(this.nes.rom.VERTICAL_MIRRORING);break;case 40961:break;case 49152:this.irqCounter=e;break;case 49153:this.irqLatchValue=e;break;case 57344:this.irqEnable=0;break;case 57345:this.irqEnable=1}},n[4].prototype.executeCommand=function(t,e){switch(t){case this.CMD_SEL_2_1K_VROM_0000:0===this.chrAddressSelect?(this.load1kVromBank(e,0),this.load1kVromBank(e+1,1024)):(this.load1kVromBank(e,4096),this.load1kVromBank(e+1,5120));break;case this.CMD_SEL_2_1K_VROM_0800:0===this.chrAddressSelect?(this.load1kVromBank(e,2048),this.load1kVromBank(e+1,3072)):(this.load1kVromBank(e,6144),this.load1kVromBank(e+1,7168));break;case this.CMD_SEL_1K_VROM_1000:0===this.chrAddressSelect?this.load1kVromBank(e,4096):this.load1kVromBank(e,0);break;case this.CMD_SEL_1K_VROM_1400:0===this.chrAddressSelect?this.load1kVromBank(e,5120):this.load1kVromBank(e,1024);break;case this.CMD_SEL_1K_VROM_1800:0===this.chrAddressSelect?this.load1kVromBank(e,6144):this.load1kVromBank(e,2048);break;case this.CMD_SEL_1K_VROM_1C00:0===this.chrAddressSelect?this.load1kVromBank(e,7168):this.load1kVromBank(e,3072);break;case this.CMD_SEL_ROM_PAGE1:this.prgAddressChanged&&(0===this.prgAddressSelect?this.load8kRomBank(2*(this.nes.rom.romCount-1),49152):this.load8kRomBank(2*(this.nes.rom.romCount-1),32768),this.prgAddressChanged=!1),0===this.prgAddressSelect?this.load8kRomBank(e,32768):this.load8kRomBank(e,49152);break;case this.CMD_SEL_ROM_PAGE2:this.load8kRomBank(e,40960),this.prgAddressChanged&&(0===this.prgAddressSelect?this.load8kRomBank(2*(this.nes.rom.romCount-1),49152):this.load8kRomBank(2*(this.nes.rom.romCount-1),32768),this.prgAddressChanged=!1)}},n[4].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("MMC3: Invalid ROM! Unable to load.");this.load8kRomBank(2*(this.nes.rom.romCount-1),49152),this.load8kRomBank(2*(this.nes.rom.romCount-1)+1,57344),this.load8kRomBank(0,32768),this.load8kRomBank(1,40960),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},n[4].prototype.clockIrqCounter=function(){1===this.irqEnable&&(this.irqCounter--,this.irqCounter<0&&(this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NORMAL),this.irqCounter=this.irqLatchValue))},n[4].prototype.toJSON=function(){var t=n[0].prototype.toJSON.apply(this);return t.command=this.command,t.prgAddressSelect=this.prgAddressSelect,t.chrAddressSelect=this.chrAddressSelect,t.pageNumber=this.pageNumber,t.irqCounter=this.irqCounter,t.irqLatchValue=this.irqLatchValue,t.irqEnable=this.irqEnable,t.prgAddressChanged=this.prgAddressChanged,t},n[4].prototype.fromJSON=function(t){n[0].prototype.fromJSON.apply(this,arguments),this.command=t.command,this.prgAddressSelect=t.prgAddressSelect,this.chrAddressSelect=t.chrAddressSelect,this.pageNumber=t.pageNumber,this.irqCounter=t.irqCounter,this.irqLatchValue=t.irqLatchValue,this.irqEnable=t.irqEnable,this.prgAddressChanged=t.prgAddressChanged},n[5]=function(t){this.nes=t},n[5].prototype=new n[0],n[5].prototype.write=function(t,e){t<32768?n[0].prototype.write.apply(this,arguments):this.load8kVromBank(e,0)},n[5].prototype.write=function(t,e){if(t<20480)n[0].prototype.write.apply(this,arguments);else switch(t){case 20736:this.prg_size=3&e;break;case 20737:this.chr_size=3&e;break;case 20738:this.sram_we_a=3&e;break;case 20739:this.sram_we_b=3&e;break;case 20740:this.graphic_mode=3&e;break;case 20741:this.nametable_mode=e,this.nametable_type[0]=3&e,this.load1kVromBank(3&e,8192),e>>=2,this.nametable_type[1]=3&e,this.load1kVromBank(3&e,9216),e>>=2,this.nametable_type[2]=3&e,this.load1kVromBank(3&e,10240),e>>=2,this.nametable_type[3]=3&e,this.load1kVromBank(3&e,11264);break;case 20742:this.fill_chr=e;break;case 20743:this.fill_pal=3&e;break;case 20755:this.SetBank_SRAM(3,3&e);break;case 20756:case 20757:case 20758:case 20759:this.SetBank_CPU(t,e);break;case 20768:case 20769:case 20770:case 20771:case 20772:case 20773:case 20774:case 20775:this.chr_mode=0,this.chr_page[0][7&t]=e,this.SetBank_PPU();break;case 20776:case 20777:case 20778:case 20779:this.chr_mode=1,this.chr_page[1][0+(3&t)]=e,this.chr_page[1][4+(3&t)]=e,this.SetBank_PPU();break;case 20992:this.split_control=e;break;case 20993:this.split_scroll=e;break;case 20994:this.split_page=63&e;break;case 20995:this.irq_line=e,this.nes.cpu.ClearIRQ();break;case 20996:this.irq_enable=e,this.nes.cpu.ClearIRQ();break;case 20997:this.mult_a=e;break;case 20998:this.mult_b=e;break;default:t>=20480&&t<=20501?this.nes.papu.exWrite(t,e):t>=23552&&t<=24575?2===this.graphic_mode||3!==this.graphic_mode&&this.irq_status:t>=24576&&t<=32767&&2===this.sram_we_a&&this.sram_we_b}},n[5].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UNROM: Invalid ROM! Unable to load.");this.load8kRomBank(2*this.nes.rom.romCount-1,32768),this.load8kRomBank(2*this.nes.rom.romCount-1,40960),this.load8kRomBank(2*this.nes.rom.romCount-1,49152),this.load8kRomBank(2*this.nes.rom.romCount-1,57344),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},n[7]=function(t){this.nes=t},n[7].prototype=new n[0],n[7].prototype.write=function(t,e){t<32768?n[0].prototype.write.apply(this,arguments):(this.load32kRomBank(7&e,32768),16&e?this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING2):this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING))},n[7].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("AOROM: Invalid ROM! Unable to load.");this.loadPRGROM(),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},n[11]=function(t){this.nes=t},n[11].prototype=new n[0],n[11].prototype.write=function(t,e){if(t<32768)n[0].prototype.write.apply(this,arguments);else{var i=2*(15&e)%this.nes.rom.romCount,s=(2*(15&e)+1)%this.nes.rom.romCount;if(this.loadRomBank(i,32768),this.loadRomBank(s,49152),this.nes.rom.vromCount>0){var r=2*(e>>4)%this.nes.rom.vromCount;this.loadVromBank(r,0),this.loadVromBank(r+1,4096)}}},n[34]=function(t){this.nes=t},n[34].prototype=new n[0],n[34].prototype.write=function(t,e){t<32768?n[0].prototype.write.apply(this,arguments):this.load32kRomBank(e,32768)},n[38]=function(t){this.nes=t},n[38].prototype=new n[0],n[38].prototype.write=function(t,e){t<28672||t>32767?n[0].prototype.write.apply(this,arguments):(this.load32kRomBank(3&e,32768),this.load8kVromBank(2*(e>>2&3),0))},n[66]=function(t){this.nes=t},n[66].prototype=new n[0],n[66].prototype.write=function(t,e){t<32768?n[0].prototype.write.apply(this,arguments):(this.load32kRomBank(e>>4&3,32768),this.load8kVromBank(2*(3&e),0))},n[94]=function(t){this.nes=t},n[94].prototype=new n[0],n[94].prototype.write=function(t,e){t<32768?n[0].prototype.write.apply(this,arguments):this.loadRomBank(e>>2,32768)},n[94].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UN1ROM: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},n[140]=function(t){this.nes=t},n[140].prototype=new n[0],n[140].prototype.write=function(t,e){t<24576||t>32767?n[0].prototype.write.apply(this,arguments):(this.load32kRomBank(e>>4&3,32768),this.load8kVromBank(2*(15&e),0))},n[180]=function(t){this.nes=t},n[180].prototype=new n[0],n[180].prototype.write=function(t,e){t<32768?n[0].prototype.write.apply(this,arguments):this.loadRomBank(e,49152)},n[180].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("Mapper 180: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},t.exports=n},9744:(t,e,i)=>{var s=i(9990),n=i(4188),r=i(8321),o=i(8306),a=i(2471),h=function(t){var e;if(this.opts={onFrame:function(){},onAudioSample:null,onStatusUpdate:function(){},onBatteryRamWrite:function(){},preferredFrameRate:60,emulateSound:!0,sampleRate:44100},void 0!==t)for(e in this.opts)void 0!==t[e]&&(this.opts[e]=t[e]);this.frameTime=1e3/this.opts.preferredFrameRate,this.ui={writeFrame:this.opts.onFrame,updateStatus:this.opts.onStatusUpdate},this.cpu=new s(this),this.ppu=new r(this),this.papu=new o(this),this.mmap=null,this.controllers={1:new n,2:new n},this.ui.updateStatus("Ready to load a ROM."),this.frame=this.frame.bind(this),this.buttonDown=this.buttonDown.bind(this),this.buttonUp=this.buttonUp.bind(this),this.zapperMove=this.zapperMove.bind(this),this.zapperFireDown=this.zapperFireDown.bind(this),this.zapperFireUp=this.zapperFireUp.bind(this)};h.prototype={fpsFrameCount:0,romData:null,reset:function(){null!==this.mmap&&this.mmap.reset(),this.cpu.reset(),this.ppu.reset(),this.papu.reset(),this.lastFpsTime=null,this.fpsFrameCount=0},frame:function(){this.ppu.startFrame();var t=0,e=this.opts.emulateSound,i=this.cpu,s=this.ppu,n=this.papu;t:for(;;)for(0===i.cyclesToHalt?(t=i.emulate(),e&&n.clockFrameCounter(t),t*=3):i.cyclesToHalt>8?(t=24,e&&n.clockFrameCounter(8),i.cyclesToHalt-=8):(t=3*i.cyclesToHalt,e&&n.clockFrameCounter(i.cyclesToHalt),i.cyclesToHalt=0);t>0;t--){if(s.curX===s.spr0HitX&&1===s.f_spVisibility&&s.scanline-21===s.spr0HitY&&s.setStatusFlag(s.STATUS_SPRITE0HIT,!0),s.requestEndFrame&&(s.nmiCounter--,0===s.nmiCounter)){s.requestEndFrame=!1,s.startVBlank();break t}s.curX++,341===s.curX&&(s.curX=0,s.endScanline())}this.fpsFrameCount++},buttonDown:function(t,e){this.controllers[t].buttonDown(e)},buttonUp:function(t,e){this.controllers[t].buttonUp(e)},zapperMove:function(t,e){this.mmap&&(this.mmap.zapperX=t,this.mmap.zapperY=e)},zapperFireDown:function(){this.mmap&&(this.mmap.zapperFired=!0)},zapperFireUp:function(){this.mmap&&(this.mmap.zapperFired=!1)},getFPS:function(){var t=+new Date,e=null;return this.lastFpsTime&&(e=this.fpsFrameCount/((t-this.lastFpsTime)/1e3)),this.fpsFrameCount=0,this.lastFpsTime=t,e},reloadROM:function(){null!==this.romData&&this.loadROM(this.romData)},loadROM:function(t){this.rom=new a(this),this.rom.load(t),this.reset(),this.mmap=this.rom.createMapper(),this.mmap.loadROM(),this.ppu.setMirroring(this.rom.getMirroringType()),this.romData=t},setFramerate:function(t){this.opts.preferredFrameRate=t,this.frameTime=1e3/t,this.papu.setSampleRate(this.opts.sampleRate,!1)},toJSON:function(){return{romData:this.romData,cpu:this.cpu.toJSON(),mmap:this.mmap.toJSON(),ppu:this.ppu.toJSON()}},fromJSON:function(t){this.loadROM(t.romData),this.cpu.fromJSON(t.cpu),this.mmap.fromJSON(t.mmap),this.ppu.fromJSON(t.ppu)}},t.exports=h},8306:t=>{var e=function(t){this.nes=t,this.square1=new n(this,!0),this.square2=new n(this,!1),this.triangle=new r(this),this.noise=new s(this),this.dmc=new i(this),this.frameIrqCounter=null,this.frameIrqCounterMax=4,this.initCounter=2048,this.channelEnableValue=null,this.sampleRate=44100,this.lengthLookup=null,this.dmcFreqLookup=null,this.noiseWavelengthLookup=null,this.square_table=null,this.tnd_table=null,this.frameIrqEnabled=!1,this.frameIrqActive=null,this.frameClockNow=null,this.startedPlaying=!1,this.recordOutput=!1,this.initingHardware=!1,this.masterFrameCounter=null,this.derivedFrameCounter=null,this.countSequence=null,this.sampleTimer=null,this.frameTime=null,this.sampleTimerMax=null,this.sampleCount=null,this.triValue=0,this.smpSquare1=null,this.smpSquare2=null,this.smpTriangle=null,this.smpDmc=null,this.accCount=null,this.prevSampleL=0,this.prevSampleR=0,this.smpAccumL=0,this.smpAccumR=0,this.dacRange=0,this.dcValue=0,this.masterVolume=256,this.stereoPosLSquare1=null,this.stereoPosLSquare2=null,this.stereoPosLTriangle=null,this.stereoPosLNoise=null,this.stereoPosLDMC=null,this.stereoPosRSquare1=null,this.stereoPosRSquare2=null,this.stereoPosRTriangle=null,this.stereoPosRNoise=null,this.stereoPosRDMC=null,this.extraCycles=null,this.maxSample=null,this.minSample=null,this.panning=[80,170,100,150,128],this.setPanning(this.panning),this.initLengthLookup(),this.initDmcFrequencyLookup(),this.initNoiseWavelengthLookup(),this.initDACtables();for(var e=0;e<20;e++)16===e?this.writeReg(16400,16):this.writeReg(16384+e,0);this.reset()};e.prototype={reset:function(){this.sampleRate=this.nes.opts.sampleRate,this.sampleTimerMax=Math.floor(1832727040*this.nes.opts.preferredFrameRate/(60*this.sampleRate)),this.frameTime=Math.floor(14915*this.nes.opts.preferredFrameRate/60),this.sampleTimer=0,this.updateChannelEnable(0),this.masterFrameCounter=0,this.derivedFrameCounter=0,this.countSequence=0,this.sampleCount=0,this.initCounter=2048,this.frameIrqEnabled=!1,this.initingHardware=!1,this.resetCounter(),this.square1.reset(),this.square2.reset(),this.triangle.reset(),this.noise.reset(),this.dmc.reset(),this.accCount=0,this.smpSquare1=0,this.smpSquare2=0,this.smpTriangle=0,this.smpDmc=0,this.frameIrqEnabled=!1,this.frameIrqCounterMax=4,this.channelEnableValue=255,this.startedPlaying=!1,this.prevSampleL=0,this.prevSampleR=0,this.smpAccumL=0,this.smpAccumR=0,this.maxSample=-5e5,this.minSample=5e5},readReg:function(t){var e=0;return e|=this.square1.getLengthStatus(),e|=this.square2.getLengthStatus()<<1,e|=this.triangle.getLengthStatus()<<2,e|=this.noise.getLengthStatus()<<3,e|=this.dmc.getLengthStatus()<<4,e|=(this.frameIrqActive&&this.frameIrqEnabled?1:0)<<6,e|=this.dmc.getIrqStatus()<<7,this.frameIrqActive=!1,this.dmc.irqGenerated=!1,65535&e},writeReg:function(t,e){t>=16384&&t<16388?this.square1.writeReg(t,e):t>=16388&&t<16392?this.square2.writeReg(t,e):t>=16392&&t<16396?this.triangle.writeReg(t,e):t>=16396&&t<=16399?this.noise.writeReg(t,e):16400===t||16401===t||16402===t||16403===t?this.dmc.writeReg(t,e):16405===t?(this.updateChannelEnable(e),0!==e&&this.initCounter>0&&(this.initingHardware=!0),this.dmc.writeReg(t,e)):16407===t&&(this.countSequence=e>>7&1,this.masterFrameCounter=0,this.frameIrqActive=!1,this.frameIrqEnabled=0==(e>>6&1),0===this.countSequence?(this.frameIrqCounterMax=4,this.derivedFrameCounter=4):(this.frameIrqCounterMax=5,this.derivedFrameCounter=0,this.frameCounterTick()))},resetCounter:function(){0===this.countSequence?this.derivedFrameCounter=4:this.derivedFrameCounter=0},updateChannelEnable:function(t){this.channelEnableValue=65535&t,this.square1.setEnabled(0!=(1&t)),this.square2.setEnabled(0!=(2&t)),this.triangle.setEnabled(0!=(4&t)),this.noise.setEnabled(0!=(8&t)),this.dmc.setEnabled(0!=(16&t))},clockFrameCounter:function(t){if(this.initCounter>0&&this.initingHardware)return this.initCounter-=t,void(this.initCounter<=0&&(this.initingHardware=!1));t+=this.extraCycles;var e=this.sampleTimerMax-this.sampleTimer;t<<10>e?(this.extraCycles=(t<<10)-e>>10,t-=this.extraCycles):this.extraCycles=0;var i=this.dmc,s=this.triangle,n=this.square1,r=this.square2,o=this.noise;if(i.isEnabled)for(i.shiftCounter-=t<<3;i.shiftCounter<=0&&i.dmaFrequency>0;)i.shiftCounter+=i.dmaFrequency,i.clockDmc();if(s.progTimerMax>0)for(s.progTimerCount-=t;s.progTimerCount<=0;)s.progTimerCount+=s.progTimerMax+1,s.linearCounter>0&&s.lengthCounter>0&&(s.triangleCounter++,s.triangleCounter&=31,s.isEnabled&&(s.triangleCounter>=16?s.sampleValue=15&s.triangleCounter:s.sampleValue=15-(15&s.triangleCounter),s.sampleValue<<=4));n.progTimerCount-=t,n.progTimerCount<=0&&(n.progTimerCount+=n.progTimerMax+1<<1,n.squareCounter++,n.squareCounter&=7,n.updateSampleValue()),r.progTimerCount-=t,r.progTimerCount<=0&&(r.progTimerCount+=r.progTimerMax+1<<1,r.squareCounter++,r.squareCounter&=7,r.updateSampleValue());var a=t;if(o.progTimerCount-a>0)o.progTimerCount-=a,o.accCount+=a,o.accValue+=a*o.sampleValue;else for(;a-- >0;)--o.progTimerCount<=0&&o.progTimerMax>0&&(o.shiftReg<<=1,o.tmp=32768&(o.shiftReg<<(0===o.randomMode?1:6)^o.shiftReg),0!==o.tmp?(o.shiftReg|=1,o.randomBit=0,o.sampleValue=0):(o.randomBit=1,o.isEnabled&&o.lengthCounter>0?o.sampleValue=o.masterVolume:o.sampleValue=0),o.progTimerCount+=o.progTimerMax),o.accValue+=o.sampleValue,o.accCount++;this.frameIrqEnabled&&this.frameIrqActive&&this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NORMAL),this.masterFrameCounter+=t<<1,this.masterFrameCounter>=this.frameTime&&(this.masterFrameCounter-=this.frameTime,this.frameCounterTick()),this.accSample(t),this.sampleTimer+=t<<10,this.sampleTimer>=this.sampleTimerMax&&(this.sample(),this.sampleTimer-=this.sampleTimerMax)},accSample:function(t){this.triangle.sampleCondition&&(this.triValue=Math.floor((this.triangle.progTimerCount<<4)/(this.triangle.progTimerMax+1)),this.triValue>16&&(this.triValue=16),this.triangle.triangleCounter>=16&&(this.triValue=16-this.triValue),this.triValue+=this.triangle.sampleValue),2===t?(this.smpTriangle+=this.triValue<<1,this.smpDmc+=this.dmc.sample<<1,this.smpSquare1+=this.square1.sampleValue<<1,this.smpSquare2+=this.square2.sampleValue<<1,this.accCount+=2):4===t?(this.smpTriangle+=this.triValue<<2,this.smpDmc+=this.dmc.sample<<2,this.smpSquare1+=this.square1.sampleValue<<2,this.smpSquare2+=this.square2.sampleValue<<2,this.accCount+=4):(this.smpTriangle+=t*this.triValue,this.smpDmc+=t*this.dmc.sample,this.smpSquare1+=t*this.square1.sampleValue,this.smpSquare2+=t*this.square2.sampleValue,this.accCount+=t)},frameCounterTick:function(){this.derivedFrameCounter++,this.derivedFrameCounter>=this.frameIrqCounterMax&&(this.derivedFrameCounter=0),1!==this.derivedFrameCounter&&3!==this.derivedFrameCounter||(this.triangle.clockLengthCounter(),this.square1.clockLengthCounter(),this.square2.clockLengthCounter(),this.noise.clockLengthCounter(),this.square1.clockSweep(),this.square2.clockSweep()),this.derivedFrameCounter>=0&&this.derivedFrameCounter<4&&(this.square1.clockEnvDecay(),this.square2.clockEnvDecay(),this.noise.clockEnvDecay(),this.triangle.clockLinearCounter()),3===this.derivedFrameCounter&&0===this.countSequence&&(this.frameIrqActive=!0)},sample:function(){var t,e;this.accCount>0?(this.smpSquare1<<=4,this.smpSquare1=Math.floor(this.smpSquare1/this.accCount),this.smpSquare2<<=4,this.smpSquare2=Math.floor(this.smpSquare2/this.accCount),this.smpTriangle=Math.floor(this.smpTriangle/this.accCount),this.smpDmc<<=4,this.smpDmc=Math.floor(this.smpDmc/this.accCount),this.accCount=0):(this.smpSquare1=this.square1.sampleValue<<4,this.smpSquare2=this.square2.sampleValue<<4,this.smpTriangle=this.triangle.sampleValue,this.smpDmc=this.dmc.sample<<4);var i=Math.floor((this.noise.accValue<<4)/this.noise.accCount);this.noise.accValue=i>>4,this.noise.accCount=1,t=this.smpSquare1*this.stereoPosLSquare1+this.smpSquare2*this.stereoPosLSquare2>>8,e=3*this.smpTriangle*this.stereoPosLTriangle+(i<<1)*this.stereoPosLNoise+this.smpDmc*this.stereoPosLDMC>>8,t>=this.square_table.length&&(t=this.square_table.length-1),e>=this.tnd_table.length&&(e=this.tnd_table.length-1);var s=this.square_table[t]+this.tnd_table[e]-this.dcValue;t=this.smpSquare1*this.stereoPosRSquare1+this.smpSquare2*this.stereoPosRSquare2>>8,e=3*this.smpTriangle*this.stereoPosRTriangle+(i<<1)*this.stereoPosRNoise+this.smpDmc*this.stereoPosRDMC>>8,t>=this.square_table.length&&(t=this.square_table.length-1),e>=this.tnd_table.length&&(e=this.tnd_table.length-1);var n=this.square_table[t]+this.tnd_table[e]-this.dcValue,r=s-this.prevSampleL;this.prevSampleL+=r,this.smpAccumL+=r-(this.smpAccumL>>10),s=this.smpAccumL;var o=n-this.prevSampleR;this.prevSampleR+=o,this.smpAccumR+=o-(this.smpAccumR>>10),n=this.smpAccumR,s>this.maxSample&&(this.maxSample=s),s<this.minSample&&(this.minSample=s),this.nes.opts.onAudioSample&&this.nes.opts.onAudioSample(s/32768,n/32768),this.smpSquare1=0,this.smpSquare2=0,this.smpTriangle=0,this.smpDmc=0},getLengthMax:function(t){return this.lengthLookup[t>>3]},getDmcFrequency:function(t){return t>=0&&t<16?this.dmcFreqLookup[t]:0},getNoiseWaveLength:function(t){return t>=0&&t<16?this.noiseWavelengthLookup[t]:0},setPanning:function(t){for(var e=0;e<5;e++)this.panning[e]=t[e];this.updateStereoPos()},setMasterVolume:function(t){t<0&&(t=0),t>256&&(t=256),this.masterVolume=t,this.updateStereoPos()},updateStereoPos:function(){this.stereoPosLSquare1=this.panning[0]*this.masterVolume>>8,this.stereoPosLSquare2=this.panning[1]*this.masterVolume>>8,this.stereoPosLTriangle=this.panning[2]*this.masterVolume>>8,this.stereoPosLNoise=this.panning[3]*this.masterVolume>>8,this.stereoPosLDMC=this.panning[4]*this.masterVolume>>8,this.stereoPosRSquare1=this.masterVolume-this.stereoPosLSquare1,this.stereoPosRSquare2=this.masterVolume-this.stereoPosLSquare2,this.stereoPosRTriangle=this.masterVolume-this.stereoPosLTriangle,this.stereoPosRNoise=this.masterVolume-this.stereoPosLNoise,this.stereoPosRDMC=this.masterVolume-this.stereoPosLDMC},initLengthLookup:function(){this.lengthLookup=[10,254,20,2,40,4,80,6,160,8,60,10,14,12,26,14,12,16,24,18,48,20,96,22,192,24,72,26,16,28,32,30]},initDmcFrequencyLookup:function(){this.dmcFreqLookup=new Array(16),this.dmcFreqLookup[0]=3424,this.dmcFreqLookup[1]=3040,this.dmcFreqLookup[2]=2720,this.dmcFreqLookup[3]=2560,this.dmcFreqLookup[4]=2288,this.dmcFreqLookup[5]=2032,this.dmcFreqLookup[6]=1808,this.dmcFreqLookup[7]=1712,this.dmcFreqLookup[8]=1520,this.dmcFreqLookup[9]=1280,this.dmcFreqLookup[10]=1136,this.dmcFreqLookup[11]=1024,this.dmcFreqLookup[12]=848,this.dmcFreqLookup[13]=672,this.dmcFreqLookup[14]=576,this.dmcFreqLookup[15]=432},initNoiseWavelengthLookup:function(){this.noiseWavelengthLookup=new Array(16),this.noiseWavelengthLookup[0]=4,this.noiseWavelengthLookup[1]=8,this.noiseWavelengthLookup[2]=16,this.noiseWavelengthLookup[3]=32,this.noiseWavelengthLookup[4]=64,this.noiseWavelengthLookup[5]=96,this.noiseWavelengthLookup[6]=128,this.noiseWavelengthLookup[7]=160,this.noiseWavelengthLookup[8]=202,this.noiseWavelengthLookup[9]=254,this.noiseWavelengthLookup[10]=380,this.noiseWavelengthLookup[11]=508,this.noiseWavelengthLookup[12]=762,this.noiseWavelengthLookup[13]=1016,this.noiseWavelengthLookup[14]=2034,this.noiseWavelengthLookup[15]=4068},initDACtables:function(){var t,e,i,s=0,n=0;for(this.square_table=new Array(512),this.tnd_table=new Array(3264),i=0;i<512;i++)t=95.52/(8128/(i/16)+100),t*=.98411,t*=5e4,e=Math.floor(t),this.square_table[i]=e,e>s&&(s=e);for(i=0;i<3264;i++)t=163.67/(24329/(i/16)+100),t*=.98411,t*=5e4,e=Math.floor(t),this.tnd_table[i]=e,e>n&&(n=e);this.dacRange=s+n,this.dcValue=this.dacRange/2}};var i=function(t){this.papu=t,this.MODE_NORMAL=0,this.MODE_LOOP=1,this.MODE_IRQ=2,this.isEnabled=null,this.hasSample=null,this.irqGenerated=!1,this.playMode=null,this.dmaFrequency=null,this.dmaCounter=null,this.deltaCounter=null,this.playStartAddress=null,this.playAddress=null,this.playLength=null,this.playLengthCounter=null,this.shiftCounter=null,this.reg4012=null,this.reg4013=null,this.sample=null,this.dacLsb=null,this.data=null,this.reset()};i.prototype={clockDmc:function(){this.hasSample&&(0==(1&this.data)?this.deltaCounter>0&&this.deltaCounter--:this.deltaCounter<63&&this.deltaCounter++,this.sample=this.isEnabled?(this.deltaCounter<<1)+this.dacLsb:0,this.data>>=1),this.dmaCounter--,this.dmaCounter<=0&&(this.hasSample=!1,this.endOfSample(),this.dmaCounter=8),this.irqGenerated&&this.papu.nes.cpu.requestIrq(this.papu.nes.cpu.IRQ_NORMAL)},endOfSample:function(){0===this.playLengthCounter&&this.playMode===this.MODE_LOOP&&(this.playAddress=this.playStartAddress,this.playLengthCounter=this.playLength),this.playLengthCounter>0&&(this.nextSample(),0===this.playLengthCounter&&this.playMode===this.MODE_IRQ&&(this.irqGenerated=!0))},nextSample:function(){this.data=this.papu.nes.mmap.load(this.playAddress),this.papu.nes.cpu.haltCycles(4),this.playLengthCounter--,this.playAddress++,this.playAddress>65535&&(this.playAddress=32768),this.hasSample=!0},writeReg:function(t,e){16400===t?(e>>6==0?this.playMode=this.MODE_NORMAL:1==(e>>6&1)?this.playMode=this.MODE_LOOP:e>>6==2&&(this.playMode=this.MODE_IRQ),0==(128&e)&&(this.irqGenerated=!1),this.dmaFrequency=this.papu.getDmcFrequency(15&e)):16401===t?(this.deltaCounter=e>>1&63,this.dacLsb=1&e,this.sample=(this.deltaCounter<<1)+this.dacLsb):16402===t?(this.playStartAddress=e<<6|49152,this.playAddress=this.playStartAddress,this.reg4012=e):16403===t?(this.playLength=1+(e<<4),this.playLengthCounter=this.playLength,this.reg4013=e):16405===t&&(0==(e>>4&1)?this.playLengthCounter=0:(this.playAddress=this.playStartAddress,this.playLengthCounter=this.playLength),this.irqGenerated=!1)},setEnabled:function(t){!this.isEnabled&&t&&(this.playLengthCounter=this.playLength),this.isEnabled=t},getLengthStatus:function(){return 0!==this.playLengthCounter&&this.isEnabled?1:0},getIrqStatus:function(){return this.irqGenerated?1:0},reset:function(){this.isEnabled=!1,this.irqGenerated=!1,this.playMode=this.MODE_NORMAL,this.dmaFrequency=0,this.dmaCounter=0,this.deltaCounter=0,this.playStartAddress=0,this.playAddress=0,this.playLength=0,this.playLengthCounter=0,this.sample=0,this.dacLsb=0,this.shiftCounter=0,this.reg4012=0,this.reg4013=0,this.data=0}};var s=function(t){this.papu=t,this.isEnabled=null,this.envDecayDisable=null,this.envDecayLoopEnable=null,this.lengthCounterEnable=null,this.envReset=null,this.shiftNow=null,this.lengthCounter=null,this.progTimerCount=null,this.progTimerMax=null,this.envDecayRate=null,this.envDecayCounter=null,this.envVolume=null,this.masterVolume=null,this.shiftReg=16384,this.randomBit=null,this.randomMode=null,this.sampleValue=null,this.accValue=0,this.accCount=1,this.tmp=null,this.reset()};s.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.isEnabled=!1,this.lengthCounter=0,this.lengthCounterEnable=!1,this.envDecayDisable=!1,this.envDecayLoopEnable=!1,this.shiftNow=!1,this.envDecayRate=0,this.envDecayCounter=0,this.envVolume=0,this.masterVolume=0,this.shiftReg=1,this.randomBit=0,this.randomMode=0,this.sampleValue=0,this.tmp=0},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,0===this.lengthCounter&&this.updateSampleValue())},clockEnvDecay:function(){this.envReset?(this.envReset=!1,this.envDecayCounter=this.envDecayRate+1,this.envVolume=15):--this.envDecayCounter<=0&&(this.envDecayCounter=this.envDecayRate+1,this.envVolume>0?this.envVolume--:this.envVolume=this.envDecayLoopEnable?15:0),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()},updateSampleValue:function(){this.isEnabled&&this.lengthCounter>0&&(this.sampleValue=this.randomBit*this.masterVolume)},writeReg:function(t,e){16396===t?(this.envDecayDisable=0!=(16&e),this.envDecayRate=15&e,this.envDecayLoopEnable=0!=(32&e),this.lengthCounterEnable=0==(32&e),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume):16398===t?(this.progTimerMax=this.papu.getNoiseWaveLength(15&e),this.randomMode=e>>7):16399===t&&(this.lengthCounter=this.papu.getLengthMax(248&e),this.envReset=!0)},setEnabled:function(t){this.isEnabled=t,t||(this.lengthCounter=0),this.updateSampleValue()},getLengthStatus:function(){return 0!==this.lengthCounter&&this.isEnabled?1:0}};var n=function(t,e){this.papu=t,this.dutyLookup=[0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,0,0,1,1,1,1,1],this.impLookup=[1,-1,0,0,0,0,0,0,1,0,-1,0,0,0,0,0,1,0,0,0,-1,0,0,0,-1,0,1,0,0,0,0,0],this.sqr1=e,this.isEnabled=null,this.lengthCounterEnable=null,this.sweepActive=null,this.envDecayDisable=null,this.envDecayLoopEnable=null,this.envReset=null,this.sweepCarry=null,this.updateSweepPeriod=null,this.progTimerCount=null,this.progTimerMax=null,this.lengthCounter=null,this.squareCounter=null,this.sweepCounter=null,this.sweepCounterMax=null,this.sweepMode=null,this.sweepShiftAmount=null,this.envDecayRate=null,this.envDecayCounter=null,this.envVolume=null,this.masterVolume=null,this.dutyMode=null,this.sweepResult=null,this.sampleValue=null,this.vol=null,this.reset()};n.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.lengthCounter=0,this.squareCounter=0,this.sweepCounter=0,this.sweepCounterMax=0,this.sweepMode=0,this.sweepShiftAmount=0,this.envDecayRate=0,this.envDecayCounter=0,this.envVolume=0,this.masterVolume=0,this.dutyMode=0,this.vol=0,this.isEnabled=!1,this.lengthCounterEnable=!1,this.sweepActive=!1,this.sweepCarry=!1,this.envDecayDisable=!1,this.envDecayLoopEnable=!1},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,0===this.lengthCounter&&this.updateSampleValue())},clockEnvDecay:function(){this.envReset?(this.envReset=!1,this.envDecayCounter=this.envDecayRate+1,this.envVolume=15):--this.envDecayCounter<=0&&(this.envDecayCounter=this.envDecayRate+1,this.envVolume>0?this.envVolume--:this.envVolume=this.envDecayLoopEnable?15:0),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()},clockSweep:function(){--this.sweepCounter<=0&&(this.sweepCounter=this.sweepCounterMax+1,this.sweepActive&&this.sweepShiftAmount>0&&this.progTimerMax>7&&(this.sweepCarry=!1,0===this.sweepMode?(this.progTimerMax+=this.progTimerMax>>this.sweepShiftAmount,this.progTimerMax>4095&&(this.progTimerMax=4095,this.sweepCarry=!0)):this.progTimerMax=this.progTimerMax-((this.progTimerMax>>this.sweepShiftAmount)-(this.sqr1?1:0)))),this.updateSweepPeriod&&(this.updateSweepPeriod=!1,this.sweepCounter=this.sweepCounterMax+1)},updateSampleValue:function(){this.isEnabled&&this.lengthCounter>0&&this.progTimerMax>7?0===this.sweepMode&&this.progTimerMax+(this.progTimerMax>>this.sweepShiftAmount)>4095?this.sampleValue=0:this.sampleValue=this.masterVolume*this.dutyLookup[(this.dutyMode<<3)+this.squareCounter]:this.sampleValue=0},writeReg:function(t,e){var i=this.sqr1?0:4;t===16384+i?(this.envDecayDisable=0!=(16&e),this.envDecayRate=15&e,this.envDecayLoopEnable=0!=(32&e),this.dutyMode=e>>6&3,this.lengthCounterEnable=0==(32&e),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()):t===16385+i?(this.sweepActive=0!=(128&e),this.sweepCounterMax=e>>4&7,this.sweepMode=e>>3&1,this.sweepShiftAmount=7&e,this.updateSweepPeriod=!0):t===16386+i?(this.progTimerMax&=1792,this.progTimerMax|=e):t===16387+i&&(this.progTimerMax&=255,this.progTimerMax|=(7&e)<<8,this.isEnabled&&(this.lengthCounter=this.papu.getLengthMax(248&e)),this.envReset=!0)},setEnabled:function(t){this.isEnabled=t,t||(this.lengthCounter=0),this.updateSampleValue()},getLengthStatus:function(){return 0!==this.lengthCounter&&this.isEnabled?1:0}};var r=function(t){this.papu=t,this.isEnabled=null,this.sampleCondition=null,this.lengthCounterEnable=null,this.lcHalt=null,this.lcControl=null,this.progTimerCount=null,this.progTimerMax=null,this.triangleCounter=null,this.lengthCounter=null,this.linearCounter=null,this.lcLoadValue=null,this.sampleValue=null,this.tmp=null,this.reset()};r.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.triangleCounter=0,this.isEnabled=!1,this.sampleCondition=!1,this.lengthCounter=0,this.lengthCounterEnable=!1,this.linearCounter=0,this.lcLoadValue=0,this.lcHalt=!0,this.lcControl=!1,this.tmp=0,this.sampleValue=15},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,0===this.lengthCounter&&this.updateSampleCondition())},clockLinearCounter:function(){this.lcHalt?(this.linearCounter=this.lcLoadValue,this.updateSampleCondition()):this.linearCounter>0&&(this.linearCounter--,this.updateSampleCondition()),this.lcControl||(this.lcHalt=!1)},getLengthStatus:function(){return 0!==this.lengthCounter&&this.isEnabled?1:0},readReg:function(t){return 0},writeReg:function(t,e){16392===t?(this.lcControl=0!=(128&e),this.lcLoadValue=127&e,this.lengthCounterEnable=!this.lcControl):16394===t?(this.progTimerMax&=1792,this.progTimerMax|=e):16395===t&&(this.progTimerMax&=255,this.progTimerMax|=(7&e)<<8,this.lengthCounter=this.papu.getLengthMax(248&e),this.lcHalt=!0),this.updateSampleCondition()},clockProgrammableTimer:function(t){if(this.progTimerMax>0)for(this.progTimerCount+=t;this.progTimerMax>0&&this.progTimerCount>=this.progTimerMax;)this.progTimerCount-=this.progTimerMax,this.isEnabled&&this.lengthCounter>0&&this.linearCounter>0&&this.clockTriangleGenerator()},clockTriangleGenerator:function(){this.triangleCounter++,this.triangleCounter&=31},setEnabled:function(t){this.isEnabled=t,t||(this.lengthCounter=0),this.updateSampleCondition()},updateSampleCondition:function(){this.sampleCondition=this.isEnabled&&this.progTimerMax>7&&this.linearCounter>0&&this.lengthCounter>0}},t.exports=e},8321:(t,e,i)=>{var s=i(361),n=i(1610),r=function(t){this.nes=t,this.vramMem=null,this.spriteMem=null,this.vramAddress=null,this.vramTmpAddress=null,this.vramBufferedReadValue=null,this.firstWrite=null,this.sramAddress=null,this.currentMirroring=null,this.requestEndFrame=null,this.nmiOk=null,this.dummyCycleToggle=null,this.validTileData=null,this.nmiCounter=null,this.scanlineAlreadyRendered=null,this.f_nmiOnVblank=null,this.f_spriteSize=null,this.f_bgPatternTable=null,this.f_spPatternTable=null,this.f_addrInc=null,this.f_nTblAddress=null,this.f_color=null,this.f_spVisibility=null,this.f_bgVisibility=null,this.f_spClipping=null,this.f_bgClipping=null,this.f_dispType=null,this.cntFV=null,this.cntV=null,this.cntH=null,this.cntVT=null,this.cntHT=null,this.regFV=null,this.regV=null,this.regH=null,this.regVT=null,this.regHT=null,this.regFH=null,this.regS=null,this.curNt=null,this.attrib=null,this.buffer=null,this.bgbuffer=null,this.pixrendered=null,this.validTileData=null,this.scantile=null,this.scanline=null,this.lastRenderedScanline=null,this.curX=null,this.sprX=null,this.sprY=null,this.sprTile=null,this.sprCol=null,this.vertFlip=null,this.horiFlip=null,this.bgPriority=null,this.spr0HitX=null,this.spr0HitY=null,this.hitSpr0=null,this.sprPalette=null,this.imgPalette=null,this.ptTile=null,this.ntable1=null,this.currentMirroring=null,this.nameTable=null,this.vramMirrorTable=null,this.palTable=null,this.showSpr0Hit=!1,this.clipToTvSize=!0,this.reset()};r.prototype={STATUS_VRAMWRITE:4,STATUS_SLSPRITECOUNT:5,STATUS_SPRITE0HIT:6,STATUS_VBLANK:7,reset:function(){var t;for(this.vramMem=new Array(32768),this.spriteMem=new Array(256),t=0;t<this.vramMem.length;t++)this.vramMem[t]=0;for(t=0;t<this.spriteMem.length;t++)this.spriteMem[t]=0;for(this.vramAddress=null,this.vramTmpAddress=null,this.vramBufferedReadValue=0,this.firstWrite=!0,this.sramAddress=0,this.currentMirroring=-1,this.requestEndFrame=!1,this.nmiOk=!1,this.dummyCycleToggle=!1,this.validTileData=!1,this.nmiCounter=0,this.scanlineAlreadyRendered=null,this.f_nmiOnVblank=0,this.f_spriteSize=0,this.f_bgPatternTable=0,this.f_spPatternTable=0,this.f_addrInc=0,this.f_nTblAddress=0,this.f_color=0,this.f_spVisibility=0,this.f_bgVisibility=0,this.f_spClipping=0,this.f_bgClipping=0,this.f_dispType=0,this.cntFV=0,this.cntV=0,this.cntH=0,this.cntVT=0,this.cntHT=0,this.regFV=0,this.regV=0,this.regH=0,this.regVT=0,this.regHT=0,this.regFH=0,this.regS=0,this.curNt=null,this.attrib=new Array(32),this.buffer=new Array(61440),this.bgbuffer=new Array(61440),this.pixrendered=new Array(61440),this.validTileData=null,this.scantile=new Array(32),this.scanline=0,this.lastRenderedScanline=-1,this.curX=0,this.sprX=new Array(64),this.sprY=new Array(64),this.sprTile=new Array(64),this.sprCol=new Array(64),this.vertFlip=new Array(64),this.horiFlip=new Array(64),this.bgPriority=new Array(64),this.spr0HitX=0,this.spr0HitY=0,this.hitSpr0=!1,this.sprPalette=new Array(16),this.imgPalette=new Array(16),this.ptTile=new Array(512),t=0;t<512;t++)this.ptTile[t]=new s;for(this.ntable1=new Array(4),this.currentMirroring=-1,this.nameTable=new Array(4),t=0;t<4;t++)this.nameTable[t]=new o(32,32,"Nt"+t);for(this.vramMirrorTable=new Array(32768),t=0;t<32768;t++)this.vramMirrorTable[t]=t;this.palTable=new a,this.palTable.loadNTSCPalette(),this.updateControlReg1(0),this.updateControlReg2(0)},setMirroring:function(t){if(t!==this.currentMirroring){this.currentMirroring=t,this.triggerRendering(),null===this.vramMirrorTable&&(this.vramMirrorTable=new Array(32768));for(var e=0;e<32768;e++)this.vramMirrorTable[e]=e;this.defineMirrorRegion(16160,16128,32),this.defineMirrorRegion(16192,16128,32),this.defineMirrorRegion(16256,16128,32),this.defineMirrorRegion(16320,16128,32),this.defineMirrorRegion(12288,8192,3840),this.defineMirrorRegion(16384,0,16384),t===this.nes.rom.HORIZONTAL_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=1,this.ntable1[3]=1,this.defineMirrorRegion(9216,8192,1024),this.defineMirrorRegion(11264,10240,1024)):t===this.nes.rom.VERTICAL_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=1,this.ntable1[2]=0,this.ntable1[3]=1,this.defineMirrorRegion(10240,8192,1024),this.defineMirrorRegion(11264,9216,1024)):t===this.nes.rom.SINGLESCREEN_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=0,this.ntable1[3]=0,this.defineMirrorRegion(9216,8192,1024),this.defineMirrorRegion(10240,8192,1024),this.defineMirrorRegion(11264,8192,1024)):t===this.nes.rom.SINGLESCREEN_MIRRORING2?(this.ntable1[0]=1,this.ntable1[1]=1,this.ntable1[2]=1,this.ntable1[3]=1,this.defineMirrorRegion(9216,9216,1024),this.defineMirrorRegion(10240,9216,1024),this.defineMirrorRegion(11264,9216,1024)):(this.ntable1[0]=0,this.ntable1[1]=1,this.ntable1[2]=2,this.ntable1[3]=3)}},defineMirrorRegion:function(t,e,i){for(var s=0;s<i;s++)this.vramMirrorTable[t+s]=e+s},startVBlank:function(){this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NMI),this.lastRenderedScanline<239&&this.renderFramePartially(this.lastRenderedScanline+1,240-this.lastRenderedScanline),this.endFrame(),this.lastRenderedScanline=-1},endScanline:function(){switch(this.scanline){case 19:this.dummyCycleToggle&&(this.curX=1,this.dummyCycleToggle=!this.dummyCycleToggle);break;case 20:this.setStatusFlag(this.STATUS_VBLANK,!1),this.setStatusFlag(this.STATUS_SPRITE0HIT,!1),this.hitSpr0=!1,this.spr0HitX=-1,this.spr0HitY=-1,1!==this.f_bgVisibility&&1!==this.f_spVisibility||(this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,1===this.f_bgVisibility&&this.renderBgScanline(!1,0)),1===this.f_bgVisibility&&1===this.f_spVisibility&&this.checkSprite0(0),1!==this.f_bgVisibility&&1!==this.f_spVisibility||this.nes.mmap.clockIrqCounter();break;case 261:this.setStatusFlag(this.STATUS_VBLANK,!0),this.requestEndFrame=!0,this.nmiCounter=9,this.scanline=-1;break;default:this.scanline>=21&&this.scanline<=260&&(1===this.f_bgVisibility&&(this.scanlineAlreadyRendered||(this.cntHT=this.regHT,this.cntH=this.regH,this.renderBgScanline(!0,this.scanline+1-21)),this.scanlineAlreadyRendered=!1,this.hitSpr0||1!==this.f_spVisibility||this.sprX[0]>=-7&&this.sprX[0]<256&&this.sprY[0]+1<=this.scanline-20&&this.sprY[0]+1+(0===this.f_spriteSize?8:16)>=this.scanline-20&&this.checkSprite0(this.scanline-20)&&(this.hitSpr0=!0)),1!==this.f_bgVisibility&&1!==this.f_spVisibility||this.nes.mmap.clockIrqCounter())}this.scanline++,this.regsToAddress(),this.cntsToAddress()},startFrame:function(){var t=0;if(0===this.f_dispType)t=this.imgPalette[0];else switch(this.f_color){case 0:case 3:default:t=0;break;case 1:t=65280;break;case 2:t=16711680;break;case 4:t=255}var e,i=this.buffer;for(e=0;e<61440;e++)i[e]=t;var s=this.pixrendered;for(e=0;e<s.length;e++)s[e]=65},endFrame:function(){var t,e,i,s=this.buffer;if(this.showSpr0Hit){if(this.sprX[0]>=0&&this.sprX[0]<256&&this.sprY[0]>=0&&this.sprY[0]<240){for(t=0;t<256;t++)s[(this.sprY[0]<<8)+t]=16733525;for(t=0;t<240;t++)s[(t<<8)+this.sprX[0]]=16733525}if(this.spr0HitX>=0&&this.spr0HitX<256&&this.spr0HitY>=0&&this.spr0HitY<240){for(t=0;t<256;t++)s[(this.spr0HitY<<8)+t]=5635925;for(t=0;t<240;t++)s[(t<<8)+this.spr0HitX]=5635925}}if(this.clipToTvSize||0===this.f_bgClipping||0===this.f_spClipping)for(i=0;i<240;i++)for(e=0;e<8;e++)s[(i<<8)+e]=0;if(this.clipToTvSize)for(i=0;i<240;i++)for(e=0;e<8;e++)s[255+(i<<8)-e]=0;if(this.clipToTvSize)for(i=0;i<8;i++)for(e=0;e<256;e++)s[(i<<8)+e]=0,s[(239-i<<8)+e]=0;this.nes.ui.writeFrame(s)},updateControlReg1:function(t){this.triggerRendering(),this.f_nmiOnVblank=t>>7&1,this.f_spriteSize=t>>5&1,this.f_bgPatternTable=t>>4&1,this.f_spPatternTable=t>>3&1,this.f_addrInc=t>>2&1,this.f_nTblAddress=3&t,this.regV=t>>1&1,this.regH=1&t,this.regS=t>>4&1},updateControlReg2:function(t){this.triggerRendering(),this.f_color=t>>5&7,this.f_spVisibility=t>>4&1,this.f_bgVisibility=t>>3&1,this.f_spClipping=t>>2&1,this.f_bgClipping=t>>1&1,this.f_dispType=1&t,0===this.f_dispType&&this.palTable.setEmphasis(this.f_color),this.updatePalettes()},setStatusFlag:function(t,e){var i=1<<t;this.nes.cpu.mem[8194]=this.nes.cpu.mem[8194]&255-i|(e?i:0)},readStatusRegister:function(){var t=this.nes.cpu.mem[8194];return this.firstWrite=!0,this.setStatusFlag(this.STATUS_VBLANK,!1),t},writeSRAMAddress:function(t){this.sramAddress=t},sramLoad:function(){return this.spriteMem[this.sramAddress]},sramWrite:function(t){this.spriteMem[this.sramAddress]=t,this.spriteRamWriteUpdate(this.sramAddress,t),this.sramAddress++,this.sramAddress%=256},scrollWrite:function(t){this.triggerRendering(),this.firstWrite?(this.regHT=t>>3&31,this.regFH=7&t):(this.regFV=7&t,this.regVT=t>>3&31),this.firstWrite=!this.firstWrite},writeVRAMAddress:function(t){this.firstWrite?(this.regFV=t>>4&3,this.regV=t>>3&1,this.regH=t>>2&1,this.regVT=7&this.regVT|(3&t)<<3):(this.triggerRendering(),this.regVT=24&this.regVT|t>>5&7,this.regHT=31&t,this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,this.checkSprite0(this.scanline-20)),this.firstWrite=!this.firstWrite,this.cntsToAddress(),this.vramAddress<8192&&this.nes.mmap.latchAccess(this.vramAddress)},vramLoad:function(){var t;return this.cntsToAddress(),this.regsToAddress(),this.vramAddress<=16127?(t=this.vramBufferedReadValue,this.vramAddress<8192?this.vramBufferedReadValue=this.vramMem[this.vramAddress]:this.vramBufferedReadValue=this.mirroredLoad(this.vramAddress),this.vramAddress<8192&&this.nes.mmap.latchAccess(this.vramAddress),this.vramAddress+=1===this.f_addrInc?32:1,this.cntsFromAddress(),this.regsFromAddress(),t):(t=this.mirroredLoad(this.vramAddress),this.vramAddress+=1===this.f_addrInc?32:1,this.cntsFromAddress(),this.regsFromAddress(),t)},vramWrite:function(t){this.triggerRendering(),this.cntsToAddress(),this.regsToAddress(),this.vramAddress>=8192?this.mirroredWrite(this.vramAddress,t):(this.writeMem(this.vramAddress,t),this.nes.mmap.latchAccess(this.vramAddress)),this.vramAddress+=1===this.f_addrInc?32:1,this.regsFromAddress(),this.cntsFromAddress()},sramDMA:function(t){for(var e,i=256*t,s=this.sramAddress;s<256;s++)e=this.nes.cpu.mem[i+s],this.spriteMem[s]=e,this.spriteRamWriteUpdate(s,e);this.nes.cpu.haltCycles(513)},regsFromAddress:function(){var t=this.vramTmpAddress>>8&255;this.regFV=t>>4&7,this.regV=t>>3&1,this.regH=t>>2&1,this.regVT=7&this.regVT|(3&t)<<3,t=255&this.vramTmpAddress,this.regVT=24&this.regVT|t>>5&7,this.regHT=31&t},cntsFromAddress:function(){var t=this.vramAddress>>8&255;this.cntFV=t>>4&3,this.cntV=t>>3&1,this.cntH=t>>2&1,this.cntVT=7&this.cntVT|(3&t)<<3,t=255&this.vramAddress,this.cntVT=24&this.cntVT|t>>5&7,this.cntHT=31&t},regsToAddress:function(){var t=(7&this.regFV)<<4;t|=(1&this.regV)<<3,t|=(1&this.regH)<<2,t|=this.regVT>>3&3;var e=(7&this.regVT)<<5;e|=31&this.regHT,this.vramTmpAddress=32767&(t<<8|e)},cntsToAddress:function(){var t=(7&this.cntFV)<<4;t|=(1&this.cntV)<<3,t|=(1&this.cntH)<<2,t|=this.cntVT>>3&3;var e=(7&this.cntVT)<<5;e|=31&this.cntHT,this.vramAddress=32767&(t<<8|e)},incTileCounter:function(t){for(var e=t;0!==e;e--)this.cntHT++,32===this.cntHT&&(this.cntHT=0,this.cntVT++,this.cntVT>=30&&(this.cntH++,2===this.cntH&&(this.cntH=0,this.cntV++,2===this.cntV&&(this.cntV=0,this.cntFV++,this.cntFV&=7))))},mirroredLoad:function(t){return this.vramMem[this.vramMirrorTable[t]]},mirroredWrite:function(t,e){if(t>=16128&&t<16160)16128===t||16144===t?(this.writeMem(16128,e),this.writeMem(16144,e)):16132===t||16148===t?(this.writeMem(16132,e),this.writeMem(16148,e)):16136===t||16152===t?(this.writeMem(16136,e),this.writeMem(16152,e)):16140===t||16156===t?(this.writeMem(16140,e),this.writeMem(16156,e)):this.writeMem(t,e);else{if(!(t<this.vramMirrorTable.length))throw new Error("Invalid VRAM address: "+t.toString(16));this.writeMem(this.vramMirrorTable[t],e)}},triggerRendering:function(){this.scanline>=21&&this.scanline<=260&&(this.renderFramePartially(this.lastRenderedScanline+1,this.scanline-21-this.lastRenderedScanline),this.lastRenderedScanline=this.scanline-21)},renderFramePartially:function(t,e){if(1===this.f_spVisibility&&this.renderSpritesPartially(t,e,!0),1===this.f_bgVisibility){var i=t<<8,s=t+e<<8;s>61440&&(s=61440);for(var n=this.buffer,r=this.bgbuffer,o=this.pixrendered,a=i;a<s;a++)o[a]>255&&(n[a]=r[a])}1===this.f_spVisibility&&this.renderSpritesPartially(t,e,!1),this.validTileData=!1},renderBgScanline:function(t,e){var i=0===this.regS?0:256,s=(e<<8)-this.regFH;if(this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH],this.cntHT=this.regHT,this.cntH=this.regH,this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH],e<240&&e-this.cntFV>=0){for(var n,r,o,a,h=this.cntFV<<3,l=this.scantile,c=this.attrib,u=this.ptTile,p=this.nameTable,d=this.imgPalette,f=this.pixrendered,m=t?this.bgbuffer:this.buffer,g=0;g<32;g++){if(e>=0){if(this.validTileData){if(void 0===(n=l[g]))continue;r=n.pix,o=c[g]}else{if(void 0===(n=u[i+p[this.curNt].getTileIndex(this.cntHT,this.cntVT)]))continue;r=n.pix,o=p[this.curNt].getAttrib(this.cntHT,this.cntVT),l[g]=n,c[g]=o}var y=0,b=(g<<3)-this.regFH;if(b>-8)if(b<0&&(s-=b,y=-b),n.opaque[this.cntFV])for(;y<8;y++)m[s]=d[r[h+y]+o],f[s]|=256,s++;else for(;y<8;y++)0!==(a=r[h+y])&&(m[s]=d[a+o],f[s]|=256),s++}32==++this.cntHT&&(this.cntHT=0,this.cntH++,this.cntH%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH])}this.validTileData=!0}this.cntFV++,8===this.cntFV&&(this.cntFV=0,this.cntVT++,30===this.cntVT?(this.cntVT=0,this.cntV++,this.cntV%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH]):32===this.cntVT&&(this.cntVT=0),this.validTileData=!1)},renderSpritesPartially:function(t,e,i){if(1===this.f_spVisibility)for(var s=0;s<64;s++)if(this.bgPriority[s]===i&&this.sprX[s]>=0&&this.sprX[s]<256&&this.sprY[s]+8>=t&&this.sprY[s]<t+e)if(0===this.f_spriteSize)this.srcy1=0,this.srcy2=8,this.sprY[s]<t&&(this.srcy1=t-this.sprY[s]-1),this.sprY[s]+8>t+e&&(this.srcy2=t+e-this.sprY[s]+1),0===this.f_spPatternTable?this.ptTile[this.sprTile[s]].render(this.buffer,0,this.srcy1,8,this.srcy2,this.sprX[s],this.sprY[s]+1,this.sprCol[s],this.sprPalette,this.horiFlip[s],this.vertFlip[s],s,this.pixrendered):this.ptTile[this.sprTile[s]+256].render(this.buffer,0,this.srcy1,8,this.srcy2,this.sprX[s],this.sprY[s]+1,this.sprCol[s],this.sprPalette,this.horiFlip[s],this.vertFlip[s],s,this.pixrendered);else{var n=this.sprTile[s];0!=(1&n)&&(n=this.sprTile[s]-1+256);var r=0,o=8;this.sprY[s]<t&&(r=t-this.sprY[s]-1),this.sprY[s]+8>t+e&&(o=t+e-this.sprY[s]),this.ptTile[n+(this.vertFlip[s]?1:0)].render(this.buffer,0,r,8,o,this.sprX[s],this.sprY[s]+1,this.sprCol[s],this.sprPalette,this.horiFlip[s],this.vertFlip[s],s,this.pixrendered),r=0,o=8,this.sprY[s]+8<t&&(r=t-(this.sprY[s]+8+1)),this.sprY[s]+16>t+e&&(o=t+e-(this.sprY[s]+8)),this.ptTile[n+(this.vertFlip[s]?0:1)].render(this.buffer,0,r,8,o,this.sprX[s],this.sprY[s]+1+8,this.sprCol[s],this.sprPalette,this.horiFlip[s],this.vertFlip[s],s,this.pixrendered)}},checkSprite0:function(t){var e;this.spr0HitX=-1,this.spr0HitY=-1;var i,s,n,r,o,a=0===this.f_spPatternTable?0:256;if(i=this.sprX[0],s=this.sprY[0]+1,0===this.f_spriteSize){if(s<=t&&s+8>t&&i>=-7&&i<256)if(n=this.ptTile[this.sprTile[0]+a],e=this.vertFlip[0]?7-(t-s):t-s,e*=8,o=256*t+i,this.horiFlip[0])for(r=7;r>=0;r--){if(i>=0&&i<256&&o>=0&&o<61440&&0!==this.pixrendered[o]&&0!==n.pix[e+r])return this.spr0HitX=o%256,this.spr0HitY=t,!0;i++,o++}else for(r=0;r<8;r++){if(i>=0&&i<256&&o>=0&&o<61440&&0!==this.pixrendered[o]&&0!==n.pix[e+r])return this.spr0HitX=o%256,this.spr0HitY=t,!0;i++,o++}}else if(s<=t&&s+16>t&&i>=-7&&i<256)if((e=this.vertFlip[0]?15-(t-s):t-s)<8?n=this.ptTile[this.sprTile[0]+(this.vertFlip[0]?1:0)+(0!=(1&this.sprTile[0])?255:0)]:(n=this.ptTile[this.sprTile[0]+(this.vertFlip[0]?0:1)+(0!=(1&this.sprTile[0])?255:0)],this.vertFlip[0]?e=15-e:e-=8),e*=8,o=256*t+i,this.horiFlip[0])for(r=7;r>=0;r--){if(i>=0&&i<256&&o>=0&&o<61440&&0!==this.pixrendered[o]&&0!==n.pix[e+r])return this.spr0HitX=o%256,this.spr0HitY=t,!0;i++,o++}else for(r=0;r<8;r++){if(i>=0&&i<256&&o>=0&&o<61440&&0!==this.pixrendered[o]&&0!==n.pix[e+r])return this.spr0HitX=o%256,this.spr0HitY=t,!0;i++,o++}return!1},writeMem:function(t,e){this.vramMem[t]=e,t<8192?(this.vramMem[t]=e,this.patternWrite(t,e)):t>=8192&&t<9152?this.nameTableWrite(this.ntable1[0],t-8192,e):t>=9152&&t<9216?this.attribTableWrite(this.ntable1[0],t-9152,e):t>=9216&&t<10176?this.nameTableWrite(this.ntable1[1],t-9216,e):t>=10176&&t<10240?this.attribTableWrite(this.ntable1[1],t-10176,e):t>=10240&&t<11200?this.nameTableWrite(this.ntable1[2],t-10240,e):t>=11200&&t<11264?this.attribTableWrite(this.ntable1[2],t-11200,e):t>=11264&&t<12224?this.nameTableWrite(this.ntable1[3],t-11264,e):t>=12224&&t<12288?this.attribTableWrite(this.ntable1[3],t-12224,e):t>=16128&&t<16160&&this.updatePalettes()},updatePalettes:function(){var t;for(t=0;t<16;t++)0===this.f_dispType?this.imgPalette[t]=this.palTable.getEntry(63&this.vramMem[16128+t]):this.imgPalette[t]=this.palTable.getEntry(32&this.vramMem[16128+t]);for(t=0;t<16;t++)0===this.f_dispType?this.sprPalette[t]=this.palTable.getEntry(63&this.vramMem[16144+t]):this.sprPalette[t]=this.palTable.getEntry(32&this.vramMem[16144+t])},patternWrite:function(t,e){var i=Math.floor(t/16),s=t%16;s<8?this.ptTile[i].setScanline(s,e,this.vramMem[t+8]):this.ptTile[i].setScanline(s-8,this.vramMem[t-8],e)},nameTableWrite:function(t,e,i){this.nameTable[t].tile[e]=i,this.checkSprite0(this.scanline-20)},attribTableWrite:function(t,e,i){this.nameTable[t].writeAttrib(e,i)},spriteRamWriteUpdate:function(t,e){var i=Math.floor(t/4);0===i&&this.checkSprite0(this.scanline-20),t%4==0?this.sprY[i]=e:t%4==1?this.sprTile[i]=e:t%4==2?(this.vertFlip[i]=0!=(128&e),this.horiFlip[i]=0!=(64&e),this.bgPriority[i]=0!=(32&e),this.sprCol[i]=(3&e)<<2):t%4==3&&(this.sprX[i]=e)},doNMI:function(){this.setStatusFlag(this.STATUS_VBLANK,!0),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NMI)},isPixelWhite:function(t,e){return this.triggerRendering(),16777215===this.nes.ppu.buffer[(e<<8)+t]},JSON_PROPERTIES:["vramMem","spriteMem","cntFV","cntV","cntH","cntVT","cntHT","regFV","regV","regH","regVT","regHT","regFH","regS","vramAddress","vramTmpAddress","f_nmiOnVblank","f_spriteSize","f_bgPatternTable","f_spPatternTable","f_addrInc","f_nTblAddress","f_color","f_spVisibility","f_bgVisibility","f_spClipping","f_bgClipping","f_dispType","vramBufferedReadValue","firstWrite","currentMirroring","vramMirrorTable","ntable1","sramAddress","hitSpr0","sprPalette","imgPalette","curX","scanline","lastRenderedScanline","curNt","scantile","attrib","buffer","bgbuffer","pixrendered","requestEndFrame","nmiOk","dummyCycleToggle","nmiCounter","validTileData","scanlineAlreadyRendered"],toJSON:function(){var t,e=n.toJSON(this);for(e.nameTable=[],t=0;t<this.nameTable.length;t++)e.nameTable[t]=this.nameTable[t].toJSON();for(e.ptTile=[],t=0;t<this.ptTile.length;t++)e.ptTile[t]=this.ptTile[t].toJSON();return e},fromJSON:function(t){var e;for(n.fromJSON(this,t),e=0;e<this.nameTable.length;e++)this.nameTable[e].fromJSON(t.nameTable[e]);for(e=0;e<this.ptTile.length;e++)this.ptTile[e].fromJSON(t.ptTile[e]);for(e=0;e<this.spriteMem.length;e++)this.spriteRamWriteUpdate(e,this.spriteMem[e])}};var o=function(t,e,i){this.width=t,this.height=e,this.name=i,this.tile=new Array(t*e),this.attrib=new Array(t*e);for(var s=0;s<t*e;s++)this.tile[s]=0,this.attrib[s]=0};o.prototype={getTileIndex:function(t,e){return this.tile[e*this.width+t]},getAttrib:function(t,e){return this.attrib[e*this.width+t]},writeAttrib:function(t,e){for(var i,s,n,r=t%8*4,o=4*Math.floor(t/8),a=0;a<2;a++)for(var h=0;h<2;h++){i=e>>2*(2*a+h)&3;for(var l=0;l<2;l++)for(var c=0;c<2;c++)s=r+2*h+c,n=(o+2*a+l)*this.width+s,this.attrib[n]=i<<2&12}},toJSON:function(){return{tile:this.tile,attrib:this.attrib}},fromJSON:function(t){this.tile=t.tile,this.attrib=t.attrib}};var a=function(){this.curTable=new Array(64),this.emphTable=new Array(8),this.currentEmph=-1};a.prototype={reset:function(){this.setEmphasis(0)},loadNTSCPalette:function(){this.curTable=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],this.makeTables(),this.setEmphasis(0)},loadPALPalette:function(){this.curTable=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],this.makeTables(),this.setEmphasis(0)},makeTables:function(){for(var t,e,i,s,n,r,o,a,h=0;h<8;h++)for(r=1,o=1,a=1,0!=(1&h)&&(r=.75,a=.75),0!=(2&h)&&(r=.75,o=.75),0!=(4&h)&&(o=.75,a=.75),this.emphTable[h]=new Array(64),n=0;n<64;n++)s=this.curTable[n],t=Math.floor(this.getRed(s)*r),e=Math.floor(this.getGreen(s)*o),i=Math.floor(this.getBlue(s)*a),this.emphTable[h][n]=this.getRgb(t,e,i)},setEmphasis:function(t){if(t!==this.currentEmph){this.currentEmph=t;for(var e=0;e<64;e++)this.curTable[e]=this.emphTable[t][e]}},getEntry:function(t){return this.curTable[t]},getRed:function(t){return t>>16&255},getGreen:function(t){return t>>8&255},getBlue:function(t){return 255&t},getRgb:function(t,e,i){return t<<16|e<<8|i},loadDefaultPalette:function(){this.curTable[0]=this.getRgb(117,117,117),this.curTable[1]=this.getRgb(39,27,143),this.curTable[2]=this.getRgb(0,0,171),this.curTable[3]=this.getRgb(71,0,159),this.curTable[4]=this.getRgb(143,0,119),this.curTable[5]=this.getRgb(171,0,19),this.curTable[6]=this.getRgb(167,0,0),this.curTable[7]=this.getRgb(127,11,0),this.curTable[8]=this.getRgb(67,47,0),this.curTable[9]=this.getRgb(0,71,0),this.curTable[10]=this.getRgb(0,81,0),this.curTable[11]=this.getRgb(0,63,23),this.curTable[12]=this.getRgb(27,63,95),this.curTable[13]=this.getRgb(0,0,0),this.curTable[14]=this.getRgb(0,0,0),this.curTable[15]=this.getRgb(0,0,0),this.curTable[16]=this.getRgb(188,188,188),this.curTable[17]=this.getRgb(0,115,239),this.curTable[18]=this.getRgb(35,59,239),this.curTable[19]=this.getRgb(131,0,243),this.curTable[20]=this.getRgb(191,0,191),this.curTable[21]=this.getRgb(231,0,91),this.curTable[22]=this.getRgb(219,43,0),this.curTable[23]=this.getRgb(203,79,15),this.curTable[24]=this.getRgb(139,115,0),this.curTable[25]=this.getRgb(0,151,0),this.curTable[26]=this.getRgb(0,171,0),this.curTable[27]=this.getRgb(0,147,59),this.curTable[28]=this.getRgb(0,131,139),this.curTable[29]=this.getRgb(0,0,0),this.curTable[30]=this.getRgb(0,0,0),this.curTable[31]=this.getRgb(0,0,0),this.curTable[32]=this.getRgb(255,255,255),this.curTable[33]=this.getRgb(63,191,255),this.curTable[34]=this.getRgb(95,151,255),this.curTable[35]=this.getRgb(167,139,253),this.curTable[36]=this.getRgb(247,123,255),this.curTable[37]=this.getRgb(255,119,183),this.curTable[38]=this.getRgb(255,119,99),this.curTable[39]=this.getRgb(255,155,59),this.curTable[40]=this.getRgb(243,191,63),this.curTable[41]=this.getRgb(131,211,19),this.curTable[42]=this.getRgb(79,223,75),this.curTable[43]=this.getRgb(88,248,152),this.curTable[44]=this.getRgb(0,235,219),this.curTable[45]=this.getRgb(0,0,0),this.curTable[46]=this.getRgb(0,0,0),this.curTable[47]=this.getRgb(0,0,0),this.curTable[48]=this.getRgb(255,255,255),this.curTable[49]=this.getRgb(171,231,255),this.curTable[50]=this.getRgb(199,215,255),this.curTable[51]=this.getRgb(215,203,255),this.curTable[52]=this.getRgb(255,199,255),this.curTable[53]=this.getRgb(255,199,219),this.curTable[54]=this.getRgb(255,191,179),this.curTable[55]=this.getRgb(255,219,171),this.curTable[56]=this.getRgb(255,231,163),this.curTable[57]=this.getRgb(227,255,163),this.curTable[58]=this.getRgb(171,243,191),this.curTable[59]=this.getRgb(179,255,207),this.curTable[60]=this.getRgb(159,255,243),this.curTable[61]=this.getRgb(0,0,0),this.curTable[62]=this.getRgb(0,0,0),this.curTable[63]=this.getRgb(0,0,0),this.makeTables(),this.setEmphasis(0)}},t.exports=r},2471:(t,e,i)=>{var s=i(6939),n=i(361),r=function(t){this.nes=t,this.mapperName=new Array(92);for(var e=0;e<92;e++)this.mapperName[e]="Unknown Mapper";this.mapperName[0]="Direct Access",this.mapperName[1]="Nintendo MMC1",this.mapperName[2]="UNROM",this.mapperName[3]="CNROM",this.mapperName[4]="Nintendo MMC3",this.mapperName[5]="Nintendo MMC5",this.mapperName[6]="FFE F4xxx",this.mapperName[7]="AOROM",this.mapperName[8]="FFE F3xxx",this.mapperName[9]="Nintendo MMC2",this.mapperName[10]="Nintendo MMC4",this.mapperName[11]="Color Dreams Chip",this.mapperName[12]="FFE F6xxx",this.mapperName[15]="100-in-1 switch",this.mapperName[16]="Bandai chip",this.mapperName[17]="FFE F8xxx",this.mapperName[18]="Jaleco SS8806 chip",this.mapperName[19]="Namcot 106 chip",this.mapperName[20]="Famicom Disk System",this.mapperName[21]="Konami VRC4a",this.mapperName[22]="Konami VRC2a",this.mapperName[23]="Konami VRC2a",this.mapperName[24]="Konami VRC6",this.mapperName[25]="Konami VRC4b",this.mapperName[32]="Irem G-101 chip",this.mapperName[33]="Taito TC0190/TC0350",this.mapperName[34]="32kB ROM switch",this.mapperName[64]="Tengen RAMBO-1 chip",this.mapperName[65]="Irem H-3001 chip",this.mapperName[66]="GNROM switch",this.mapperName[67]="SunSoft3 chip",this.mapperName[68]="SunSoft4 chip",this.mapperName[69]="SunSoft5 FME-7 chip",this.mapperName[71]="Camerica chip",this.mapperName[78]="Irem 74HC161/32-based",this.mapperName[91]="Pirate HK-SF3 chip"};r.prototype={VERTICAL_MIRRORING:0,HORIZONTAL_MIRRORING:1,FOURSCREEN_MIRRORING:2,SINGLESCREEN_MIRRORING:3,SINGLESCREEN_MIRRORING2:4,SINGLESCREEN_MIRRORING3:5,SINGLESCREEN_MIRRORING4:6,CHRROM_MIRRORING:7,header:null,rom:null,vrom:null,vromTile:null,romCount:null,vromCount:null,mirroring:null,batteryRam:null,trainer:null,fourScreen:null,mapperType:null,valid:!1,load:function(t){var e,i,s;if(-1===t.indexOf("NES"))throw new Error("Not a valid NES ROM.");for(this.header=new Array(16),e=0;e<16;e++)this.header[e]=255&t.charCodeAt(e);this.romCount=this.header[4],this.vromCount=2*this.header[5],this.mirroring=0!=(1&this.header[6])?1:0,this.batteryRam=0!=(2&this.header[6]),this.trainer=0!=(4&this.header[6]),this.fourScreen=0!=(8&this.header[6]),this.mapperType=this.header[6]>>4|240&this.header[7];var r=!1;for(e=8;e<16;e++)if(0!==this.header[e]){r=!0;break}r&&(this.mapperType&=15),this.rom=new Array(this.romCount);var o,a,h=16;for(e=0;e<this.romCount;e++){for(this.rom[e]=new Array(16384),i=0;i<16384&&!(h+i>=t.length);i++)this.rom[e][i]=255&t.charCodeAt(h+i);h+=16384}for(this.vrom=new Array(this.vromCount),e=0;e<this.vromCount;e++){for(this.vrom[e]=new Array(4096),i=0;i<4096&&!(h+i>=t.length);i++)this.vrom[e][i]=255&t.charCodeAt(h+i);h+=4096}for(this.vromTile=new Array(this.vromCount),e=0;e<this.vromCount;e++)for(this.vromTile[e]=new Array(256),i=0;i<256;i++)this.vromTile[e][i]=new n;for(s=0;s<this.vromCount;s++)for(e=0;e<4096;e++)o=e>>4,(a=e%16)<8?this.vromTile[s][o].setScanline(a,this.vrom[s][e],this.vrom[s][e+8]):this.vromTile[s][o].setScanline(a-8,this.vrom[s][e-8],this.vrom[s][e]);this.valid=!0},getMirroringType:function(){return this.fourScreen?this.FOURSCREEN_MIRRORING:0===this.mirroring?this.HORIZONTAL_MIRRORING:this.VERTICAL_MIRRORING},getMapperName:function(){return this.mapperType>=0&&this.mapperType<this.mapperName.length?this.mapperName[this.mapperType]:"Unknown Mapper, "+this.mapperType},mapperSupported:function(){return void 0!==s[this.mapperType]},createMapper:function(){if(this.mapperSupported())return new s[this.mapperType](this.nes);throw new Error("This ROM uses a mapper not supported by JSNES: "+this.getMapperName()+"("+this.mapperType+")")}},t.exports=r},361:t=>{var e=function(){this.pix=new Array(64),this.fbIndex=null,this.tIndex=null,this.x=null,this.y=null,this.w=null,this.h=null,this.incX=null,this.incY=null,this.palIndex=null,this.tpri=null,this.c=null,this.initialized=!1,this.opaque=new Array(8)};e.prototype={setBuffer:function(t){for(this.y=0;this.y<8;this.y++)this.setScanline(this.y,t[this.y],t[this.y+8])},setScanline:function(t,e,i){for(this.initialized=!0,this.tIndex=t<<3,this.x=0;this.x<8;this.x++)this.pix[this.tIndex+this.x]=(e>>7-this.x&1)+((i>>7-this.x&1)<<1),0===this.pix[this.tIndex+this.x]&&(this.opaque[t]=!1)},render:function(t,e,i,s,n,r,o,a,h,l,c,u,p){if(!(r<-7||r>=256||o<-7||o>=240))if(this.w=s-e,this.h=n-i,r<0&&(e-=r),r+s>=256&&(s=256-r),o<0&&(i-=o),o+n>=240&&(n=240-o),l||c)if(l&&!c)for(this.fbIndex=(o<<8)+r,this.tIndex=7,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<s&&this.y>=i&&this.y<n&&(this.palIndex=this.pix[this.tIndex],this.tpri=p[this.fbIndex],0!==this.palIndex&&u<=(255&this.tpri)&&(t[this.fbIndex]=h[this.palIndex+a],this.tpri=3840&this.tpri|u,p[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex--;this.fbIndex-=8,this.fbIndex+=256,this.tIndex+=16}else if(c&&!l)for(this.fbIndex=(o<<8)+r,this.tIndex=56,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<s&&this.y>=i&&this.y<n&&(this.palIndex=this.pix[this.tIndex],this.tpri=p[this.fbIndex],0!==this.palIndex&&u<=(255&this.tpri)&&(t[this.fbIndex]=h[this.palIndex+a],this.tpri=3840&this.tpri|u,p[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex++;this.fbIndex-=8,this.fbIndex+=256,this.tIndex-=16}else for(this.fbIndex=(o<<8)+r,this.tIndex=63,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<s&&this.y>=i&&this.y<n&&(this.palIndex=this.pix[this.tIndex],this.tpri=p[this.fbIndex],0!==this.palIndex&&u<=(255&this.tpri)&&(t[this.fbIndex]=h[this.palIndex+a],this.tpri=3840&this.tpri|u,p[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex--;this.fbIndex-=8,this.fbIndex+=256}else for(this.fbIndex=(o<<8)+r,this.tIndex=0,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<s&&this.y>=i&&this.y<n&&(this.palIndex=this.pix[this.tIndex],this.tpri=p[this.fbIndex],0!==this.palIndex&&u<=(255&this.tpri)&&(t[this.fbIndex]=h[this.palIndex+a],this.tpri=3840&this.tpri|u,p[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex++;this.fbIndex-=8,this.fbIndex+=256}},isTransparent:function(t,e){return 0===this.pix[(e<<3)+t]},toJSON:function(){return{opaque:this.opaque,pix:this.pix}},fromJSON:function(t){this.opaque=t.opaque,this.pix=t.pix}},t.exports=e},1610:t=>{t.exports={copyArrayElements:function(t,e,i,s,n){for(var r=0;r<n;++r)i[s+r]=t[e+r]},copyArray:function(t){return t.slice(0)},fromJSON:function(t,e){for(var i=0;i<t.JSON_PROPERTIES.length;i++)t[t.JSON_PROPERTIES[i]]=e[t.JSON_PROPERTIES[i]]},toJSON:function(t){for(var e={},i=0;i<t.JSON_PROPERTIES.length;i++)e[t.JSON_PROPERTIES[i]]=t[t.JSON_PROPERTIES[i]];return e}}},6659:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function s(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(t,e,s,r,o){if("function"!=typeof s)throw new TypeError("The listener must be a function");var a=new n(s,r||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,s,n=[];if(0===this._eventsCount)return n;for(s in t=this._events)e.call(t,s)&&n.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=i?i+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,r=s.length,o=new Array(r);n<r;n++)o[n]=s[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,s=this._events[e];return s?s.fn?1:s.length:0},a.prototype.emit=function(t,e,s,n,r,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,c=this._events[a],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,s),!0;case 4:return c.fn.call(c.context,e,s,n),!0;case 5:return c.fn.call(c.context,e,s,n,r),!0;case 6:return c.fn.call(c.context,e,s,n,r,o),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var p,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,s);break;case 4:c[l].fn.call(c[l].context,e,s,n);break;default:if(!h)for(p=1,h=new Array(u-1);p<u;p++)h[p-1]=arguments[p];c[l].fn.apply(c[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return r(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return r(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,s,n){var r=i?i+t:t;if(!this._events[r])return this;if(!e)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||n&&!a.once||s&&a.context!==s||o(this,r);else{for(var h=0,l=[],c=a.length;h<c;h++)(a[h].fn!==e||n&&!a[h].once||s&&a[h].context!==s)&&l.push(a[h]);l.length?this._events[r]=1===l.length?l[0]:l:o(this,r)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},5182:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},2084:function(t,e,i){var s,n;!function(r,o){"use strict";s=function(){var t=function(){},e="undefined",i=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"];function n(t,e){var i=t[e];if("function"==typeof i.bind)return i.bind(t);try{return Function.prototype.bind.call(i,t)}catch(e){return function(){return Function.prototype.apply.apply(i,[t,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(e,i){for(var n=0;n<s.length;n++){var r=s[n];this[r]=n<e?t:this.methodFactory(r,e,i)}this.log=this.debug}function a(t,i,s){return function(){typeof console!==e&&(o.call(this,i,s),this[t].apply(this,arguments))}}function h(s,o,h){return function(s){return"debug"===s&&(s="log"),typeof console!==e&&("trace"===s&&i?r:void 0!==console[s]?n(console,s):void 0!==console.log?n(console,"log"):t)}(s)||a.apply(this,arguments)}function l(t,i,n){var r,a=this;i=null==i?"WARN":i;var l="loglevel";function c(){var t;if(typeof window!==e&&l){try{t=window.localStorage[l]}catch(t){}if(typeof t===e)try{var i=window.document.cookie,s=i.indexOf(encodeURIComponent(l)+"=");-1!==s&&(t=/^([^;]+)/.exec(i.slice(s))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?l+=":"+t:"symbol"==typeof t&&(l=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=n||h,a.getLevel=function(){return r},a.setLevel=function(i,n){if("string"==typeof i&&void 0!==a.levels[i.toUpperCase()]&&(i=a.levels[i.toUpperCase()]),!("number"==typeof i&&i>=0&&i<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+i;if(r=i,!1!==n&&function(t){var i=(s[t]||"silent").toUpperCase();if(typeof window!==e&&l){try{return void(window.localStorage[l]=i)}catch(t){}try{window.document.cookie=encodeURIComponent(l)+"="+i+";"}catch(t){}}}(i),o.call(a,i,t),typeof console===e&&i<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){i=t,c()||a.setLevel(t,!1)},a.resetLevel=function(){a.setLevel(i,!1),function(){if(typeof window!==e&&l){try{return void window.localStorage.removeItem(l)}catch(t){}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(t){}}}()},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var u=c();null==u&&(u=i),a.setLevel(u,!1)}var c=new l,u={};c.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=u[t];return e||(e=u[t]=new l(t,c.getLevel(),c.methodFactory)),e};var p=typeof window!==e?window.log:void 0;return c.noConflict=function(){return typeof window!==e&&window.log===c&&(window.log=p),c},c.getLoggers=function(){return u},c.default=c,c},void 0===(n=s.call(e,i,e,t))||(t.exports=n)}()},9174:function(t,e,i){t.exports=function(){"use strict";var t="function"==typeof Promise,e="object"==typeof self?self:i.g,s="undefined"!=typeof Symbol,n="undefined"!=typeof Map,r="undefined"!=typeof Set,o="undefined"!=typeof WeakMap,a="undefined"!=typeof WeakSet,h="undefined"!=typeof DataView,l=s&&void 0!==Symbol.iterator,c=s&&void 0!==Symbol.toStringTag,u=r&&"function"==typeof Set.prototype.entries,p=n&&"function"==typeof Map.prototype.entries,d=u&&Object.getPrototypeOf((new Set).entries()),f=p&&Object.getPrototypeOf((new Map).entries()),m=l&&"function"==typeof Array.prototype[Symbol.iterator],g=m&&Object.getPrototypeOf([][Symbol.iterator]()),y=l&&"function"==typeof String.prototype[Symbol.iterator],b=y&&Object.getPrototypeOf(""[Symbol.iterator]());return function(i){var s=typeof i;if("object"!==s)return s;if(null===i)return"null";if(i===e)return"global";if(Array.isArray(i)&&(!1===c||!(Symbol.toStringTag in i)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&i===window.location)return"Location";if("object"==typeof window.document&&i===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&i===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&i===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&i instanceof window.HTMLElement){if("BLOCKQUOTE"===i.tagName)return"HTMLQuoteElement";if("TD"===i.tagName)return"HTMLTableDataCellElement";if("TH"===i.tagName)return"HTMLTableHeaderCellElement"}}var l=c&&i[Symbol.toStringTag];if("string"==typeof l)return l;var u=Object.getPrototypeOf(i);return u===RegExp.prototype?"RegExp":u===Date.prototype?"Date":t&&u===Promise.prototype?"Promise":r&&u===Set.prototype?"Set":n&&u===Map.prototype?"Map":a&&u===WeakSet.prototype?"WeakSet":o&&u===WeakMap.prototype?"WeakMap":h&&u===DataView.prototype?"DataView":n&&u===f?"Map Iterator":r&&u===d?"Set Iterator":m&&u===g?"Array Iterator":y&&u===b?"String Iterator":null===u?"Object":Object.prototype.toString.call(i).slice(8,-1)}}()},3517:t=>{"use strict";t.exports={i8:"0.4.0"}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=[];function e(i){if("number"==typeof i||"string"==typeof i||"boolean"==typeof i||null===i)return i;if(void 0===i)return{__type:"undefined"};if(Array.isArray(i))return i.map(e);if("object"==typeof i){for(let e of t)if(i instanceof e.klass)return{__type:e.typeName,data:e.serializer(i)};const s={};for(let t of Object.keys(i))s[t]=e(i[t]);return s}throw new Error("Failed to serialize unknown type.")}function s(e){if("number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e)return e;if(Array.isArray(e))return e.map(s);if("object"!=typeof e)throw new Error("Failed to deserialize unknown type.");if(!e.__type){const t={};for(let i of Object.keys(e))t[i]=s(e[i]);return t}if("undefined"!==e.__type)for(let i of t)if(e.__type===i.typeName)return i.deserializer(e.data)}function n(t){const i={};for(let s of Object.keys(t))i[s]=e(t[s]);return i}function r(t,e){for(const[i,n]of Object.entries(t))e[i]=s(t[i])}class o{serialize(){return n(this)}deserialize(t){r(t,this)}}class a{predictNext(){return this}serialize(){return n(this)}deserialize(t){r(t,this)}}class h{constructor(t,e,i){this.id=t,this.isLocal=e,this.isHost=i}isLocalPlayer(){return this.isLocal}isRemotePlayer(){return!this.isLocal}isServer(){return this.isHost}isClient(){return!this.isHost}getID(){return this.id}}function l(t,e){let i=t.get(e);if(void 0!==i)return i;throw new Error(`Key ${String(e)} not in Map ${t.toString()}`)}function c(t){return JSON.parse(JSON.stringify(t))}function u(t){let e=t.shift();if(void 0!==e)return e;throw new Error(`Shift returned undefined from Array ${t.toString()}`)}class p{constructor(t=0,e=0){this.x=t,this.y=e}multiplyScalar(t){return new p(this.x*t,this.y*t)}add(t){return new p(this.x+t.x,this.y+t.y)}subtract(t){return new p(this.x-t.x,this.y-t.y)}}var d,f,m;d=p,f=t=>[t.x,t.y],m=t=>new p(t[0],t[1]),t.push({klass:d,typeName:"netplayjs.Vec2",serializer:f,deserializer:m});class g extends a{constructor(){super(...arguments),this.keysPressed={},this.keysHeld={},this.keysReleased={},this.touches=[]}arrowKeys(){return new p((this.keysHeld.ArrowLeft?-1:0)+(this.keysHeld.ArrowRight?1:0),(this.keysHeld.ArrowDown?-1:0)+(this.keysHeld.ArrowUp?1:0))}wasd(){return new p((this.keysHeld.a?-1:0)+(this.keysHeld.d?1:0),(this.keysHeld.s?-1:0)+(this.keysHeld.w?1:0))}}class y{getCanvasScale(){const t=this.canvas.getBoundingClientRect();return{x:this.canvas.width/t.width,y:this.canvas.height/t.height}}projectClientPosition(t,e){const i=this.canvas.getBoundingClientRect(),s=this.getCanvasScale();return{x:(t-i.left)*s.x,y:(e-i.top)*s.y}}constructor(t=document.body,e,i,s){this.keysPressed={},this.keysHeld={},this.keysReleased={},this.mousePosition=null,this.mouseDelta=null,this.touches=[],this.canvas=e,this.touchControls=s,t.addEventListener("keydown",(t=>{this.keysHeld[t.key]=!0,this.keysPressed[t.key]=!0}),!1),t.addEventListener("keyup",(t=>{this.keysHeld[t.key]=!1,this.keysReleased[t.key]=!0}),!1),e.addEventListener("mouseenter",(t=>this.updateMousePosition(t)),!1),e.addEventListener("mousemove",(t=>this.updateMousePosition(t)),!1),e.addEventListener("mouseleave",(t=>{this.mousePosition=null}),!1),e.addEventListener("touchstart",(t=>this.updateTouches(t)),!1),e.addEventListener("touchmove",(t=>this.updateTouches(t)),!1),e.addEventListener("touchend",(t=>this.updateTouches(t)),!1),e.addEventListener("mousedown",(()=>{i&&e.requestPointerLock()}))}updateMousePosition(t){if(document.pointerLockElement===this.canvas)if(this.mousePosition){const e=this.getCanvasScale();this.mousePosition.x+=t.movementX*e.x,this.mousePosition.y+=t.movementY*e.y}else this.mousePosition=this.projectClientPosition(t.clientX,t.clientY);else this.mousePosition=this.projectClientPosition(t.clientX,t.clientY)}updateTouches(t){this.touches.length=t.targetTouches.length;for(let e=0;e<t.targetTouches.length;++e)this.touches[e]=this.projectClientPosition(t.targetTouches[e].clientX,t.targetTouches[e].clientY)}getInput(){let t=new g;for(let e in this.keysPressed)this.keysPressed[e]&&(t.keysPressed[e]=!0,t.keysHeld[e]=!0);for(let e in this.keysHeld)this.keysHeld[e]&&(t.keysHeld[e]=!0);for(let e in this.keysReleased)this.keysReleased[e]&&(t.keysReleased[e]=!0);this.mousePosition&&(t.mousePosition=c(this.mousePosition)),t.touches=c(this.touches);for(let[e,i]of Object.entries(this.touchControls))t.touchControls=t.touchControls||{},t.touchControls[e]=c(i.getValue());return this.keysPressed={},this.keysReleased={},t}}var b=i(2084),R=i.n(b),_=i(5881);_.expect,_.version,_.AssertionError,_.util,_.config,_.use,_.should;const S=_.assert;var v;_.core;const w=window,A=w.trustedTypes,C=A?A.createPolicy("lit-html",{createHTML:t=>t}):void 0,E="$lit$",I=`lit$${(Math.random()+"").slice(9)}$`,N="?"+I,D=`<${N}>`,T=document,O=()=>T.createComment(""),x=t=>null===t||"object"!=typeof t&&"function"!=typeof t,k=Array.isArray,M="[ \t\n\f\r]",P=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,F=/-->/g,L=/>/g,B=RegExp(`>|${M}(?:([^\\s"'>=/]+)(${M}*=${M}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),V=/'/g,G=/"/g,q=/^(?:script|style|textarea|title)$/i,U=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),j=U(1),H=(U(2),Symbol.for("lit-noChange")),X=Symbol.for("lit-nothing"),Y=new WeakMap,z=T.createTreeWalker(T,129,null,!1),$=(t,e)=>{const i=t.length-1,s=[];let n,r=2===e?"<svg>":"",o=P;for(let e=0;e<i;e++){const i=t[e];let a,h,l=-1,c=0;for(;c<i.length&&(o.lastIndex=c,h=o.exec(i),null!==h);)c=o.lastIndex,o===P?"!--"===h[1]?o=F:void 0!==h[1]?o=L:void 0!==h[2]?(q.test(h[2])&&(n=RegExp("</"+h[2],"g")),o=B):void 0!==h[3]&&(o=B):o===B?">"===h[0]?(o=null!=n?n:P,l=-1):void 0===h[1]?l=-2:(l=o.lastIndex-h[2].length,a=h[1],o=void 0===h[3]?B:'"'===h[3]?G:V):o===G||o===V?o=B:o===F||o===L?o=P:(o=B,n=void 0);const u=o===B&&t[e+1].startsWith("/>")?" ":"";r+=o===P?i+D:l>=0?(s.push(a),i.slice(0,l)+E+i.slice(l)+I+u):i+I+(-2===l?(s.push(void 0),e):u)}const a=r+(t[i]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==C?C.createHTML(a):a,s]};class W{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let n=0,r=0;const o=t.length-1,a=this.parts,[h,l]=$(t,e);if(this.el=W.createElement(h,i),z.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(s=z.nextNode())&&a.length<o;){if(1===s.nodeType){if(s.hasAttributes()){const t=[];for(const e of s.getAttributeNames())if(e.endsWith(E)||e.startsWith(I)){const i=l[r++];if(t.push(e),void 0!==i){const t=s.getAttribute(i.toLowerCase()+E).split(I),e=/([.?@])?(.*)/.exec(i);a.push({type:1,index:n,name:e[2],strings:t,ctor:"."===e[1]?tt:"?"===e[1]?it:"@"===e[1]?st:Q})}else a.push({type:6,index:n})}for(const e of t)s.removeAttribute(e)}if(q.test(s.tagName)){const t=s.textContent.split(I),e=t.length-1;if(e>0){s.textContent=A?A.emptyScript:"";for(let i=0;i<e;i++)s.append(t[i],O()),z.nextNode(),a.push({type:2,index:++n});s.append(t[e],O())}}}else if(8===s.nodeType)if(s.data===N)a.push({type:2,index:n});else{let t=-1;for(;-1!==(t=s.data.indexOf(I,t+1));)a.push({type:7,index:n}),t+=I.length-1}n++}}static createElement(t,e){const i=T.createElement("template");return i.innerHTML=t,i}}function Z(t,e,i=t,s){var n,r,o,a;if(e===H)return e;let h=void 0!==s?null===(n=i._$Co)||void 0===n?void 0:n[s]:i._$Cl;const l=x(e)?void 0:e._$litDirective$;return(null==h?void 0:h.constructor)!==l&&(null===(r=null==h?void 0:h._$AO)||void 0===r||r.call(h,!1),void 0===l?h=void 0:(h=new l(t),h._$AT(t,i,s)),void 0!==s?(null!==(o=(a=i)._$Co)&&void 0!==o?o:a._$Co=[])[s]=h:i._$Cl=h),void 0!==h&&(e=Z(t,h._$AS(t,e.values),h,s)),e}class K{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;const{el:{content:i},parts:s}=this._$AD,n=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:T).importNode(i,!0);z.currentNode=n;let r=z.nextNode(),o=0,a=0,h=s[0];for(;void 0!==h;){if(o===h.index){let e;2===h.type?e=new J(r,r.nextSibling,this,t):1===h.type?e=new h.ctor(r,h.name,h.strings,this,t):6===h.type&&(e=new nt(r,this,t)),this.u.push(e),h=s[++a]}o!==(null==h?void 0:h.index)&&(r=z.nextNode(),o++)}return n}p(t){let e=0;for(const i of this.u)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class J{constructor(t,e,i,s){var n;this.type=2,this._$AH=X,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cm=null===(n=null==s?void 0:s.isConnected)||void 0===n||n}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Z(this,t,e),x(t)?t===X||null==t||""===t?(this._$AH!==X&&this._$AR(),this._$AH=X):t!==this._$AH&&t!==H&&this.g(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>k(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.k(t):this.g(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}g(t){this._$AH!==X&&x(this._$AH)?this._$AA.nextSibling.data=t:this.T(T.createTextNode(t)),this._$AH=t}$(t){var e;const{values:i,_$litType$:s}=t,n="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=W.createElement(s.h,this.options)),s);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===n)this._$AH.p(i);else{const t=new K(n,this),e=t.v(this.options);t.p(i),this.T(e),this._$AH=t}}_$AC(t){let e=Y.get(t.strings);return void 0===e&&Y.set(t.strings,e=new W(t)),e}k(t){k(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const n of t)s===e.length?e.push(i=new J(this.S(O()),this.S(O()),this,this.options)):i=e[s],i._$AI(n),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cm=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Q{constructor(t,e,i,s,n){this.type=1,this._$AH=X,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=n,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=X}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,s){const n=this.strings;let r=!1;if(void 0===n)t=Z(this,t,e,0),r=!x(t)||t!==this._$AH&&t!==H,r&&(this._$AH=t);else{const s=t;let o,a;for(t=n[0],o=0;o<n.length-1;o++)a=Z(this,s[i+o],e,o),a===H&&(a=this._$AH[o]),r||(r=!x(a)||a!==this._$AH[o]),a===X?t=X:t!==X&&(t+=(null!=a?a:"")+n[o+1]),this._$AH[o]=a}r&&!s&&this.j(t)}j(t){t===X?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class tt extends Q{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===X?void 0:t}}const et=A?A.emptyScript:"";class it extends Q{constructor(){super(...arguments),this.type=4}j(t){t&&t!==X?this.element.setAttribute(this.name,et):this.element.removeAttribute(this.name)}}class st extends Q{constructor(t,e,i,s,n){super(t,e,i,s,n),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=Z(this,t,e,0))&&void 0!==i?i:X)===H)return;const s=this._$AH,n=t===X&&s!==X||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,r=t!==X&&(s===X||n);n&&this.element.removeEventListener(this.name,this,s),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class nt{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){Z(this,t)}}const rt=w.litHtmlPolyfillSupport;null==rt||rt(W,J),(null!==(v=w.litHtmlVersions)&&void 0!==v?v:w.litHtmlVersions=[]).push("2.7.0");class ot{constructor(){this.listeners=[],this.listenersOncer=[],this.on=t=>(this.listeners.push(t),{dispose:()=>this.off(t)}),this.once=t=>{this.listenersOncer.push(t)},this.off=t=>{var e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)},this.emit=t=>{if(this.listeners.forEach((e=>e(t))),this.listenersOncer.length>0){const e=this.listenersOncer;this.listenersOncer=[],e.forEach((e=>e(t)))}},this.pipe=t=>this.on((e=>t.emit(e)))}}const at=i(6659);var ht=i(618);class lt{constructor(t=5e3){this.window=[],this.windowDuration=t}updateWindow(){const t=performance.now()-this.windowDuration;for(;this.window.length>0&&this.window[0].timestamp<t;)this.window.shift()}onMessage(t){this.window.push({timestamp:performance.now(),bytes:t}),this.updateWindow()}getPacketsPerSecond(){return this.updateWindow(),1e3*this.window.length/this.windowDuration}getAveragePacketSize(){this.updateWindow();const t=this.window.reduce(((t,e)=>t+e.bytes),0);return t/this.window.length}getBytesPerSecond(){this.updateWindow();const t=this.window.reduce(((t,e)=>t+e.bytes),0);return 1e3*t/this.windowDuration}formatStats(){return`${this.getPacketsPerSecond().toFixed(2)} msgs/sec, ${this.getAveragePacketSize().toFixed(2)} bytes/msg, ${this.getBytesPerSecond()} bytes/sec`}}var ct=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class ut extends at{constructor(t,e,i){super(),this.sendStats=new lt,this.receiveStats=new lt,this.onClose=new ot,this.closed=!1,this.client=t,this.peerID=e,this.peerConnection=new RTCPeerConnection({iceServers:t.iceServers}),window.addEventListener("beforeunload",(t=>{var e;this.peerConnection.close(),null===(e=this.dataChannel)||void 0===e||e.close()})),this.peerConnection.onicecandidate=t=>{t.candidate&&this.client.send({kind:"send-message",type:"candidate",destinationID:e,payload:t.candidate})},this.peerConnection.onconnectionstatechange=t=>{R().debug(`ConnectionStateChange: ${this.peerConnection.connectionState}`),"disconnected"===this.peerConnection.connectionState&&this.close()},i?(this.peerConnection.onnegotiationneeded=()=>ct(this,void 0,void 0,(function*(){const t=yield this.peerConnection.createOffer();this.client.send({kind:"send-message",type:"offer",destinationID:e,payload:t}),yield this.peerConnection.setLocalDescription(t)})),this.setDataChannel(this.peerConnection.createDataChannel("data",{ordered:!0}))):this.peerConnection.ondatachannel=t=>{this.setDataChannel(t.channel)}}close(){var t;closed||(this.closed=!0,this.peerConnection.close(),null===(t=this.dataChannel)||void 0===t||t.close(),this.onClose.emit())}setDataChannel(t){this.dataChannel=t,this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=t=>{this.emit("open")},this.dataChannel.onmessage=t=>{this.receiveStats.onMessage(t.data.byteLength),this.emit("data",ht.decode(new Uint8Array(t.data)))},this.dataChannel.onclose=t=>{R().debug("Data channel closed..."),this.close()}}onSignalingMessage(t,e){return ct(this,void 0,void 0,(function*(){if(R().debug(`onSignalingMessage: ${t}, ${JSON.stringify(e)}`),"offer"===t){yield this.peerConnection.setRemoteDescription(e),R().debug("Generating answer...");const t=yield this.peerConnection.createAnswer();yield this.peerConnection.setLocalDescription(t),this.client.send({kind:"send-message",type:"answer",destinationID:this.peerID,payload:t})}else"answer"===t?yield this.peerConnection.setRemoteDescription(e):"candidate"===t&&(yield this.peerConnection.addIceCandidate(e))}))}send(t){var e;if("open"!==(null===(e=this.dataChannel)||void 0===e?void 0:e.readyState))return;let i=ht.encode(t);this.sendStats.onMessage(i.byteLength),this.dataChannel.send(i)}}const pt="https://netplayjs.varunramesh.net";class dt{constructor(t=pt){this.connections=new Map,this.onHostMatch=new ot,this.onJoinMatch=new ot,this.onConnection=new ot,this.onRegistered=new ot,this.serverURL=t,this.ws=new WebSocket(function(t){const e=new URL(t);if("http:"===e.protocol)return`ws://${e.hostname}/`;if("https:"===e.protocol)return`wss://${e.hostname}/`;throw new Error(`Unknown protocol: ${e.protocol}`)}(this.serverURL)),this.ws.onmessage=t=>{R().debug(`Server -> Client: ${t.data}`),this.onServerMessage(JSON.parse(t.data))}}send(t){const e=JSON.stringify(t);R().debug(`Client -> Server: ${e}`),this.ws.send(e)}onServerMessage(t){if("registration-success"===t.kind)this.clientID=t.clientID,this.iceServers=t.iceServers,this.onRegistered.emit(this.clientID);else if("peer-message"===t.kind){if(!this.connections.has(t.sourceID)){const e=new ut(this,t.sourceID,!1);this.connections.set(t.sourceID,e),this.onConnection.emit(e)}this.connections.get(t.sourceID).onSignalingMessage(t.type,t.payload)}else"host-match"===t.kind?this.onHostMatch.emit({clientIDs:t.clientIDs}):"join-match"===t.kind&&this.onJoinMatch.emit({hostID:t.hostID})}connectPeer(t){const e=new ut(this,t,!0);return this.connections.set(t,e),this.onConnection.emit(e),e}sendMatchRequest(t,e,i){this.send({kind:"match-request",gameID:t,minPlayers:e,maxPlayers:i})}}var ft=i(2428),mt=i(7040);class gt{connectToHost(t){this.updateState({kind:"connecting-to-host"});const e=this.matchmaker.connectPeer(t);e.on("open",(()=>{this.onClientStart.emit(e),this.updateState({kind:"game-in-progress"}),e.onClose.on((()=>{this.updateState({kind:"connection-closed"})}))}))}constructor(){this.state={kind:"connecting-to-server"},this.onClientStart=new ot,this.onHostStart=new ot,this.root=this.createRootElement(),this.gameURL=window.location.href.split("#")[0];const t=ft.parse(window.location.hash),e=t.server||this.getLocalStorageServerOverride()||pt;this.matchmaker=new dt(e),this.matchmaker.onRegistered.once((()=>{if(t.room){const e=t.room;this.connectToHost(e)}else{const t=this.matchmaker.clientID,e=this.getJoinURL(t),i=document.createElement("canvas");mt.rT(i,e),this.updateState({kind:"registered",clientID:t,joinURL:e,qrCanvas:i}),this.startHostListening()}})),this.render()}startHostListening(){this.hostListeningHandle=this.matchmaker.onConnection.on((t=>{t.on("open",(()=>{this.onHostStart.emit(t),this.updateState({kind:"game-in-progress"}),t.onClose.on((()=>{this.updateState({kind:"connection-closed"})}))}))}))}stopHostListening(){this.hostListeningHandle.dispose()}startMatchmaking(){this.stopHostListening(),this.matchmaker.sendMatchRequest(this.gameURL,2,2),this.updateState({kind:"searching-for-matches"}),this.matchmaker.onHostMatch.once((t=>{this.updateState({kind:"hosting-public-match"}),this.startHostListening()})),this.matchmaker.onJoinMatch.once((t=>{this.connectToHost(t.hostID)}))}updateState(t){this.state=t,this.render()}getLocalStorageServerOverride(){try{return window.localStorage.getItem("NETPLAYJS_SERVER_OVERRIDE")}catch(t){return null}}getJoinURL(t){let e={room:t};return this.matchmaker.serverURL!==pt&&(e.server=this.matchmaker.serverURL),`${this.gameURL}#${ft.stringify(e)}`}centeredText(t){return j`<div
      style="display: flex; width: 100%; height: 100%; align-items: center; justify-content: center;"
    >
      <div style="font-size: 1.5em;">${t}</div>
    </div>`}menuContent(){return"connecting-to-server"===this.state.kind?this.centeredText("Connecting to NetplayJS server..."):"registered"===this.state.kind?j` <div
        style="display: grid; width: 100%; height: 100%; grid-template-columns: 1fr 1px 1fr; grid-column-gap: 10px;"
      >
        <div
          style="display: flex; flex-direction: column; align-items: center;"
        >
          <h1 style="margin: 5px;">Public Match</h1>
          <p>Play with random strangers on the internet.</p>
          <button
            style="font-size: 1.5em; background-color: #4CAF50; color: white; padding: 0.5em; border: none; cursor: pointer;"
            @click=${()=>this.startMatchmaking()}
          >
            Start Matchmaking
          </button>
        </div>
        <div
          style="display: flex; width: 100%; height: 100%; align-items: center; justify-content: center;"
        >
          <div style="background-color: black; width: 1px; height: 75%;"></div>
        </div>

        <div
          style="display: flex; flex-direction: column; align-items: center;"
        >
          <h1 style="margin: 5px;">Private Match</h1>
          <p>Invite players to a game via a link or QR code.</p>
          Join URL (send this to a friend):

          <a target="_blank" href="${this.state.joinURL}"> ${this.state.joinURL} </a>
          <div>${this.state.qrCanvas}</div>
        </div>
      </div>`:"connecting-to-host"===this.state.kind?this.centeredText("Connecting to host..."):"searching-for-matches"===this.state.kind?this.centeredText("Searching for matches..."):"hosting-public-match"===this.state.kind?this.centeredText("You are the host. Waiting for client to connect..."):"connection-closed"===this.state.kind?this.centeredText("The connection was closed..."):void 0}render(){((t,e,i)=>{const s=(void 0,e);let n=s._$litPart$;if(void 0===n){const t=(void 0,null);s._$litPart$=n=new J(e.insertBefore(O(),t),t,void 0,{})}n._$AI(t)})(j`
        ${this.menuContent()}
        <div style="position: absolute; right: 10px; bottom: 10px;">
          <a target="_blank" style="text-decoration: none; color: black;" href="https://github.com/rameshvarun/netplayjs">NetplayJS v${i(3517).i8}</a>
        </div>
      `,this.root),"game-in-progress"===this.state.kind?this.root.style.display="none":this.root.style.display="inherit"}createRootElement(){const t=document.createElement("div");return t.style.zIndex="1",t.style.position="absolute",t.style.backgroundColor="white",t.style.padding="10px",t.style.left="50%",t.style.top="50%",t.style.boxShadow="0px 0px 10px black",t.style.transform="translate(-50%, -50%)",t.style.boxSizing="border-box",t.style.borderRadius="5px",t.style.width="960px",t.style.height="400px",t.style.maxWidth="95%",t.style.maxHeight="95%",t.style.fontFamily="sans-serif",document.body.appendChild(t),t}}var yt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class bt{isChannelOrdered(t){return t.ordered}isChannelReliable(t){return null===t.maxPacketLifeTime&&null===t.maxRetransmits}checkChannel(t){S.isTrue(this.isChannelOrdered(t),"Data Channel must be ordered."),S.isTrue(this.isChannelReliable(t),"Channel must be reliable.")}constructor(t){if(this.gameClass=t,this.canvas=document.createElement("canvas"),this.canvas.width=t.canvasSize.width,this.canvas.height=t.canvasSize.height,this.canvas.style.backgroundColor="black",this.canvas.style.position="absolute",this.canvas.style.zIndex="0",this.canvas.style.boxShadow="0px 0px 10px black",this.resize(),window.addEventListener("resize",(()=>this.resize())),document.body.appendChild(this.canvas),this.stats=document.createElement("div"),this.stats.style.zIndex="1",this.stats.style.position="absolute",this.stats.style.backgroundColor="rgba(0, 0, 0, 0.5)",this.stats.style.color="white",this.stats.style.padding="5px",this.stats.style.display="none",document.body.appendChild(this.stats),this.playerPausedIndicator=(()=>{const t=document.createElement("div");return t.style.zIndex="1",t.style.position="absolute",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.color="white",t.style.padding="10px",t.style.left="50%",t.style.top="50%",t.style.transform="translate(-50%, -50%)",t.style.boxSizing="border-box",t.style.fontFamily="sans-serif",t.innerHTML='\n      <p align="center" style="margin: 3px">The other player has minimized or hidden their tab.</p>\n      <p align="center" style="margin: 3px">The game may run slowly until they return.</p>\n      ',t.style.display="none",document.body.appendChild(t),t})(),this.gameClass.touchControls&&window.navigator.userAgent.toLowerCase().includes("mobile"))for(let[t,e]of Object.entries(this.gameClass.touchControls))e.show();this.inputReader=new y(document.body,this.canvas,this.gameClass.pointerLock||!1,this.gameClass.touchControls||{})}calculateLayout(t,e){const i=t.width/e.width,s=t.height/e.height,n=e.width*s>=t.width,r=n?i:s;let o=e.width*r,a=e.height*r,h=0,l=0;return n?l=t.height/2-a/2:h=t.width/2-o/2,{width:o,height:a,left:h,top:l}}resize(){const t=this.calculateLayout({width:window.innerWidth,height:window.innerHeight},this.gameClass.canvasSize);b.debug("Calculating new layout: %o",t),this.canvas.style.width=`${t.width}px`,this.canvas.style.height=`${t.height}px`,this.canvas.style.top=`${t.top}px`,this.canvas.style.left=`${t.left}px`}start(){return yt(this,void 0,void 0,(function*(){const t=new gt;t.onClientStart.once((t=>{const e=[new h(0,!1,!0),new h(1,!0,!1)];this.watchRTCStats(t.peerConnection),this.startClient(e,t),this.startVisibilityWatcher(t)})),t.onHostStart.once((t=>{const e=[new h(0,!0,!0),new h(1,!1,!1)];this.watchRTCStats(t.peerConnection),this.startHost(e,t),this.startVisibilityWatcher(t)}))}))}startVisibilityWatcher(t){t.send({type:"visibility-state",value:document.visibilityState}),document.addEventListener("visibilitychange",(()=>{b.debug(`My visibility state changed to: ${document.visibilityState}.`),t.send({type:"visibility-state",value:document.visibilityState})})),t.on("data",(t=>{"visibility-state"===t.type&&("hidden"===t.value?this.playerPausedIndicator.style.display="inherit":this.playerPausedIndicator.style.display="none")}))}renderRTCStats(t){return j`
      <details>
        <summary>WebRTC Stats</summary>
        ${[...t.values()].map((t=>j`<div style="margin-left: 10px;">
            <details>
              <summary>${t.type}</summary>
              ${Object.entries(t).map((([e,i])=>{if("type"!==e)return j`<div style="margin-left: 10px;">${e}: ${t[e]}</div>`}))}
            </details>
          </div>`))}
      </details>
    `}watchRTCStats(t){return yt(this,void 0,void 0,(function*(){const e=yield t.getStats();this.rtcStats=this.renderRTCStats(e),setTimeout((()=>yt(this,void 0,void 0,(function*(){yield this.watchRTCStats(t)}))),1e3)}))}}class Rt{constructor(t){this.discount=t,this.est_average=0,this.est_variance=0,this.initialized=!1}update(t){if(this.initialized){let e=t-this.est_average;this.est_variance=(1-this.discount)*(this.est_variance+this.discount*e*e),this.est_average=this.discount*t+(1-this.discount)*this.est_average}else this.est_average=t,this.initialized=!0}average(){return this.est_average}variance(){return this.est_variance}stddev(){return Math.sqrt(this.est_variance)}}class _t{constructor(t,e,i,s,n,r,o,a){this.frame=0,this.inputs=new Map,this.missedFrames=0,this.stateSyncsReceived=0,this.stateSyncsSent=0,this.isHost=t,this.state=e,this.players=i,this.timestep=s,this.pollInput=r,this.broadcastInput=o,this.stateSyncPeriod=n;for(let t of this.players)this.inputs.set(t,[]);if(this.isHost&&this.stateSyncPeriod>0){if(!a)throw new Error("Expected a broadcastState argument");this.broadcastState=a}}getLocalPlayer(){return this.players.filter((t=>t.isLocalPlayer()))[0]}checkAllInputsReady(){for(let t of this.players)if(0===l(this.inputs,t).length)return!1;return!0}tryAdvanceState(){if(!this.checkAllInputsReady())return void this.missedFrames++;let t=new Map;for(let e of this.players){let i=u(l(this.inputs,e));t.set(e,i.input)}this.state.tick(t),this.frame++,this.tryStateSync(),this.processLocalInput()}start(){this.tryStateSync(),this.processLocalInput(),setInterval((()=>{this.tryAdvanceState()}),this.timestep)}onStateSync(t,e){this.state.deserialize(e),this.stateSyncsReceived++}tryStateSync(){this.isHost&&this.stateSyncPeriod>0&&this.frame%this.stateSyncPeriod==0&&(this.broadcastState(this.frame,this.state.serialize()),this.stateSyncsSent++)}processLocalInput(){let t=this.getLocalPlayer(),e=this.pollInput();l(this.inputs,t).push({frame:this.frame,input:this.pollInput()}),this.broadcastInput(this.frame,e)}onRemoteInput(t,e,i){const s=l(this.inputs,e);0===s.length?this.frame:s[s.length-1].frame,s.push({frame:t,input:i})}}class St extends bt{constructor(t){super(t),this.pingMeasure=new Rt(.2)}getStateSyncPeriod(){return this.gameClass.deterministic?0:1}startHost(t,e){var i;S("open"===(null===(i=e.dataChannel)||void 0===i?void 0:i.readyState),"DataChannel must be open."),b.info("Starting a lockstep host."),this.game=new this.gameClass(this.canvas,t),this.lockstepNetcode=new _t(!0,this.game,t,this.gameClass.timestep,this.getStateSyncPeriod(),(()=>this.inputReader.getInput()),((t,i)=>{e.send({type:"input",frame:t,input:i.serialize()})}),((t,i)=>{e.send({type:"state",frame:t,state:i})})),e.on("data",(i=>{if("input"===i.type){let e=new g;e.deserialize(i.input),this.lockstepNetcode.onRemoteInput(i.frame,t[1],e)}else"ping-req"==i.type?e.send({type:"ping-resp",sent_time:i.sent_time}):"ping-resp"==i.type&&this.pingMeasure.update(Date.now()-i.sent_time)})),console.log("Client has connected... Starting game..."),setInterval((()=>{e.send({type:"ping-req",sent_time:Date.now()})}),100),this.startGameLoop()}startClient(t,e){var i;S("open"===(null===(i=e.dataChannel)||void 0===i?void 0:i.readyState),"DataChannel must be open."),b.info("Starting a lockstep client."),this.game=new this.gameClass(this.canvas,t),this.lockstepNetcode=new _t(!1,this.game,t,this.gameClass.timestep,this.getStateSyncPeriod(),(()=>this.inputReader.getInput()),((t,i)=>{e.send({type:"input",frame:t,input:i.serialize()})})),e.on("data",(i=>{if("input"===i.type){let e=new g;e.deserialize(i.input),this.lockstepNetcode.onRemoteInput(i.frame,t[0],e)}else"state"===i.type?this.lockstepNetcode.onStateSync(i.frame,i.state):"ping-req"==i.type?e.send({type:"ping-resp",sent_time:i.sent_time}):"ping-resp"==i.type&&this.pingMeasure.update(Date.now()-i.sent_time)})),console.log("Successfully connected to server... Starting game..."),setInterval((()=>{e.send({type:"ping-req",sent_time:Date.now()})}),100),this.startGameLoop()}startGameLoop(){this.stats.style.display="inherit",this.lockstepNetcode.start();let t=e=>{this.game.draw(this.canvas),this.stats.innerHTML=`\n      <div>Netcode Algorithm: Lockstep</div>\n      <div>Ping: ${this.pingMeasure.average().toFixed(2)} ms +/- ${this.pingMeasure.stddev().toFixed(2)} ms</div>\n      <div>Frame Number: ${this.lockstepNetcode.frame}</div>\n      <div>Missed Frames: ${this.lockstepNetcode.missedFrames}</div>\n\n      <div>State Syncs: ${this.lockstepNetcode.stateSyncsSent} sent, ${this.lockstepNetcode.stateSyncsReceived} received</div>\n      `,requestAnimationFrame(t)};requestAnimationFrame(t)}}class vt extends o{}const wt=i(7520);let At=null;const Ct=256,Et=240;class It extends vt{constructor(t){super();const e=t.getContext("2d");this.imageData=e.getImageData(0,0,Ct,Et),this.buf=new ArrayBuffer(this.imageData.data.length),this.buf8=new Uint8ClampedArray(this.buf),this.buf32=new Uint32Array(this.buf);for(var i=0;i<this.buf32.length;++i)this.buf32[i]=4278190080;this.nes=new wt.NES({onFrame:t=>{for(var e=0,i=0;i<Et;++i)for(var s=0;s<Ct;++s)e=256*i+s,this.buf32[e]=4278190080|t[e]},onAudioSample:(t,e)=>{}}),this.nes.loadROM(At)}serialize(){throw new Error("The game state cannot be serialized.")}deserialize(t){throw new Error("The game state cannot be deserialized.")}tick(t){this.nes.frame();for(let[e,i]of t)i.keysHeld.z?this.nes.buttonDown(e.getID()+1,wt.Controller.BUTTON_A):this.nes.buttonUp(e.getID()+1,wt.Controller.BUTTON_A),i.keysHeld.x?this.nes.buttonDown(e.getID()+1,wt.Controller.BUTTON_B):this.nes.buttonUp(e.getID()+1,wt.Controller.BUTTON_B),i.keysHeld.ArrowUp?this.nes.buttonDown(e.getID()+1,wt.Controller.BUTTON_UP):this.nes.buttonUp(e.getID()+1,wt.Controller.BUTTON_UP),i.keysHeld.ArrowDown?this.nes.buttonDown(e.getID()+1,wt.Controller.BUTTON_DOWN):this.nes.buttonUp(e.getID()+1,wt.Controller.BUTTON_DOWN),i.keysHeld.ArrowLeft?this.nes.buttonDown(e.getID()+1,wt.Controller.BUTTON_LEFT):this.nes.buttonUp(e.getID()+1,wt.Controller.BUTTON_LEFT),i.keysHeld.ArrowRight?this.nes.buttonDown(e.getID()+1,wt.Controller.BUTTON_RIGHT):this.nes.buttonUp(e.getID()+1,wt.Controller.BUTTON_RIGHT),i.keysHeld.Enter?this.nes.buttonDown(e.getID()+1,wt.Controller.BUTTON_START):this.nes.buttonUp(e.getID()+1,wt.Controller.BUTTON_START),i.keysHeld.Shift?this.nes.buttonDown(e.getID()+1,wt.Controller.BUTTON_SELECT):this.nes.buttonUp(e.getID()+1,wt.Controller.BUTTON_SELECT)}draw(t){const e=t.getContext("2d");e.fillStyle="black",e.fillRect(0,0,Ct,Et),this.imageData.data.set(this.buf8),e.putImageData(this.imageData,0,0)}}var Nt,Dt;It.timestep=1e3/60,It.canvasSize={width:Ct,height:Et},It.deterministic=!0,Nt=(t,e)=>{At=e,new St(It).start()},(Dt=new XMLHttpRequest).open("GET","../files/rom.nes"),Dt.overrideMimeType("text/plain; charset=x-user-defined"),Dt.onload=function(){if(200===this.status){if(Dt.responseText.match(/^<!doctype html>/i))return Nt(new Error("Page not found"));Nt(0,this.responseText)}else 0===this.status||Nt(new Error(Dt.statusText))},Dt.onerror=function(){Nt(new Error(Dt.statusText))},Dt.send()})()})();
//# sourceMappingURL=emulator.js.map